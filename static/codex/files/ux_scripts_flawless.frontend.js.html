<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ux/scripts/flawless.frontend.js - flawless</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="http://a3d72a45d111006ec192-ec5b80a12b0b09b4d52373336afb4254.r80.cf1.rackcdn.com/usability-dynamics.png" title="flawless"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/: Flawless.API.html">: Flawless.API</a></li>
            
                <li><a href="../classes/: Flawless.Element.html">: Flawless.Element</a></li>
            
                <li><a href="../classes/: Flawless.Flawless_Module.html">: Flawless.Flawless_Module</a></li>
            
                <li><a href="../classes/: Flawless.License.html">: Flawless.License</a></li>
            
                <li><a href="../classes/Flawless.BuddyPress.html">Flawless.BuddyPress</a></li>
            
                <li><a href="../classes/Flawless.Flawless\Shortcode.html">Flawless.Flawless\Shortcode</a></li>
            
                <li><a href="../classes/Flawless.Flawless\Widget.html">Flawless.Flawless\Widget</a></li>
            
                <li><a href="../classes/flawless_wpp_extensions.html">flawless_wpp_extensions</a></li>
            
                <li><a href="../classes/Shortcode.html">Shortcode</a></li>
            
                <li><a href="../classes/Shortcodes.html">Shortcodes</a></li>
            
                <li><a href="../classes/Theme UI.html">Theme UI</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/Core Assets.html">Core Assets</a></li>
            
                <li><a href="../modules/Flawless.html">Flawless</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: ux/scripts/flawless.frontend.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * Flawless - Global Frontend JavaScript
 *
 *
 * === Usage ==
 * - Dynamic Progress Bar: jQuery( &#x27;.some_element&#x27; ).append( flawless.progress_bar( { type: &#x27;success&#x27;, frequency : 200 }, function() {  ..do something when done.. } ) );
 *
 *
 * @version 0.5.0
 * @since Flawless 0.2.3
 * @author Usability Dynamics, Inc.
 *
 */

/* Load Defaults */
var flawless = jQuery.extend( true, {
  fancybox_options: {
    &#x27;transitionIn&#x27;: &#x27;elastic&#x27;,
    &#x27;transitionOut&#x27;: &#x27;elastic&#x27;,
    &#x27;speedIn&#x27;: 600,
    &#x27;speedOut&#x27;: 200,
    &#x27;cyclic&#x27;: true,
    &#x27;overlayShow&#x27;: false
  }
}, typeof flawless === &#x27;object&#x27; ? flawless : {} );

/**
 * Perform actions that require images to be fully loaded
 *
 * @since Flawless 0.3.2
 * @author Usability Dynamics, Inc.
 */
jQuery( window ).load( function () {
  flawless_resize_dom_elements();
  flawless.masonry();
});

/**
 * Primary $.ready() function.
 *
 * @since Flawless 0.0.1
 * @author Usability Dynamics, Inc.
 *
 */
jQuery( document ).ready( function () {
  jQuery( document ).trigger( &#x27;flawless::ready::initialize&#x27; );

  flawless.log( &#x27;Flawless Global JS Loaded.&#x27; );

  jQuery( document ).trigger( &#x27;flawless::ready::complete&#x27; );

  jQuery( &#x27;.flawless_placeholder&#x27; ).each( function () {

    var placeholder = this;

    placeholder.update_dimensions = function () {
      jQuery( this ).html( jQuery( this ).width() + &#x27;px X &#x27; + jQuery( this ).height() + &#x27;px&#x27; );
    }

    placeholder.update_dimensions();

    jQuery( window ).resize( function () {
      placeholder.update_dimensions();
    } );

    jQuery( this ).click( function () {
      flawless.annoy_me( jQuery( this ) );
    } );

  } );

  jQuery( &#x27;.imr-learn-more&#x27; ).addClass( &#x27;btn btn-danger&#x27; );

  flawless.comment_form();
  flawless_resize_dom_elements();

  /** Experimental */
  if ( flawless.options &amp;&amp; flawless.options.background_header_image_fade_in &amp;&amp; jQuery( &#x27;.row-c4-1234 .cfct-module-hero&#x27; ).length || jQuery( &#x27;.row-c4-1234 .cfct-module-carousel&#x27; ).length ) {
    jQuery( &#x27;.background_header_image&#x27; ).fadeTo( 2000, 1 );
  }

//** WP 3.4 support for inline editing */
  if ( typeof wp === &#x27;object&#x27; &amp;&amp; typeof wp.customize === &#x27;function&#x27; ) {
    wp.customize( &#x27;blogname&#x27;, function ( value ) {
      value.bind( function ( to ) {
        $( &#x27;#site-title a&#x27; ).html( to );
      } );
    } );
  }

} );

/**
 * Ran on flawless::ready - giving child themes and other scripts the ability to modify global flawless object
 *
 * @since Flawless 0.3.5
 * @author Usability Dynamics, Inc.
 *
 */
jQuery( document ).bind( &#x27;flawless::ready::complete&#x27;, function () {

  jQuery( &#x27;.no-ajax&#x27; ).removeClass( &#x27;no-ajax&#x27; );

  if ( typeof _gaq === &#x27;object&#x27; &amp;&amp; typeof _gaq.push === &#x27;function&#x27; ) {
    flawless.google_analytics = true;
    flawless.log( &#x27;Google Analytics active - event tracking enabled.&#x27; );
  }

  /* Fix hidden ad_hoc menus */
  if ( jQuery( &#x27;.flawless_ad_hoc_menu_parent&#x27; ).length ) {

    jQuery( &#x27;.flawless_ad_hoc_menu_parent&#x27; ).each( function () {

      /* Display this item, and it&#x27;s parents, if it is hidden, but the parents are not */
      if ( !jQuery( this ).is( &#x27;:visible&#x27; ) &amp;&amp; jQuery( this ).parents().is( &#x27;:visible&#x27; ).length ) {
        jQuery( this ).parents().show();
      }

    } );
  }

  jQuery( &#x27;form.search_format&#x27; ).submit( function () {

    if ( typeof flawless.header !== &#x27;object&#x27; ) {
      return true;
    }

    if ( flawless.header.must_enter_search_term === &#x27;true&#x27; &amp;&amp; jQuery( &#x27;.search_input_field&#x27;, this ).val() === &#x27;&#x27; ) {
      jQuery( &#x27;.search_input_field&#x27;, this ).focus();
      return false;
    }

  } );

  jQuery( &#x27;.search_input_field.flawless_input_autogrow&#x27; ).focus( function () {

    if ( !flawless.search_input_field_width ) {
      flawless.search_input_field_width = parseInt( jQuery( this ).width() )
    }

    if ( typeof jQuery.prototype.animate !== &#x27;function&#x27; ) {
      return;
    }

    var args = {
      wrapper_width: jQuery( this ).closest( &#x27;.search_inner_wrapper&#x27; ).width(),
      search_button_width: jQuery( this ).siblings( &#x27;.search_button &#x27; ).outerWidth(),
      expanded_width: flawless.search_input_field_width + 100
    }

    /* Prevent expanded input width + search button from being wider than the wrapper */
    if ( args.expanded_width &gt; ( args.wrapper_width - args.search_button_width ) ) {
      args.expanded_width = args.wrapper_width - args.search_button_width - 25;
    }

    /* Increase width */
    if ( jQuery( this ).width() === flawless.search_input_field_width &amp;&amp; args.expanded_width &gt; flawless.search_input_field_width ) {
      jQuery( this ).animate( { width: ( args.expanded_width ) + &#x27;px&#x27; }, 500 );
    }

  } );

  jQuery( &#x27;.toggle_visual_debug&#x27; ).click( function () {
    flawless.toggle_visual_debug();
  } );


  jQuery( &#x27;.search_input_field&#x27; ).blur( function () {

    if ( jQuery( this ).val() === &#x27;&#x27; ) {
      jQuery( this ).delay( 500 ).animate( { width: ( flawless.search_input_field_width ) + &#x27;px&#x27; }, 500 );
    }

  } );

  /* Handle header dropdown menus */
  flawless_header_dropdown_menus();

  /* Enable Layout Editor */
  if ( typeof jQuery.fn.frontend_editor === &#x27;function&#x27; ) {

    //jQuery( &#x27;.flawless_edit_layout&#x27; ).show().css( &#x27;visibility&#x27;, &#x27;visible&#x27; ).click( function( e ) {
    jQuery( &#x27;.flawless_edit_layout&#x27; ).css( &#x27;visibility&#x27;, &#x27;visible&#x27; ).fadeIn( &#x27;fast&#x27; ).css( &#x27;display&#x27;, &#x27;block&#x27; ).click( function ( e ) {
      e.preventDefault();

      jQuery( document ).frontend_editor()._create_panel();

    } );
  }

  jQuery( document ).trigger( &#x27;flawless::ui_refresh&#x27; );

  jQuery( &#x27;a[data-toggle=&quot;tab&quot;]&#x27; ).on( &#x27;shown&#x27;, function ( e ) {
    jQuery( document ).trigger( &#x27;flawless::ui_refresh&#x27; );
  } );

  if ( typeof prettyPrint === &#x27;function&#x27; ) {
    prettyPrint();
  }

} );

/**
 * Functions to be executed when DOM is ready or updated
 *
 * @since Flawless 0.3.2
 * @author Usability Dynamics, Inc.
 */
jQuery( document ).bind( &#x27;flawless::ui_refresh&#x27;, function () {
  flawless.log( &#x27;Bound Function: flawless::ui_refresh&#x27; );

  /* Setup Helper Scripts (if they are disabled, they are not loaded */
  if ( typeof jQuery.fn.lazyload === &#x27;function&#x27; ) {
    jQuery( &#x27;img.lazy&#x27; ).lazyload();
  }

  if ( typeof jQuery.fn.form_helper === &#x27;function&#x27; ) {
    jQuery( &#x27;form&#x27; ).form_helper( {
      debug: flawless.developer_mode
    } );
  }
  ;

  if ( typeof jQuery.fn.tooltip === &#x27;function&#x27; ) {
    jQuery( &#x27;.webster&#x27; ).tooltip()
  }
  ;

  if ( typeof jQuery.fn.placeholder === &#x27;function&#x27; ) {
    jQuery( &#x27;input[type=text],input[type=email],input[type=password],input[type=tel],textarea&#x27; ).placeholder();
  }

  /* Enable Fancybox, if function exists, for all links with fancybox_image class and gallery itmes */
  if ( typeof jQuery.fn.fancybox === &#x27;function&#x27; ) {

    /* Fix WP Gallery Shortcode to have image-association */
    jQuery( &#x27;div.gallery &gt; .gallery-item a&#x27; ).attr( &#x27;data-fancybox-group&#x27;, &#x27;fl_group_&#x27; + Math.floor( Math.random() * 1000 ) ).addClass( &#x27;fancybox-media&#x27; );

    jQuery( &#x27;a.fancybox-media, a.fancybox_image, a[href$=&quot;.bmp&quot;], a[href$=&quot;.gif&quot;], a[href$=&quot;.jpg&quot;], a[href$=&quot;.jpeg&quot;], a[href$=&quot;.png&quot;], a[href$=&quot;.BMP&quot;], a[href$=&quot;.GIF&quot;], a[href$=&quot;.JPG&quot;], a[href$=&quot;.JPEG&quot;], a[href$=&quot;.PNG&quot;]&#x27; ).fancybox( flawless.fancybox_options );
  }

  /* Enable Popover Plugin */
  if ( typeof jQuery.fn.popover === &#x27;function&#x27; ) {
    jQuery( &#x27;[rel=popover]&#x27; ).popover();
  }

  /* Debug Expander */
  jQuery( &#x27;.flawless_toggable_debug&#x27; ).dblclick( function () {
    jQuery( this ).hasClass( &#x27;flawless_debug_visible&#x27; ) ? jQuery( this ).removeClass( &#x27;flawless_debug_visible&#x27; ) : jQuery( this ).addClass( &#x27;flawless_debug_visible&#x27; );
  } );

  flawless.masonry();

} );

/**
 * Google Analytics Event Tracking
 *
 * @author potanin@UD
 */
jQuery( document ).bind( &#x27;flawless::track_event&#x27;, function ( event, data ) {

  data = jQuery.extend( true, { category: &#x27;&#x27;, action: &#x27;&#x27;, label: &#x27;&#x27;, value: 0, non_interfaction: false }, data );

  if ( !flawless.google_analytics ) {
    flawless.log( &#x27;Unable to track event, Google Analytics not found.&#x27; );
    return;
  }

  _gaq.push( [&#x27;_trackEvent&#x27;, data.category, data.action, data.label, data.value, data.non_interfaction ] );

} )

/**
 * Apply Masonry Layout to Elements, if library exists
 *
 * @since Flawless 0.2.3
 * @author Usability Dynamics, Inc.
 */
flawless.masonry = function () {

  if ( typeof jQuery.fn.masonry != &#x27;function&#x27; ) {
    return false;
  }

  jQuery( &#x27;.enable-masonry&#x27; ).masonry( {
    itemSelector: &#x27;.cfct-block&#x27;
  } );

  jQuery( &#x27;div.gallery:not(.disable-masonry)&#x27; ).masonry( {
    itemSelector: &#x27;.gallery-item&#x27;,
    isAnimated: true
  } );

}

/**
 * Progress Bar.
 *
 * @since Flawless 0.5.0
 * @author Usability Dynamics, Inc.
 */
flawless.progress_bar = function ( args, onComplete ) {
  args = jQuery.extend( true, {
    wrapper: jQuery( &#x27;&lt;div class=&quot;progress progress-striped active&quot;&gt;&lt;/div&gt;&#x27; ),
    bar: jQuery( &#x27;&lt;div class=&quot;bar&quot;&gt;&lt;/div&gt;&#x27; ),
    interval_event: {},
    type: &#x27;info&#x27;,
    start: 0,
    current: 0,
    end: 100,
    increment: 5,
    frequency: 100
  }, args );

  args.wrapper.addClass( &#x27;progress-&#x27; + args.type );
  args.wrapper.append( args.bar );

  args.interval_event = setInterval( function () {

    jQuery( args.bar ).width( ( args.current = args.current + args.increment ) + &#x27;%&#x27; );

    if ( args.current &gt;= 100 ) {

      clearInterval( args.interval_event )

      if ( typeof jQuery.prototype.fadeTo === &#x27;function&#x27; ) {
        args.wrapper.fadeTo( 1500, 0, function () {
          typeof onComplete === &#x27;function&#x27; ? onComplete() : false;
        } );
      } else {
        args.wrapper.css( &#x27;opacity&#x27;, 0 );
        typeof onComplete === &#x27;function&#x27; ? onComplete() : false;
      }
      args.wrapper.removeClass( &#x27;active&#x27; );
    }

  }, args.frequency );

  return args.wrapper;

}

/**
 * Apply Masonry Layout to Elements, if library exists
 *
 * @since Flawless 0.2.3
 * @author Usability Dynamics, Inc.
 *
 */
flawless.toggle_visual_debug = function () {
  jQuery( &#x27;body&#x27; ).toggleClass( &#x27;flawless_visual_debug&#x27; );
}

/**
 * Apply Masonry Layout to Elements, if library exists
 *
 * @since Flawless 0.2.3
 * @author Usability Dynamics, Inc.
 *
 */
flawless.annoy_me = function ( container, args ) {

  args = jQuery.extend( true, {
    element: jQuery( &#x27;&lt;span style=&quot;border-radius:50%;width: 75px;height:75px;background-color:rgba(249, 250, 255, 0.28);position:absolute;&quot; class=&quot;something&quot;&gt;&lt;/span&gt;&#x27; ),
    container: container ? container : jQuery( &#x27;.flawless_placeholder&#x27; )
  }, args );

  jQuery( args.container ).append( args.element );
  jQuery( args.container ).css( &#x27;position&#x27;, &#x27;relative&#x27; );

  var makeNewPosition = function () {
    var nh = Math.floor( Math.random() * ( jQuery( args.container ).height() - 75 ) );
    var nw = Math.floor( Math.random() * ( jQuery( args.container ).width() - 75 ) );
    return [nh, nw];
  }

  var animateDiv = function () {
    var newq = makeNewPosition();
    jQuery( args.element ).animate( { top: newq[0], left: newq[1] }, function () {
      animateDiv();
    } );
  };

  animateDiv();

};

/**
 * Binds AJAX functionality to all instances of form.flawless_comment_form
 *
 * @author potanin@UD
 */
if ( typeof flawless.comment_form === &#x27;undefined&#x27; ) {
  flawless.comment_form = function () {

    jQuery( &#x27;div.comments_wrapper&#x27; ).each( function () {

      var args = {
        comments_wrapper: this,
        response: jQuery( &#x27;.wp_comment_form_container&#x27; ),
        comment_list: jQuery( &#x27;ol.commentlist&#x27; ),
        comment_form: jQuery( &#x27;form.flawless_comment_form&#x27; )
      }

      if ( jQuery( &#x27;.response_container&#x27;, args.comments_wrapper ).length ) {
        args.response_container = jQuery( &#x27;.response_container&#x27;, args.comments_wrapper );
      } else {
        args.response_container = jQuery( &#x27;&lt;p class=&quot;response_container&quot;&gt;&lt;/p&gt;&#x27; );
        jQuery( args.response_container ).insertBefore( &#x27;p.form-submit&#x27;, args.comments_wrapper );
      }

      args._append_comments = function ( comment_html ) {
        jQuery( args.comment_list ).html( comment_html );
      }

      jQuery( &#x27;#cancel-comment-reply-link&#x27; ).live( &#x27;click&#x27;, function ( e ) {
        e.preventDefault();
        jQuery( &#x27;input#comment_parent &#x27;, args.response ).val( &#x27;&#x27; );
        jQuery( &#x27;#cancel-comment-reply-link&#x27; ).hide();
        jQuery( args.comments_wrapper ).append( args.response );

      } );

      jQuery( &#x27;a.comment-reply-link&#x27; ).live( &#x27;click&#x27;, function ( e ) {
        e.preventDefault();

        if ( typeof addComment === &#x27;object&#x27; &amp;&amp; typeof addComment.moveForm === &#x27;function&#x27; ) {
        }
        ;

        args.comment = jQuery( this ).closest( &#x27;li.comment&#x27; );
        args.cancel_reply = jQuery( &#x27;#cancel-comment-reply-link&#x27;, args.response );

        jQuery( &#x27;input#comment_parent &#x27;, args.response ).val( jQuery( args.comment ).attr( &#x27;data-comment_id&#x27; ) );

        jQuery( args.comment ).append( args.response );
        jQuery( args.cancel_reply ).show();

      } );

      jQuery( args.comment_form ).submit( function ( e ) {
        e.preventDefault();

        if ( jQuery( args.comment_form ).hasClass( &#x27;form_processing&#x27; ) ) {
          return;
        }

        jQuery( args.comment_form ).addClass( &#x27;form_processing&#x27; );
        args.button = jQuery( &#x27;input[type=submit]&#x27;, this );
        args.comment_textarea = jQuery( &#x27;textarea[name=comment]&#x27;, this );
        args.form_data = jQuery( args.comment_form ).serialize();

        jQuery.ajax( {
          url: flawless.ajax_url,
          type: &#x27;post&#x27;,
          dataType: &#x27;json&#x27;,
          data: {
            action: &#x27;frontend_ajax_handler&#x27;,
            the_action: &#x27;comment_submit&#x27;,
            form_data: args.form_data
          },
          success: function ( data, textStatus, jqXHR ) {

            jQuery( args.comment_form ).removeClass( &#x27;form_processing&#x27; );

            if ( typeof data === &#x27;object&#x27; &amp;&amp; data.success ) {

              /* Move Comment Form to its position in case we are replying */
              jQuery( args.comments_wrapper ).append( args.response );

              jQuery( args.comment_textarea ).val( &#x27;&#x27; );

              jQuery( args.response_container ).html( &#x27;&lt;p class=&quot;alert alert-success&quot;&gt;&#x27; + data.message ? data.message : &#x27;Could not add comment.&lt;/p&gt;&#x27; );

              if ( data.comment_count ) {
                jQuery( &#x27;.comment_count&#x27; ).text( data.comment_count );
              }

              args._append_comments( data.comment_html );

            } else {

              if ( typeof data === &#x27;object&#x27; &amp;&amp; data.message != &#x27;&#x27; ) {
                var response = data.message;
              } else if ( data != &#x27;&#x27; ) {
                var response = data;
              } else {
                var response = &#x27;Could not add comment.&#x27;;
              }

              jQuery( args.response_container ).html( &#x27;&lt;p class=&quot;alert alert-error&quot;&gt;&#x27; + response + &#x27;&lt;/p&gt;&#x27; );

            }

          },
          error: function ( jqXHR, textStatus, errorThrown ) {
            jQuery( args.comment_form ).removeClass( &#x27;form_processing&#x27; );

            jQuery( args.response_container ).html( &#x27;&lt;p class=&quot;alert alert-error&quot;&gt;&#x27; + ( jqXHR.responseText ? jqXHR.responseText : &#x27;An error occured.&#x27; ) + &#x27;&lt;/p&gt;&#x27; );

          }
        } );

      } );

    } );


  }
}

/**
 * Add a message to DOM.
 *
 * Only first argument must be passed containing the text of message.
 * To set the type of message, pass secon argument as object with following &#x27;type&#x27; options: warning, error, success, info (default is info)
 * The message will be inserted into .global_notice_wrapper, unless other specified.  If the specified container is not found, a container will be created automtaiclaly after &lt;header&gt;
 *
 * This function will add a &quot;close&quot; trigger if the Twitter Bootstrap Alert function exists.
 *
 * @author potanin@UD
 */
if ( typeof flawless.add_notice === &#x27;undefined&#x27; ) {
  flawless.add_notice = function ( message, s ) {

    s = jQuery.extend( true, {
      type: &#x27;info&#x27;,
      heading: false,
      allow_dismissal: true,
      classes: {
        alert: &#x27;alert&#x27;
      },
      hide: false,
      fade: false,
      wrapper: jQuery( &#x27;.primary_notice_container&#x27; ),
      remove_others: true
    }, s );

    /* If wrapper does not exist in DOM, we insert a new one */
    if ( !jQuery( s.wrapper ).is( &#x27;:visible&#x27; ) &amp;&amp; jQuery( &#x27;.content_container&#x27; ).length ) {
      s.wrapper = jQuery( &#x27;&lt;div class=&quot;primary_notice_container container&quot;&gt;&lt;/div&gt;&#x27; ), jQuery( &#x27;.content_container&#x27; ).prepend( s.wrapper );
    }

    if ( s.remove_others ) {
      jQuery( &#x27;.alert&#x27;, s.wrapper ).remove();
    }

    /* If no message, we leave after we remove previous messages */
    if ( message === &#x27;&#x27; ) {
      return;
    }

    /* Identify our message container. Add close option if alert function exists  */
    var element = jQuery( &#x27;&lt;div class=&quot;&#x27; + s.classes.alert + &#x27; &#x27; + s.type + &#x27;&quot; alert_type=&quot;&#x27; + s.type + &#x27;&quot;&gt;&#x27; + message + &#x27;&lt;/div&gt;&#x27; )

    if ( typeof jQuery.fn.alert === &#x27;function&#x27; &amp;&amp; s.allow_dismissal ) {
      element.prepend( &#x27;&lt;a href=&quot;#&quot; class=&quot;close&quot;&gt;&amp;times;&lt;/a&gt;&#x27; );
      element.attr( &#x27;data-dismiss&#x27;, &#x27;alert&#x27; );
    }

    jQuery( s.wrapper ).append( element );

  }
}

/**
 * Enables Editor, called from WP Toolbar, or BuddyPress toolbar if it exists
 *
 */
function flawless_layout_editor ( edit_button, e ) {

  /** Function needs refractoring, for now skipped */
  return;

  var edit_button = edit_button;
  var flawless_modules = [];

  if ( jQuery( edit_button ).data( &#x27;disable_click&#x27; ) ) {
    return;
  }

  if ( typeof jQuery.fn.frontend_editor != &#x27;function&#x27; ) {
    return;
  }

  if ( typeof jQuery.fn.toolbar_message === &#x27;function&#x27; ) {
    jQuery.fn.toolbar_message( &#x27;Layout editor enabled.&#x27; );
  } else {
    flawless.add_notice( &#x27;Layout editor enabled.&#x27; );
  }

  if ( !flawless.frontend_editor ) {

    /* Associate Frontend Editor with every element with .flawless_dynamic_area class */
    flawless.frontend_editor = jQuery( &#x27;div.flawless_dynamic_area&#x27; ).frontend_editor( {
      settings: {
        max_width: flawless.max_width ? flawless.max_width : false,
        debug: flawless.developer_mode
      }
    } );

    /* Save Original Attribute if it has not been saved yet */
    if ( !jQuery( edit_button ).attr( &#x27;original_label&#x27; ) ) {
      jQuery( edit_button ).attr( &#x27;original_label&#x27;, jQuery( edit_button ).text() );
    }

    jQuery( edit_button ).text( &#x27;Save Layout&#x27; );

  } else {

    jQuery( edit_button ).data( &#x27;disable_click&#x27;, true );
    jQuery( edit_button ).text( &#x27;Saving...&#x27; );

    jQuery.ajax( {
      url: flawless.ajax_url,
      data: {
        action: &#x27;flawless_action&#x27;,
        styles: flawless.frontend_editor.styles,
        _wpnonce: flawless.nonce,
        the_action: &#x27;save_front_end_layout&#x27;
      },
      success: function ( data, textStatus, jqXHR ) {

        if ( data.success ) {

          flawless.frontend_editor.disable();

          if ( typeof jQuery.fn.toolbar_message === &#x27;function&#x27; ) {
            jQuery.fn.toolbar_message( &#x27;Layout saved.&#x27;, { type: &#x27;success&#x27; } );
          } else {
            flawless.add_notice( &#x27;Layout editor enabled.&#x27;, { type: &#x27;success&#x27; } );
          }

          jQuery( edit_button ).text( jQuery( edit_button ).attr( &#x27;original_label&#x27; ) );

          flawless.frontend_editor = false;

        } else {

          if ( typeof jQuery.fn.toolbar_message === &#x27;function&#x27; ) {
            jQuery.fn.toolbar_message( &#x27;Error saving layout, no response from server.&#x27;, { type: &#x27;error&#x27;, dim: false } );
          } else {
            flawless.add_notice( &#x27;Error saving layout, no response from server.&#x27;, { type: &#x27;error&#x27; } );
          }

        }

        jQuery( edit_button ).data( &#x27;disable_click&#x27;, false );

      },
      dataType: &quot;json&quot;
    } );

  }
}

/**
 * Applies equalHeights to various elements.
 *
 * Ran twice, once on document.ready and then on windows.load to avoid getting stuck on external assets
 *
 */
function flawless_resize_dom_elements () {
  flawless.log( &quot;Applying equalHeights()&quot; );

  jQuery( &#x27;.content_wrapper.row-fluid&#x27; ).each( function () {
    //jQuery( &#x27; &gt; .cfct-block&#x27;, this ).equalHeights();
  } );

  jQuery( &#x27;.row-fluid.equalize&#x27; ).each( function () {
    jQuery( &#x27; &gt; .cfct-block &gt; .cfct-module &#x27;, this ).equalHeights();
  } );

}

/**
 * Handles header dropdown menus.
 *
 */
function flawless_header_dropdown_menus () {

  var all_tabs = jQuery( &#x27;div.disbl div&#x27; ).length;
  var dropdown_wrapper = jQuery( &quot;.flawless_header_dropdown_links&quot; );
  var dropdown_section_wrapper = jQuery( &quot;.flawless_header_expandable_sections&quot; );
  var dropdown_sections = jQuery( &quot;.flawless_header_expandable_sections .header_dropdown_div&quot; );

  /* Reset sections after they are loaded to normal hidden settings */
  jQuery( dropdown_sections ).css( &#x27;position&#x27;, &#x27;static&#x27; );
  jQuery( dropdown_sections ).css( &#x27;left&#x27;, &#x27;0&#x27; );
  jQuery( dropdown_sections ).hide();

  jQuery( &#x27;ul.log_menu li a&#x27; ).click( function ( e ) {

    var this_link = this;
    var open_section = jQuery( &quot;.flawless_header_expandable_sections .header_dropdown_div:visible&quot; );
    var open_section_id = jQuery( open_section ).attr( &quot;id&quot; );

    /* Do nothing if a regular link was clicked */
    if ( jQuery( this_link ).attr( &#x27;href&#x27; ) != &#x27;#&#x27; ) {
      return;
    } else {
      e.preventDefault();
    }

    var this_tab = jQuery( this_link ).closest( &quot;.flawless_tab_wrapper&quot; );
    var section_id = jQuery( this ).attr( &#x27;section_id&#x27; );
    var this_section = jQuery( &quot;#&quot; + section_id, dropdown_section_wrapper );

    if ( jQuery( this_section ).is( &quot;:visible&quot; ) ) {
      var this_section_open = true;
      //flawless.log( &quot;this section is open&quot; );
    } else {
      var this_section_open = false;
      //flawless.log( &quot;this section is closed&quot; );
    }

    /* If clicked section is already open, we close it */
    if ( this_section_open &amp;&amp; ( section_id === open_section_id ) ) {
      jQuery( this_section ).slideUp();
      //flawless.log( &quot;closing this section&quot; );
      return;
    }

    /* If a section is open, and we re switching sections, close open one first */
    if ( open_section.length ) {
      jQuery( open_section ).slideUp( &quot;fast&quot;, function () {

        /* Open new section */
        jQuery( this_section ).slideDown( &quot;slow&quot;, function () {
          flawless_header_section_opened();
        } );


      } );
    } else {

      /* Open new section */
      jQuery( this_section ).slideDown( &quot;slow&quot;, function () {
        flawless_header_section_opened();
      } );

    }

  } );

}

/**
 * Executed when a header dropdown section is opened.
 *
 */
function flawless_header_section_opened () {

  /* Render the Google Map is header location dropdown.  */
  if ( jQuery( &quot;li.header_contact_section&quot; ).is( &quot;:visible&quot; ) &amp;&amp; jQuery( &quot;li.header_contact_section&quot; ).height() &gt; 0 ) {
    jQuery( &quot;li.header_contact_section&quot; ).equalHeights();
  }

  if ( jQuery( &quot;li.header_login_section&quot; ).is( &quot;:visible&quot; ) &amp;&amp; jQuery( &quot;li.header_login_section&quot; ).height() &gt; 0 ) {
    jQuery( &quot;li.header_login_section&quot; ).equalHeights();
  }

}

/**
 * Validates e-mail address.
 *
 * Source: http://www.white-hat-web-design.co.uk/articles/js-validation.php
 *
 */
function flawless_email_validate ( email ) {
  var reg = /^( [A-Za-z0-9_\-\.] )+\@( [A-Za-z0-9_\-\.] )+\.( [A-Za-z]{2,4})$/;
  if ( reg.test( email ) === false ) {
    return false;
  }

  return true;
}




    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
