<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>core/wp-content/plugins/advanced-custom-fields/js/input.js - Flawless</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="http://a3d72a45d111006ec192-ec5b80a12b0b09b4d52373336afb4254.r80.cf1.rackcdn.com/usability-dynamics.png" title="Flawless"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/: Flawless.Element.html">: Flawless.Element</a></li>
            
                <li><a href="../classes/: Flawless.Flawless_Module.html">: Flawless.Flawless_Module</a></li>
            
                <li><a href="../classes/: Flawless.Flawless_Shortcode.html">: Flawless.Flawless_Shortcode</a></li>
            
                <li><a href="../classes/: Flawless.Flawless_Widget.html">: Flawless.Flawless_Widget</a></li>
            
                <li><a href="../classes/: Flawless.flawless_wpp_extensions.html">: Flawless.flawless_wpp_extensions</a></li>
            
                <li><a href="../classes/: Flawless.License.html">: Flawless.License</a></li>
            
                <li><a href="../classes/Shortcodes.html">Shortcodes</a></li>
            
                <li><a href="../classes/Theme UI.html">Theme UI</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/Core Assets.html">Core Assets</a></li>
            
                <li><a href="../modules/Flawless.html">Flawless</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: core/wp-content/plugins/advanced-custom-fields/js/input.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">


/* **********************************************
     Begin acf.js
********************************************** */

/*
*  input.js
*
*  All javascript needed for ACF to work
*
*  @type  awesome
*  @date  1/08/13
*
*  @param  N/A
*  @return  N/A
*/ 

var acf = {
  
  // vars
  ajaxurl        :  &#x27;&#x27;,
  admin_url      :  &#x27;&#x27;,
  wp_version      :  &#x27;&#x27;,
  post_id        :  0,
  nonce        :  &#x27;&#x27;,
  l10n        :  null,
  o          :  null,
  
  // helper functions
  helpers        :  {
    get_atts    :   null,
    version_compare  :  null,
    uniqid      :  null,
    sortable    :  null,
    add_message    :  null,
    is_clone_field  :  null,
    url_to_object  :  null
  },
  
  
  // modules
  validation      :  null,
  conditional_logic  :  null,
  media        :  null,
  
  
  // fields
  fields        :  {
    date_picker    :  null,
    color_picker  :  null,
    Image      :  null,
    file      :  null,
    wysiwyg      :  null,
    gallery      :  null,
    relationship  :  null
  }
};

(function($){
  
  
  /*
  *  acf.helpers.isset
  *
  *  http://phpjs.org/functions/isset
  *
  *  @type  function
  *  @date  20/07/13
  *
  *  @param  {mixed}    arguments
  *  @return  {boolean}  
  */
  
  acf.helpers.isset = function(){
    
    var a = arguments,
          l = a.length,
          i = 0,
          undef;
  
      if (l === 0) {
          throw new Error(&#x27;Empty isset&#x27;);
      }
  
      while (i !== l) {
          if (a[i] === undef || a[i] === null) {
              return false;
          }
          i++;
      }
      return true;
      
  };
  
  
  /*
  *  acf.helpers.get_atts
  *
  *  description
  *
  *  @type  function
  *  @date  1/06/13
  *
  *  @param  {el}    $el
  *  @return  {object}  atts
  */
  
  acf.helpers.get_atts = function( $el ){
    
    var atts = {};
    
    $.each( $el[0].attributes, function( index, attr ) {
          
          if( attr.name.substr(0, 5) == &#x27;data-&#x27; )
          {
            atts[ attr.name.replace(&#x27;data-&#x27;, &#x27;&#x27;) ] = attr.value;
          }
        });
        
        return atts;
      
  };
        
           
  /**
   * Simply compares two string version values.
   * 
   * Example:
   * versionCompare(&#x27;1.1&#x27;, &#x27;1.2&#x27;) =&gt; -1
   * versionCompare(&#x27;1.1&#x27;, &#x27;1.1&#x27;) =&gt;  0
   * versionCompare(&#x27;1.2&#x27;, &#x27;1.1&#x27;) =&gt;  1
   * versionCompare(&#x27;2.23.3&#x27;, &#x27;2.22.3&#x27;) =&gt; 1
   * 
   * Returns:
   * -1 = left is LOWER than right
   *  0 = they are equal
   *  1 = left is GREATER = right is LOWER
   *  And FALSE if one of input versions are not valid
   *
   * @function
   * @param {String} left  Version #1
   * @param {String} right Version #2
   * @return {Integer|Boolean}
   * @author Alexey Bass (albass)
   * @since 2011-07-14
   */
   
  acf.helpers.version_compare = function(left, right)
  {
      if (typeof left + typeof right != &#x27;stringstring&#x27;)
          return false;
      
      var a = left.split(&#x27;.&#x27;)
      ,   b = right.split(&#x27;.&#x27;)
      ,   i = 0, len = Math.max(a.length, b.length);
          
      for (; i &lt; len; i++) {
          if ((a[i] &amp;&amp; !b[i] &amp;&amp; parseInt(a[i]) &gt; 0) || (parseInt(a[i]) &gt; parseInt(b[i]))) {
              return 1;
          } else if ((b[i] &amp;&amp; !a[i] &amp;&amp; parseInt(b[i]) &gt; 0) || (parseInt(a[i]) &lt; parseInt(b[i]))) {
              return -1;
          }
      }
      
      return 0;
  };
  
  
  /*
  *  Helper: uniqid
  *
  *  @description: 
  *  @since: 3.5.8
  *  @created: 17/01/13
  */
  
  acf.helpers.uniqid = function()
    {
      var newDate = new Date;
      return newDate.getTime();
    };
    
    
    /*
  *  Helper: url_to_object
  *
  *  @description: 
  *  @since: 4.0.0
  *  @created: 17/01/13
  */
  
    acf.helpers.url_to_object = function( url ){
      
      // vars
      var obj = {},
        pairs = url.split(&#x27;&amp;&#x27;);
      
      
    for( i in pairs )
    {
        var split = pairs[i].split(&#x27;=&#x27;);
        obj[decodeURIComponent(split[0])] = decodeURIComponent(split[1]);
    }
    
    return obj;
      
    };
    
  
  /*
  *  Sortable Helper
  *
  *  @description: keeps widths of td&#x27;s inside a tr
  *  @since 3.5.1
  *  @created: 10/11/12
  */
  
  acf.helpers.sortable = function(e, ui)
  {
    ui.children().each(function(){
      $(this).width($(this).width());
    });
    return ui;
  };
  
  
  /*
  *  is_clone_field
  *
  *  @description: 
  *  @since: 3.5.8
  *  @created: 17/01/13
  */
  
  acf.helpers.is_clone_field = function( input )
  {
    if( input.attr(&#x27;name&#x27;) &amp;&amp; input.attr(&#x27;name&#x27;).indexOf(&#x27;[acfcloneindex]&#x27;) != -1 )
    {
      return true;
    }
    
    return false;
  };
  
  
  /*
  *  acf.helpers.add_message
  *
  *  @description: 
  *  @since: 3.2.7
  *  @created: 10/07/2012
  */
  
  acf.helpers.add_message = function( message, div ){
    
    var message = $(&#x27;&lt;div class=&quot;acf-message-wrapper&quot;&gt;&lt;div class=&quot;message updated&quot;&gt;&lt;p&gt;&#x27; + message + &#x27;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&#x27;);
    
    div.prepend( message );
    
    setTimeout(function(){
      
      message.animate({
        opacity : 0
      }, 250, function(){
        message.remove();
      });
      
    }, 1500);
      
  };
  
  
  /*
  *  Exists
  *
  *  @description: returns true / false    
  *  @created: 1/03/2011
  */
  
  $.fn.exists = function()
  {
    return $(this).length&gt;0;
  };
  
  
  /*
  *  3.5 Media
  *
  *  @description: 
  *  @since: 3.5.7
  *  @created: 16/01/13
  */
  
  acf.media = {
  
    div : null,
    frame : null,
    render_timout : null,
    
    clear_frame : function(){
      
      // validate
      if( !this.frame )
      {
        return;
      }
      
      
      // detach
      this.frame.detach();
      this.frame.dispose();
      
      
      // reset var
      this.frame = null;
      
    },
    type : function(){
      
      // default
      var type = &#x27;thickbox&#x27;;
      
      
      // if wp exists
      if( typeof(wp) == &quot;object&quot; )
      {
        type = &#x27;backbone&#x27;;
      }
      
      
      // return
      return type;
      
    },
    init : function(){
      
      // vars
      var _prototype = wp.media.view.AttachmentCompat.prototype;
      
      
      // orig
      _prototype.orig_render = _prototype.render;
      _prototype.orig_dispose = _prototype.dispose;
      
      
      // update class
      _prototype.className = &#x27;compat-item acf_postbox no_box&#x27;;
      
      
      // modify render
      _prototype.render = function() {
        
        // reference
        var _this = this;
        
        
        // validate
        if( _this.ignore_render )
        {
          return this;  
        }
        
        
        // run the old render function
        this.orig_render();
        
        
        // add button
        setTimeout(function(){
          
          // vars
          var $media_model = _this.$el.closest(&#x27;.media-modal&#x27;);
          
          
          // is this an edit only modal?
          if( $media_model.hasClass(&#x27;acf-media-modal&#x27;) )
          {
            return;  
          }
          
          
          // does button already exist?
          if( $media_model.find(&#x27;.media-frame-router .acf-expand-details&#x27;).exists() )
          {
            return;  
          }
          
          
          // create button
          var button = $([
            &#x27;&lt;a href=&quot;#&quot; class=&quot;acf-expand-details&quot;&gt;&#x27;,
              &#x27;&lt;span class=&quot;icon&quot;&gt;&lt;/span&gt;&#x27;,
              &#x27;&lt;span class=&quot;is-closed&quot;&gt;&#x27; + acf.l10n.core.expand_details +  &#x27;&lt;/span&gt;&#x27;,
              &#x27;&lt;span class=&quot;is-open&quot;&gt;&#x27; + acf.l10n.core.collapse_details +  &#x27;&lt;/span&gt;&#x27;,
            &#x27;&lt;/a&gt;&#x27;
          ].join(&#x27;&#x27;)); 
          
          
          // add events
          button.on(&#x27;click&#x27;, function( e ){
            
            e.preventDefault();
            
            if( $media_model.hasClass(&#x27;acf-expanded&#x27;) )
            {
              $media_model.removeClass(&#x27;acf-expanded&#x27;);
            }
            else
            {
              $media_model.addClass(&#x27;acf-expanded&#x27;);
            }
            
          });
          
          
          // append
          $media_model.find(&#x27;.media-frame-router&#x27;).append( button );
            
        
        }, 0);
        
        
        // setup fields
        // The clearTimout is needed to prevent many setup functions from running at the same time
        clearTimeout( acf.media.render_timout );
        acf.media.render_timout = setTimeout(function(){

          $(document).trigger( &#x27;acf/setup_fields&#x27;, _this.$el );
          
        }, 50);

        
        // return based on the origional render function
        return this;
      };
      
      
      // modify dispose
      _prototype.dispose = function() {
        
        // remove
        $(document).trigger(&#x27;acf/remove_fields&#x27;, [ this.$el ]);
        
        
        // run the old render function
        this.orig_dispose();
        
      };
      
      
      // override save
      _prototype.save = function( event ) {
      
        var data = {},
          names = {};
        
        if ( event )
          event.preventDefault();
          
          
        _.each( this.$el.serializeArray(), function( pair ) {
        
          // initiate name
          if( pair.name.slice(-2) === &#x27;[]&#x27; )
          {
            // remove []
            pair.name = pair.name.replace(&#x27;[]&#x27;, &#x27;&#x27;);
            
            
            // initiate counter
            if( typeof names[ pair.name ] === &#x27;undefined&#x27;){
              
              names[ pair.name ] = -1;
              //console.log( names[ pair.name ] );
              
            }
            
            
            names[ pair.name ]++
            
            pair.name += &#x27;[&#x27; + names[ pair.name ] +&#x27;]&#x27;;
            
            
          }
 
          data[ pair.name ] = pair.value;
        });
 
        this.ignore_render = true;
        this.model.saveCompat( data );
        
      };
    }
  };
  
  
  /*
  *  Conditional Logic Calculate
  *
  *  @description: 
  *  @since 3.5.1
  *  @created: 15/10/12
  */
  
  acf.conditional_logic = {
    
    items : [],
    
    init : function(){
      
      // reference
      var _this = this;
      
      
      // events
      $(document).on(&#x27;change&#x27;, &#x27;.field input, .field textarea, .field select&#x27;, function(){
        
        _this.change();
        
      });
      
      
      _this.change();
      
    },
    change : function(){
      
      // reference
      var _this = this;
      
      
      // vars
      //var $el    =  $( e.target ),
      //  $field  =  $el.closest(&#x27;.field&#x27;);
      
      
      // loop through items
      $.each(this.items, function( k, item ){
        
        // vars
        var show  =  true,
          $field  =  $(&#x27;.field_key-&#x27; + item.field);
        
        
        // if &#x27;any&#x27; was selected, start of as false and any match will result in show = true
        if( item.allorany == &#x27;any&#x27; )
        {
          show = false;
        }
        
        
        // loop through rules
        $.each(item.rules, function( k2, rule ){
          
          var calculate = _this.calculate( rule );
          
          if( item.allorany == &#x27;all&#x27; )
          {
            if( calculate == false )
            {
              show = false;
              
              // end loop
              return false;
            }
          }
          else
          {
            if( calculate == true )
            {
              show = true;
              
              // end loop
              return false;
            }
          }
          
        });
        
        
        // hide / show field
        if( show )
        {
          // remove &quot;disabled&quot;
          $field.find(&#x27;input, textarea, select&#x27;).removeAttr(&#x27;disabled&#x27;);
          
          
          $field.removeClass(&#x27;acf-conditional_logic-hide&#x27;).addClass(&#x27;acf-conditional_logic-show&#x27;);
        }
        else
        {
          // add &quot;disabled&quot;
          $field.find(&#x27;input, textarea, select&#x27;).attr(&#x27;disabled&#x27;, &#x27;disabled&#x27;);
          
          
          $field.removeClass(&#x27;acf-conditional_logic-show&#x27;).addClass(&#x27;acf-conditional_logic-hide&#x27;);
        }
        
        
      });
      
    },
    calculate : function( rule ){
      
      // vars
      var $field  =  $(&#x27;.field_key-&#x27; + rule.field),
        r    =  false;
      
      
      // compare values
      if( $field.hasClass(&#x27;field_type-true_false&#x27;) || $field.hasClass(&#x27;field_type-checkbox&#x27;) || $field.hasClass(&#x27;field_type-radio&#x27;) )
      {
        var exists = $field.find(&#x27;input[value=&quot;&#x27; + rule.value + &#x27;&quot;]:checked&#x27;).exists();
        
        
        if( rule.operator == &quot;==&quot; )
        {
          if( exists )
          {
            r = true;
          }
        }
        else
        {
          if( ! exists )
          {
            r = true;
          }
        }
        
      }
      else
      {
        // get val and make sure it is an array
        var val = $field.find(&#x27;input, textarea, select&#x27;).last().val();
        
        if( ! $.isArray(val) )
        {
          val = [ val ];
        }
        
        
        if( rule.operator == &quot;==&quot; )
        {
          if( $.inArray(rule.value, val) &gt; -1 )
          {
            r = true;
          }
        }
        else
        {
          if( $.inArray(rule.value, val) &lt; 0 )
          {
            r = true;
          }
        }
        
      }
      
      
      // return
      return r;
      
    }
    
  };
  
  
  
  
    
  /*
  *  Document Ready
  *
  *  @description: 
  *  @since: 3.5.8
  *  @created: 17/01/13
  */
  
  $(document).ready(function(){
    
    
    // conditional logic
    acf.conditional_logic.init();
    
    
    // fix for older options page add-on
    $(&#x27;.acf_postbox &gt; .inside &gt; .options&#x27;).each(function(){
      
      $(this).closest(&#x27;.acf_postbox&#x27;).addClass( $(this).attr(&#x27;data-layout&#x27;) );
      
    });
    
  
  });
  
  
  /*
  *  window load
  *
  *  @description: 
  *  @since: 3.5.5
  *  @created: 22/12/12
  */
  
  $(window).load(function(){
    
    // init
    acf.media.init();
    
    
    setTimeout(function(){
      
      // Hack for CPT without a content editor
      try
      {
        wp.media.view.settings.post.id = acf.post_id;  
      } 
      catch(e)
      {
        // one of the objects was &#x27;undefined&#x27;...
      }
      
      
      // setup fields
      $(document).trigger(&#x27;acf/setup_fields&#x27;, [ $(&#x27;#poststuff&#x27;) ]);
      
    }, 10);
    
  });
  
  
  /*
  *  Gallery field Add-on Fix
  *
  *  Gallery field v1.0.0 required some data in the acf object.
  *  Now not required, but older versions of gallery field need this.
  *
  *  @type  object
  *  @date  1/08/13
  *
  *  @param  N/A
  *  @return  N/A
  */
  
  acf.fields.gallery = {
    add : function(){},
    edit : function(){},
    update_count : function(){},
    hide_selected_items : function(){},
    text : {
      title_add : &quot;Select Images&quot;
    }
  };
  
  
})(jQuery);

/* **********************************************
     Begin ajax.js
********************************************** */

(function($){
  
  
  /*
  *  acf.screen
  *
  *  Data used by AJAX to hide / show field groups
  *
  *  @type  object
  *  @date  1/03/2011
  *
  *  @param  N/A
  *  @return  N/A
  */
  
  acf.screen = {
    action       :  &#x27;acf/location/match_field_groups_ajax&#x27;,
    post_id      :  0,
    page_template  :  0,
    page_parent    :  0,
    page_type    :  0,
    post_category  :  0,
    post_format    :  0,
    taxonomy    :  0,
    lang      :  0,
    nonce      :  0
  };
  
  
  /*
  *  Document Ready
  *
  *  Updates acf.screen with more data
  *
  *  @type  function
  *  @date  1/03/2011
  *
  *  @param  N/A
  *  @return  N/A
  */
  
  $(document).ready(function(){
    
    
    // update post_id
    acf.screen.post_id = acf.o.post_id;
    acf.screen.nonce = acf.o.nonce;
    
    
    // MPML
    if( $(&#x27;#icl-als-first&#x27;).length &gt; 0 )
    {
      var href = $(&#x27;#icl-als-first&#x27;).children(&#x27;a&#x27;).attr(&#x27;href&#x27;),
        regex = new RegExp( &quot;lang=([^&amp;#]*)&quot; ),
        results = regex.exec( href );
      
      // lang
      acf.screen.lang = results[1];
      
    }
    
  });
  
  
  /*
  *  acf/update_field_groups
  *
  *  finds the new id&#x27;s for metaboxes and show&#x27;s hides metaboxes
  *
  *  @type  event
  *  @date  1/03/2011
  *
  *  @param  N/A
  *  @return  N/A
  */
  
  $(document).on(&#x27;acf/update_field_groups&#x27;, function(){
    
    
    // Only for a post.
    // This is an attempt to stop the action running on the options page add-on.
    if( ! acf.o.post_id )
    {
      return false;  
    }
    
    
    $.ajax({
      url: ajaxurl,
      data: acf.screen,
      type: &#x27;post&#x27;,
      dataType: &#x27;json&#x27;,
      success: function(result){
        
        // validate
        if( !result )
        {
          return false;
        }
        
        
        // hide all metaboxes
        $(&#x27;.acf_postbox&#x27;).addClass(&#x27;acf-hidden&#x27;);
        $(&#x27;.acf_postbox-toggle&#x27;).addClass(&#x27;acf-hidden&#x27;);
    
        
        // dont bother loading style or html for inputs
        if( result.length == 0 )
        {
          return false;
        }
        
        
        // show the new postboxes
        $.each(result, function(k, v) {
          
          
          // vars
          var $el = $(&#x27;#acf_&#x27; + v),
            $toggle = $(&#x27;#adv-settings .acf_postbox-toggle[for=&quot;acf_&#x27; + v + &#x27;-hide&quot;]&#x27;);
          
          
          // classes
          $el.removeClass(&#x27;acf-hidden hide-if-js&#x27;);
          $toggle.removeClass(&#x27;acf-hidden&#x27;);
          $toggle.find(&#x27;input[type=&quot;checkbox&quot;]&#x27;).attr(&#x27;checked&#x27;, &#x27;checked&#x27;);
          
          
          // load fields if needed
          $el.find(&#x27;.acf-replace-with-fields&#x27;).each(function(){
            
            var $replace = $(this);
            
            $.ajax({
              url      :  ajaxurl,
              data    :  {
                action  :  &#x27;acf/input/render_fields&#x27;,
                acf_id  :  v,
                post_id  :  acf.o.post_id,
                nonce  :  acf.o.nonce
              },
              type    :  &#x27;post&#x27;,
              dataType  :  &#x27;html&#x27;,
              success    :  function( html ){
              
                $replace.replaceWith( html );
                
                $(document).trigger(&#x27;acf/setup_fields&#x27;, $el);
                
              }
            });
            
          });
        });
        
        
        // load style
        $.ajax({
          url      :  ajaxurl,
          data    :  {
            action  :  &#x27;acf/input/get_style&#x27;,
            acf_id  :  result[0],
            nonce  :  acf.o.nonce
          },
          type    : &#x27;post&#x27;,
          dataType  : &#x27;html&#x27;,
          success    : function( result ){
          
            $(&#x27;#acf_style&#x27;).html( result );
            
          }
        });
        
        
        
      }
    });
  });

  
  /*
  *  Events
  *
  *  Updates acf.screen with more data and triggers the update event
  *
  *  @type  function
  *  @date  1/03/2011
  *
  *  @param  N/A
  *  @return  N/A
  */
  
  $(document).on(&#x27;change&#x27;, &#x27;#page_template&#x27;, function(){
    
    acf.screen.page_template = $(this).val();
    
    $(document).trigger(&#x27;acf/update_field_groups&#x27;);
      
  });
  
  
  $(document).on(&#x27;change&#x27;, &#x27;#parent_id&#x27;, function(){
    
    var val = $(this).val();
    
    
    // set page_type / page_parent
    if( val != &quot;&quot; )
    {
      acf.screen.page_type = &#x27;child&#x27;;
      acf.screen.page_parent = val;
    }
    else
    {
      acf.screen.page_type = &#x27;parent&#x27;;
      acf.screen.page_parent = 0;
    }
    
    
    $(document).trigger(&#x27;acf/update_field_groups&#x27;);
      
  });

  
  $(document).on(&#x27;change&#x27;, &#x27;#post-formats-select input[type=&quot;radio&quot;]&#x27;, function(){
    
    var val = $(this).val();
    
    if( val == &#x27;0&#x27; )
    {
      val = &#x27;standard&#x27;;
    }
    
    acf.screen.post_format = val;
    
    $(document).trigger(&#x27;acf/update_field_groups&#x27;);
    
  });  
  
  
  $(document).on(&#x27;change&#x27;, &#x27;.categorychecklist input[type=&quot;checkbox&quot;]&#x27;, function(){
    
    // set timeout to fix issue with chrome which does not register the change has yet happened
    setTimeout(function(){
      
      // vars
      var values = [];
      
      
      $(&#x27;.categorychecklist input[type=&quot;checkbox&quot;]:checked&#x27;).each(function(){
        
        if( $(this).is(&#x27;:hidden&#x27;) || $(this).is(&#x27;:disabled&#x27;) )
        {
          return;
        }
      
        values.push( $(this).val() );
      });
  
      
      acf.screen.post_category = values;
      acf.screen.taxonomy = values;
  
  
      $(document).trigger(&#x27;acf/update_field_groups&#x27;);
    
    }, 1);
    
    
  });
  
  
  
})(jQuery);

/* **********************************************
     Begin color-picker.js
********************************************** */

(function($){
  
  /*
  *  Color Picker
  *
  *  jQuery functionality for this field type
  *
  *  @type  object
  *  @date  20/07/13
  *
  *  @param  N/A
  *  @return  N/A
  */
  
  var _cp = acf.fields.color_picker = {
    
    $el : null,
    $input : null,
    
    set : function( o ){
      
      // merge in new option
      $.extend( this, o );
      
      
      // find input
      this.$input = this.$el.find(&#x27;input[type=&quot;text&quot;]&#x27;);
      
      
      // return this for chaining
      return this;
      
    },
    init : function(){
      
      // is clone field?
      if( acf.helpers.is_clone_field(this.$input) )
      {
        return;
      }
      
      
      this.$input.wpColorPicker();
      
      
      
    }
  };
  
  
  /*
  *  acf/setup_fields
  *
  *  run init function on all elements for this field
  *
  *  @type  event
  *  @date  20/07/13
  *
  *  @param  {object}  e    event object
  *  @param  {object}  el    DOM object which may contain new ACF elements
  *  @return  N/A
  */
  
  $(document).on(&#x27;acf/setup_fields&#x27;, function(e, el){
    
    $(el).find(&#x27;.acf-color_picker&#x27;).each(function(){
      
      _cp.set({ $el : $(this) }).init();
      
    });
    
  });
    

})(jQuery);

/* **********************************************
     Begin date-picker.js
********************************************** */

(function($){
  
  /*
  *  Date Picker
  *
  *  static model for this field
  *
  *  @type  event
  *  @date  1/06/13
  *
  */
  
  acf.fields.date_picker = {
    
    $el : null,
    $input : null,
    $hidden : null,
    
    o : {},
    
    set : function( o ){
      
      // merge in new option
      $.extend( this, o );
      
      
      // find input
      this.$input = this.$el.find(&#x27;input[type=&quot;text&quot;]&#x27;);
      this.$hidden = this.$el.find(&#x27;input[type=&quot;hidden&quot;]&#x27;);
      
      
      // get options
      this.o = acf.helpers.get_atts( this.$el );
      
      
      // return this for chaining
      return this;
      
    },
    init : function(){

      // is clone field?
      if( acf.helpers.is_clone_field(this.$hidden) )
      {
        return;
      }
      
      
      // get and set value from alt field
      this.$input.val( this.$hidden.val() );
      
      
      // create options
      var options = $.extend( {}, acf.l10n.date_picker, { 
        dateFormat    :  this.o.save_format,
        altField    :  this.$hidden,
        altFormat    :  this.o.save_format,
        changeYear    :  true,
        yearRange    :  &quot;-100:+100&quot;,
        changeMonth    :  true,
        showButtonPanel  :  true,
        firstDay    :  this.o.first_day
      });
      
      
      // add date picker
      this.$input.addClass(&#x27;active&#x27;).datepicker( options );
      
      
      // now change the format back to how it should be.
      this.$input.datepicker( &quot;option&quot;, &quot;dateFormat&quot;, this.o.display_format );
      
      
      // wrap the datepicker (only if it hasn&#x27;t already been wrapped)
      if( $(&#x27;body &gt; #ui-datepicker-div&#x27;).length &gt; 0 )
      {
        $(&#x27;#ui-datepicker-div&#x27;).wrap(&#x27;&lt;div class=&quot;ui-acf&quot; /&gt;&#x27;);
      }
      
    },
    blur : function(){
      
      if( !this.$input.val() )
      {
        this.$hidden.val(&#x27;&#x27;);
      }
      
    }
    
  };
  
  
  /*
  *  acf/setup_fields
  *
  *  run init function on all elements for this field
  *
  *  @type  event
  *  @date  20/07/13
  *
  *  @param  {object}  e    event object
  *  @param  {object}  el    DOM object which may contain new ACF elements
  *  @return  N/A
  */
  
  $(document).on(&#x27;acf/setup_fields&#x27;, function(e, el){
    
    $(el).find(&#x27;.acf-date_picker&#x27;).each(function(){
      
      acf.fields.date_picker.set({ $el : $(this) }).init();
      
    });
    
  });
  
  
  /*
  *  Events
  *
  *  jQuery events for this field
  *
  *  @type  event
  *  @date  1/06/13
  *
  */
  
  $(document).on(&#x27;blur&#x27;, &#x27;.acf-date_picker input[type=&quot;text&quot;]&#x27;, function( e ){
    
    acf.fields.date_picker.set({ $el : $(this).parent() }).blur();
          
  });
  

})(jQuery);

/* **********************************************
     Begin file.js
********************************************** */

(function($){
  
  /*
  *  File
  *
  *  static model for this field
  *
  *  @type  event
  *  @date  1/06/13
  *
  */
  
  
  // reference
  var _media = acf.media;
  
  
  acf.fields.file = {
    
    $el : null,
    $input : null,
    
    o : {},
    
    set : function( o ){
      
      // merge in new option
      $.extend( this, o );
      
      
      // find input
      this.$input = this.$el.find(&#x27;input[type=&quot;hidden&quot;]&#x27;);
      
      
      // get options
      this.o = acf.helpers.get_atts( this.$el );
      
      
      // multiple?
      this.o.multiple = this.$el.closest(&#x27;.repeater&#x27;).exists() ? true : false;
      
      
      // wp library query
      this.o.query = {};
      
      
      // library
      if( this.o.library == &#x27;uploadedTo&#x27; )
      {
        this.o.query.uploadedTo = acf.o.post_id;
      }
      
      
      // return this for chaining
      return this;
      
    },
    init : function(){

      // is clone field?
      if( acf.helpers.is_clone_field(this.$input) )
      {
        return;
      }
          
    },
    add : function( file ){
      
      // this function must reference a global div variable due to the pre WP 3.5 uploader
      // vars
      var div = _media.div;
      
      
      // set atts
      div.find(&#x27;.acf-file-icon&#x27;).attr( &#x27;src&#x27;, file.icon );
       div.find(&#x27;.acf-file-title&#x27;).text( file.title );
       div.find(&#x27;.acf-file-name&#x27;).text( file.name ).attr( &#x27;href&#x27;, file.url );
       div.find(&#x27;.acf-file-size&#x27;).text( file.size );
      div.find(&#x27;.acf-file-value&#x27;).val( file.id ).trigger(&#x27;change&#x27;);
       
       
       // set div class
       div.addClass(&#x27;active&#x27;);
       
       
       // validation
      div.closest(&#x27;.field&#x27;).removeClass(&#x27;error&#x27;);
  
    },
    edit : function(){
      
      // vars
      var id = this.$input.val();
      
      
      // set global var
      _media.div = this.$el;
      

      // clear the frame
      _media.clear_frame();
      
      
      // create the media frame
      _media.frame = wp.media({
        title    :  acf.l10n.file.edit,
        multiple  :  false,
        button    :  { text : acf.l10n.file.update }
      });
      
      
      // log events
      /*
      acf.media.frame.on(&#x27;all&#x27;, function(e){
        
        console.log( e );
        
      });
      */
      
      
      // open
      _media.frame.on(&#x27;open&#x27;,function() {
        
        // set to browse
        if( _media.frame.content._mode != &#x27;browse&#x27; )
        {
          _media.frame.content.mode(&#x27;browse&#x27;);
        }
        
        
        // add class
        _media.frame.$el.closest(&#x27;.media-modal&#x27;).addClass(&#x27;acf-media-modal acf-expanded&#x27;);
          
        
        // set selection
        var selection  =  _media.frame.state().get(&#x27;selection&#x27;),
          attachment  =  wp.media.attachment( id );
        
        
        // to fetch or not to fetch
        if( $.isEmptyObject(attachment.changed) )
        {
          attachment.fetch();
        }
        

        selection.add( attachment );
            
      });
      
      
      // close
      _media.frame.on(&#x27;close&#x27;,function(){
      
        // remove class
        _media.frame.$el.closest(&#x27;.media-modal&#x27;).removeClass(&#x27;acf-media-modal&#x27;);
        
      });
      
              
      // Finally, open the modal
      acf.media.frame.open();
      
    },
    remove : function()
    {
      
      // set atts
      this.$el.find(&#x27;.acf-file-icon&#x27;).attr( &#x27;src&#x27;, &#x27;&#x27; );
      this.$el.find(&#x27;.acf-file-title&#x27;).text( &#x27;&#x27; );
       this.$el.find(&#x27;.acf-file-name&#x27;).text( &#x27;&#x27; ).attr( &#x27;href&#x27;, &#x27;&#x27; );
       this.$el.find(&#x27;.acf-file-size&#x27;).text( &#x27;&#x27; );
      this.$el.find(&#x27;.acf-file-value&#x27;).val( &#x27;&#x27; ).trigger(&#x27;change&#x27;);
      
      
      // remove class
      this.$el.removeClass(&#x27;active&#x27;);
      
    },
    popup : function()
    {
      // reference
      var t = this;
      
      
      // set global var
      _media.div = this.$el;
      

      // clear the frame
      _media.clear_frame();
      
      
       // Create the media frame
       _media.frame = wp.media({
        states : [
          new wp.media.controller.Library({
            library    :  wp.media.query( t.o.query ),
            multiple  :  t.o.multiple,
            title    :  acf.l10n.file.select,
            priority  :  20,
            filterable  :  &#x27;all&#x27;
          })
        ]
      });
      
      
      // customize model / view
      acf.media.frame.on(&#x27;content:activate&#x27;, function(){
        
        // vars
        var toolbar = null,
          filters = null;
          
        
        // populate above vars making sure to allow for failure
        try
        {
          toolbar = acf.media.frame.content.get().toolbar;
          filters = toolbar.get(&#x27;filters&#x27;);
        } 
        catch(e)
        {
          // one of the objects was &#x27;undefined&#x27;... perhaps the frame open is Upload Files
          //console.log( e );
        }
        
        
        // validate
        if( !filters )
        {
          return false;
        }
        
        
        // no need for &#x27;uploaded&#x27; filter
        if( t.o.library == &#x27;uploadedTo&#x27; )
        {
          filters.$el.find(&#x27;option[value=&quot;uploaded&quot;]&#x27;).remove();
          filters.$el.after(&#x27;&lt;span&gt;&#x27; + acf.l10n.file.uploadedTo + &#x27;&lt;/span&gt;&#x27;)
          
          $.each( filters.filters, function( k, v ){
            
            v.props.uploadedTo = acf.o.post_id;
            
          });
        }
                
      });
      
      
      // When an image is selected, run a callback.
      acf.media.frame.on( &#x27;select&#x27;, function() {
        
        // get selected images
        selection = _media.frame.state().get(&#x27;selection&#x27;);
        
        if( selection )
        {
          var i = 0;
          
          selection.each(function(attachment){
  
              // counter
              i++;
              
              
              // select / add another file field?
              if( i &gt; 1 )
            {
              // vars
              var $td      =  _media.div.closest(&#x27;td&#x27;),
                $tr     =  $td.closest(&#x27;.row&#x27;),
                $repeater   =  $tr.closest(&#x27;.repeater&#x27;),
                key     =  $td.attr(&#x27;data-field_key&#x27;),
                selector  =  &#x27;td .acf-file-uploader:first&#x27;;
                
              
              // key only exists for repeater v1.0.1 +
              if( key )
              {
                selector = &#x27;td[data-field_key=&quot;&#x27; + key + &#x27;&quot;] .acf-file-uploader&#x27;;
              }
              
              
              // add row?
              if( ! $tr.next(&#x27;.row&#x27;).exists() )
              {
                $repeater.find(&#x27;.add-row-end&#x27;).trigger(&#x27;click&#x27;);
                
              }
              
              
              // update current div
              _media.div = $tr.next(&#x27;.row&#x27;).find( selector );
              
            }
                        
            
              // vars
              var file = {
                id    :  attachment.id,
                title  :  attachment.attributes.title,
                name  :  attachment.attributes.filename,
                url    :  attachment.attributes.url,
                icon  :  attachment.attributes.icon,
                size  :  attachment.attributes.filesize
              };
              
              
              // add file to field
                acf.fields.file.add( file );
                
            
            });
            // selection.each(function(attachment){
        }
        // if( selection )
        
      });
      // acf.media.frame.on( &#x27;select&#x27;, function() {
           
        
      // Finally, open the modal
      acf.media.frame.open();
        
      
      return false;
    }
    
  };
  
  
  /*
  *  Events
  *
  *  jQuery events for this field
  *
  *  @type  function
  *  @date  1/03/2011
  *
  *  @param  N/A
  *  @return  N/A
  */
  
  $(document).on(&#x27;click&#x27;, &#x27;.acf-file-uploader .acf-button-edit&#x27;, function( e ){
    
    e.preventDefault();
    
    acf.fields.file.set({ $el : $(this).closest(&#x27;.acf-file-uploader&#x27;) }).edit();
      
  });
  
  $(document).on(&#x27;click&#x27;, &#x27;.acf-file-uploader .acf-button-delete&#x27;, function( e ){
    
    e.preventDefault();
    
    acf.fields.file.set({ $el : $(this).closest(&#x27;.acf-file-uploader&#x27;) }).remove();
      
  });
  
  
  $(document).on(&#x27;click&#x27;, &#x27;.acf-file-uploader .add-file&#x27;, function( e ){
    
    e.preventDefault();
    
    acf.fields.file.set({ $el : $(this).closest(&#x27;.acf-file-uploader&#x27;) }).popup();
    
  });
  

})(jQuery);

/* **********************************************
     Begin image.js
********************************************** */

(function($){
  
  /*
  *  Image
  *
  *  static model for this field
  *
  *  @type  event
  *  @date  1/06/13
  *
  */
  
  
  // reference
  var _media = acf.media;
  
  
  acf.fields.image = {
    
    $el : null,
    $input : null,
    
    o : {},
    
    set : function( o ){
      
      // merge in new option
      $.extend( this, o );
      
      
      // find input
      this.$input = this.$el.find(&#x27;input[type=&quot;hidden&quot;]&#x27;);
      
      
      // get options
      this.o = acf.helpers.get_atts( this.$el );
      
      
      // multiple?
      this.o.multiple = this.$el.closest(&#x27;.repeater&#x27;).exists() ? true : false;
      
      
      // wp library query
      this.o.query = {
        type : &#x27;image&#x27;
      };
      
      
      // library
      if( this.o.library == &#x27;uploadedTo&#x27; )
      {
        this.o.query.uploadedTo = acf.o.post_id;
      }
      
      
      // return this for chaining
      return this;
      
    },
    init : function(){

      // is clone field?
      if( acf.helpers.is_clone_field(this.$input) )
      {
        return;
      }
          
    },
    add : function( image ){
      
      // this function must reference a global div variable due to the pre WP 3.5 uploader
      // vars
      var div = _media.div;
      
      
      // set atts
      div.find(&#x27;.acf-image-image&#x27;).attr( &#x27;src&#x27;, image.url );
      div.find(&#x27;.acf-image-value&#x27;).val( image.id ).trigger(&#x27;change&#x27;);
       
      
       // set div class
       div.addClass(&#x27;active&#x27;);
       
       
       // validation
      div.closest(&#x27;.field&#x27;).removeClass(&#x27;error&#x27;);
  
    },
    edit : function(){
      
      // vars
      var id = this.$input.val();
      
      
      // set global var
      _media.div = this.$el;
      

      // clear the frame
      _media.clear_frame();
      
      
      // create the media frame
      _media.frame = wp.media({
        title    :  acf.l10n.image.edit,
        multiple  :  false,
        button    :  { text : acf.l10n.image.update }
      });
      
      
      // log events
      /*
      acf.media.frame.on(&#x27;all&#x27;, function(e){
        
        console.log( e );
        
      });
      */
      
      
      // open
      _media.frame.on(&#x27;open&#x27;,function() {
        
        // set to browse
        if( _media.frame.content._mode != &#x27;browse&#x27; )
        {
          _media.frame.content.mode(&#x27;browse&#x27;);
        }
        
        
        // add class
        _media.frame.$el.closest(&#x27;.media-modal&#x27;).addClass(&#x27;acf-media-modal acf-expanded&#x27;);
          
        
        // set selection
        var selection  =  _media.frame.state().get(&#x27;selection&#x27;),
          attachment  =  wp.media.attachment( id );
        
        
        // to fetch or not to fetch
        if( $.isEmptyObject(attachment.changed) )
        {
          attachment.fetch();
        }
        

        selection.add( attachment );
            
      });
      
      
      // close
      _media.frame.on(&#x27;close&#x27;,function(){
      
        // remove class
        _media.frame.$el.closest(&#x27;.media-modal&#x27;).removeClass(&#x27;acf-media-modal&#x27;);
        
      });
      
              
      // Finally, open the modal
      acf.media.frame.open();
      
    },
    remove : function()
    {
      
      // set atts
       this.$el.find(&#x27;.acf-image-image&#x27;).attr( &#x27;src&#x27;, &#x27;&#x27; );
      this.$el.find(&#x27;.acf-image-value&#x27;).val( &#x27;&#x27; ).trigger(&#x27;change&#x27;);
      
      
      // remove class
      this.$el.removeClass(&#x27;active&#x27;);
      
    },
    popup : function()
    {
      // reference
      var t = this;
      
      
      // set global var
      _media.div = this.$el;
      

      // clear the frame
      _media.clear_frame();
      
      
       // Create the media frame
       _media.frame = wp.media({
        states : [
          new wp.media.controller.Library({
            library    :  wp.media.query( t.o.query ),
            multiple  :  t.o.multiple,
            title    :  acf.l10n.image.select,
            priority  :  20,
            filterable  :  &#x27;all&#x27;
          })
        ]
      });
      
      
      /*acf.media.frame.on(&#x27;all&#x27;, function(e){
        
        console.log( e );
        
      });*/
      
      
      // customize model / view
      acf.media.frame.on(&#x27;content:activate&#x27;, function(){

        // vars
        var toolbar = null,
          filters = null;
          
        
        // populate above vars making sure to allow for failure
        try
        {
          toolbar = acf.media.frame.content.get().toolbar;
          filters = toolbar.get(&#x27;filters&#x27;);
        } 
        catch(e)
        {
          // one of the objects was &#x27;undefined&#x27;... perhaps the frame open is Upload Files
          //console.log( e );
        }
        
        
        // validate
        if( !filters )
        {
          return false;
        }
        
        
        // filter only images
        $.each( filters.filters, function( k, v ){
        
          v.props.type = &#x27;image&#x27;;
          
        });
        
        
        // no need for &#x27;uploaded&#x27; filter
        if( t.o.library == &#x27;uploadedTo&#x27; )
        {
          filters.$el.find(&#x27;option[value=&quot;uploaded&quot;]&#x27;).remove();
          filters.$el.after(&#x27;&lt;span&gt;&#x27; + acf.l10n.image.uploadedTo + &#x27;&lt;/span&gt;&#x27;)
          
          $.each( filters.filters, function( k, v ){
            
            v.props.uploadedTo = acf.o.post_id;
            
          });
        }
        
        
        // remove non image options from filter list
        filters.$el.find(&#x27;option&#x27;).each(function(){
          
          // vars
          var v = $(this).attr(&#x27;value&#x27;);
          
          
          // don&#x27;t remove the &#x27;uploadedTo&#x27; if the library option is &#x27;all&#x27;
          if( v == &#x27;uploaded&#x27; &amp;&amp; t.o.library == &#x27;all&#x27; )
          {
            return;
          }
          
          if( v.indexOf(&#x27;image&#x27;) === -1 )
          {
            $(this).remove();
          }
          
        });
        
        
        // set default filter
        filters.$el.val(&#x27;image&#x27;).trigger(&#x27;change&#x27;);
        
      });
      
      
      // When an image is selected, run a callback.
      acf.media.frame.on( &#x27;select&#x27;, function() {
        
        // get selected images
        selection = _media.frame.state().get(&#x27;selection&#x27;);
        
        if( selection )
        {
          var i = 0;
          
          selection.each(function(attachment){
  
              // counter
              i++;
              
              
              // select / add another image field?
              if( i &gt; 1 )
            {
              // vars
              var $td      =  _media.div.closest(&#x27;td&#x27;),
                $tr     =  $td.closest(&#x27;.row&#x27;),
                $repeater   =  $tr.closest(&#x27;.repeater&#x27;),
                key     =  $td.attr(&#x27;data-field_key&#x27;),
                selector  =  &#x27;td .acf-image-uploader:first&#x27;;
                
              
              // key only exists for repeater v1.0.1 +
              if( key )
              {
                selector = &#x27;td[data-field_key=&quot;&#x27; + key + &#x27;&quot;] .acf-image-uploader&#x27;;
              }
              
              
              // add row?
              if( ! $tr.next(&#x27;.row&#x27;).exists() )
              {
                $repeater.find(&#x27;.add-row-end&#x27;).trigger(&#x27;click&#x27;);
                
              }
              
              
              // update current div
              _media.div = $tr.next(&#x27;.row&#x27;).find( selector );
              
            }
            
            
              // vars
              var image = {
                id    :  attachment.id,
                url    :  attachment.attributes.url
              };
              
              // is preview size available?
              if( attachment.attributes.sizes &amp;&amp; attachment.attributes.sizes[ t.o.preview_size ] )
              {
                image.url = attachment.attributes.sizes[ t.o.preview_size ].url;
              }
              
              // add image to field
                acf.fields.image.add( image );
                
            
            });
            // selection.each(function(attachment){
        }
        // if( selection )
        
      });
      // acf.media.frame.on( &#x27;select&#x27;, function() {
           
        
      // Finally, open the modal
      acf.media.frame.open();
        

      return false;
    },
    
    // temporary gallery fix    
    text : {
      title_add : &quot;Select Image&quot;,
      title_edit : &quot;Edit Image&quot;
    }
    
  };
  
  
  /*
  *  Events
  *
  *  jQuery events for this field
  *
  *  @type  function
  *  @date  1/03/2011
  *
  *  @param  N/A
  *  @return  N/A
  */
  
  $(document).on(&#x27;click&#x27;, &#x27;.acf-image-uploader .acf-button-edit&#x27;, function( e ){
    
    e.preventDefault();
    
    acf.fields.image.set({ $el : $(this).closest(&#x27;.acf-image-uploader&#x27;) }).edit();
      
  });
  
  $(document).on(&#x27;click&#x27;, &#x27;.acf-image-uploader .acf-button-delete&#x27;, function( e ){
    
    e.preventDefault();
    
    acf.fields.image.set({ $el : $(this).closest(&#x27;.acf-image-uploader&#x27;) }).remove();
      
  });
  
  
  $(document).on(&#x27;click&#x27;, &#x27;.acf-image-uploader .add-image&#x27;, function( e ){
    
    e.preventDefault();
    
    acf.fields.image.set({ $el : $(this).closest(&#x27;.acf-image-uploader&#x27;) }).popup();
    
  });
  

})(jQuery);

/* **********************************************
     Begin radio.js
********************************************** */

(function($){
  
  /*
  *  Radio
  *
  *  static model and events for this field
  *
  *  @type  event
  *  @date  1/06/13
  *
  */
  
  acf.fields.radio = {
    
    $el : null,
    $input : null,
    $other : null,
    farbtastic : null,
    
    set : function( o ){
      
      // merge in new option
      $.extend( this, o );
      
      
      // find input
      this.$input = this.$el.find(&#x27;input[type=&quot;radio&quot;]:checked&#x27;);
      this.$other = this.$el.find(&#x27;input[type=&quot;text&quot;]&#x27;);
      
      
      // return this for chaining
      return this;
      
    },
    change : function(){

      if( this.$input.val() == &#x27;other&#x27; )
      {
        this.$other.attr(&#x27;name&#x27;, this.$input.attr(&#x27;name&#x27;));
        this.$other.show();
      }
      else
      {
        this.$other.attr(&#x27;name&#x27;, &#x27;&#x27;);
        this.$other.hide();
      }
    }
  };
  
  
  /*
  *  Events
  *
  *  jQuery events for this field
  *
  *  @type  function
  *  @date  1/03/2011
  *
  *  @param  N/A
  *  @return  N/A
  */
  
  $(document).on(&#x27;change&#x27;, &#x27;.acf-radio-list input[type=&quot;radio&quot;]&#x27;, function( e ){
    
    acf.fields.radio.set({ $el : $(this).closest(&#x27;.acf-radio-list&#x27;) }).change();
    
  });
  

})(jQuery);

/* **********************************************
     Begin relationship.js
********************************************** */

(function($){
  
  /*
  *  Relationship
  *
  *  static model for this field
  *
  *  @type  event
  *  @date  1/06/13
  *
  */
  
  acf.fields.relationship = {
    
    $el : null,
    $input : null,
    $left : null,
    $right : null,
        
    o : {},
    
    timeout : null,
    
    set : function( o ){
      
      // merge in new option
      $.extend( this, o );
      
      
      // find elements
      this.$input = this.$el.children(&#x27;input[type=&quot;hidden&quot;]&#x27;);
      this.$left = this.$el.find(&#x27;.relationship_left&#x27;),
      this.$right = this.$el.find(&#x27;.relationship_right&#x27;);
      
      
      // get options
      this.o = acf.helpers.get_atts( this.$el );
      
      
      // return this for chaining
      return this;
      
    },
    init : function(){
      
      // reference
      var _this = this;
      
      
      // is clone field?
      if( acf.helpers.is_clone_field(this.$input) )
      {
        return;
      }
      
      
      // set height of right column
      this.$right.find(&#x27;.relationship_list&#x27;).height( this.$left.height() -2 );
      
      
      // right sortable
      this.$right.find(&#x27;.relationship_list&#x27;).sortable({
        axis          :  &#x27;y&#x27;,
        items          :  &#x27;&gt; li&#x27;,
        forceHelperSize      :  true,
        forcePlaceholderSize  :  true,
        scroll          :  true,
        update          :  function(){
          
          _this.$input.trigger(&#x27;change&#x27;);
          
        }
      });
      
      
      // load more
      var $el = this.$el;
      
      this.$left.find(&#x27;.relationship_list&#x27;).scrollTop( 0 ).on(&#x27;scroll&#x27;, function(e){
        
        // validate
        if( $el.hasClass(&#x27;loading&#x27;) || $el.hasClass(&#x27;no-results&#x27;) )
        {
          return;
        }
        
        
        // Scrolled to bottom
        if( $(this).scrollTop() + $(this).innerHeight() &gt;= $(this).get(0).scrollHeight )
        {
          var paged = parseInt( $el.attr(&#x27;data-paged&#x27;) );
          
          // update paged
          $el.attr(&#x27;data-paged&#x27;, (paged + 1) );
          
          // fetch
          _this.set({ $el : $el }).fetch();
        }
        
      });
      
      
      // ajax fetch values for left side
      this.fetch();
          
    },
    fetch : function(){
      
      // reference
      var _this = this,
        $el = this.$el;
      
      
      // add loading class, stops scroll loading
      $el.addClass(&#x27;loading&#x27;);
      
      
      // get results
        $.ajax({
        url        :  acf.o.ajaxurl,
        type      :  &#x27;post&#x27;,
        dataType    :  &#x27;json&#x27;,
        data      :  $.extend({ 
          action    :  &#x27;acf/fields/relationship/query_posts&#x27;, 
          post_id    :  acf.o.post_id,
          nonce    :  acf.o.nonce
        }, this.o ),
        success      :  function( json ){
          
          
          // render
          _this.set({ $el : $el }).render( json );
          
        }
      });
      
    },
    render : function( json ){
      
      // reference
      var _this = this;
      
      
      // update classes
      this.$el.removeClass(&#x27;no-results&#x27;).removeClass(&#x27;loading&#x27;);
      
      
      // new search?
      if( this.o.paged == 1 )
      {
        this.$el.find(&#x27;.relationship_left li:not(.load-more)&#x27;).remove();
      }
      
      
      // no results?
      if( ! json || ! json.html )
      {
        this.$el.addClass(&#x27;no-results&#x27;);
        return;
      }
      
      
      // append new results
      this.$el.find(&#x27;.relationship_left .load-more&#x27;).before( json.html );
      
      
      // next page?
      if( ! json.next_page_exists )
      {
        this.$el.addClass(&#x27;no-results&#x27;);
      }
              
      
      // apply .hide to left li&#x27;s
      this.$left.find(&#x27;a&#x27;).each(function(){
        
        var id = $(this).attr(&#x27;data-post_id&#x27;);
        
        if( _this.$right.find(&#x27;a[data-post_id=&quot;&#x27; + id + &#x27;&quot;]&#x27;).exists() )
        {
          $(this).parent().addClass(&#x27;hide&#x27;);
        }
        
      });
      
    },
    add : function( $a ){
      
      // vars
      var id = $a.attr(&#x27;data-post_id&#x27;),
        title = $a.html();
      
      
      // max posts
      if( this.$right.find(&#x27;a&#x27;).length &gt;= this.o.max )
      {
        alert( acf.l10n.relationship.max.replace(&#x27;{max}&#x27;, this.o.max) );
        return false;
      }
      
      
      // can be added?
      if( $a.parent().hasClass(&#x27;hide&#x27;) )
      {
        return false;
      }
      
      
      // hide
      $a.parent().addClass(&#x27;hide&#x27;);
      
      
      // template
      var data = {
          post_id    :  $a.attr(&#x27;data-post_id&#x27;),
          title    :  $a.html(),
          name    :  this.$input.attr(&#x27;name&#x27;)
        },
        tmpl = _.template(acf.l10n.relationship.tmpl_li, data);
      
      
  
      // add new li
      this.$right.find(&#x27;.relationship_list&#x27;).append( tmpl )
      
      
      // trigger change on new_li
      this.$input.trigger(&#x27;change&#x27;);
      
      
      // validation
      this.$el.closest(&#x27;.field&#x27;).removeClass(&#x27;error&#x27;);

      
    },
    remove : function( $a ){
      
      // remove
      $a.parent().remove();
      
      
      // show
      this.$left.find(&#x27;a[data-post_id=&quot;&#x27; + $a.attr(&#x27;data-post_id&#x27;) + &#x27;&quot;]&#x27;).parent(&#x27;li&#x27;).removeClass(&#x27;hide&#x27;);
      
      
      // trigger change on new_li
      this.$input.trigger(&#x27;change&#x27;);
      
    }
    
  };
  
  
  /*
  *  acf/setup_fields
  *
  *  run init function on all elements for this field
  *
  *  @type  event
  *  @date  20/07/13
  *
  *  @param  {object}  e    event object
  *  @param  {object}  el    DOM object which may contain new ACF elements
  *  @return  N/A
  */
  
  $(document).on(&#x27;acf/setup_fields&#x27;, function(e, el){
    
    $(el).find(&#x27;.acf_relationship&#x27;).each(function(){
      
      acf.fields.relationship.set({ $el : $(this) }).init();
      
    });
    
  });
  
  
  /*
  *  Events
  *
  *  jQuery events for this field
  *
  *  @type  function
  *  @date  1/03/2011
  *
  *  @param  N/A
  *  @return  N/A
  */
  
  $(document).on(&#x27;change&#x27;, &#x27;.acf_relationship .select-post_type&#x27;, function(e){
    
    // vars
    var val = $(this).val(),
      $el = $(this).closest(&#x27;.acf_relationship&#x27;);
      
    
    // update attr
      $el.attr(&#x27;data-post_type&#x27;, val);
      $el.attr(&#x27;data-paged&#x27;, 1);
      
      
      // fetch
      acf.fields.relationship.set({ $el : $el }).fetch();
    
  });

  
  $(document).on(&#x27;click&#x27;, &#x27;.acf_relationship .relationship_left .relationship_list a&#x27;, function( e ){
    
    e.preventDefault();
    
    acf.fields.relationship.set({ $el : $(this).closest(&#x27;.acf_relationship&#x27;) }).add( $(this) );
    
    $(this).blur();
    
  });
  
  $(document).on(&#x27;click&#x27;, &#x27;.acf_relationship .relationship_right .relationship_list a&#x27;, function( e ){
    
    e.preventDefault();
    
    acf.fields.relationship.set({ $el : $(this).closest(&#x27;.acf_relationship&#x27;) }).remove( $(this) );
    
    $(this).blur();
    
  });
  
  $(document).on(&#x27;keyup&#x27;, &#x27;.acf_relationship input.relationship_search&#x27;, function( e ){
    
    // vars
    var val = $(this).val(),
      $el = $(this).closest(&#x27;.acf_relationship&#x27;);
      
    
    // update attr
      $el.attr(&#x27;data-s&#x27;, val);
      $el.attr(&#x27;data-paged&#x27;, 1);
      
      
      // fetch
      clearTimeout( acf.fields.relationship.timeout );
      acf.fields.relationship.timeout = setTimeout(function(){
      
         acf.fields.relationship.set({ $el : $el }).fetch();
        
      }, 500);
    
  });
  
  $(document).on(&#x27;keypress&#x27;, &#x27;.acf_relationship input.relationship_search&#x27;, function( e ){
    
    // don&#x27;t submit form
    if( e.which == 13 )
    {
      e.preventDefault();
    }
    
  });
  

})(jQuery);

/* **********************************************
     Begin tab.js
********************************************** */

(function($){

  
  /*
  *  acf/setup_fields
  *
  *  run init function on all elements for this field
  *
  *  @type  event
  *  @date  20/07/13
  *
  *  @param  {object}  e    event object
  *  @param  {object}  el    DOM object which may contain new ACF elements
  *  @return  N/A
  */
  
  $(document).on(&#x27;acf/setup_fields&#x27;, function(e, el){
    
    $(el).find(&#x27;.acf-tab&#x27;).each(function(){
      
      // vars
      var $el    =  $(this),
        $field  =  $el.parent(),
        $wrap  =  $field.parent(),
        
        id    =  $el.attr(&#x27;data-id&#x27;),
        label   =   $el.html();
        


      // only run once for each tab
      if( $el.hasClass(&#x27;acf-tab-added&#x27;) )
      {
        return;
      }
      
      $el.addClass(&#x27;acf-tab-added&#x27;);
      
      
      // create tab group if it doesnt exist
      if( ! $wrap.children(&#x27;.acf-tab-group&#x27;).exists() )
      {
        $wrap.children(&#x27;.field_type-tab:first&#x27;).before(&#x27;&lt;ul class=&quot;hl clearfix acf-tab-group&quot;&gt;&lt;/ul&gt;&#x27;);
      }
      
      
      // add tab
      $wrap.children(&#x27;.acf-tab-group&#x27;).append(&#x27;&lt;li class=&quot;field_key-&#x27; + id + &#x27;&quot; data-field_key=&quot;&#x27; + id + &#x27;&quot;&gt;&lt;a class=&quot;acf-tab-button&quot; href=&quot;#&quot; data-id=&quot;&#x27; + id + &#x27;&quot;&gt;&#x27; + label + &#x27;&lt;/a&gt;&lt;/li&gt;&#x27;);
      
      
    });
    
    
    // trigger
    $(el).find(&#x27;.acf-tab-group&#x27;).each(function(){
      
      $(this).find(&#x27;li:first a&#x27;).trigger(&#x27;click&#x27;);
      
    });

  
  });
  
  
  /*
  *  Events
  *
  *  jQuery events for this field
  *
  *  @type  function
  *  @date  1/03/2011
  *
  *  @param  N/A
  *  @return  N/A
  */
  
  $(document).on(&#x27;click&#x27;, &#x27;.acf-tab-button&#x27;, function( e ){
    
    
    e.preventDefault();
    
    
    // vars
    var $a    =  $(this),
      $ul    =  $a.closest(&#x27;ul&#x27;),
      $wrap  =  $ul.parent(),
      id    =  $a.attr(&#x27;data-id&#x27;);
    
    
    // classes
    $ul.find(&#x27;li&#x27;).removeClass(&#x27;active&#x27;);
    $a.parent(&#x27;li&#x27;).addClass(&#x27;active&#x27;);
    
    
    // hide / show
    $wrap.children(&#x27;.field_type-tab&#x27;).each(function(){
      
      var $tab = $(this);
      
      if( $tab.hasClass(&#x27;field_key-&#x27; + id) )
      {
        $tab.nextUntil(&#x27;.field_type-tab&#x27;).removeClass(&#x27;acf-tab_group-hide&#x27;).addClass(&#x27;acf-tab_group-show&#x27;);
      }
      else
      {
        $tab.nextUntil(&#x27;.field_type-tab&#x27;).removeClass(&#x27;acf-tab_group-show&#x27;).addClass(&#x27;acf-tab_group-hide&#x27;);
      }
      
    });

    
    // blur to remove dotted lines around button
    $a.trigger(&#x27;blur&#x27;);

    
  });
    

})(jQuery);

/* **********************************************
     Begin validation.js
********************************************** */

(function($){
  
  
  /*
  *  Validation
  *
  *  JS model
  *
  *  @type  object 
  *  @date  1/06/13
  *
  */
  
  acf.validation = {
  
    status : true,
    disabled : false,
    
    run : function(){
      
      // reference
      var _this = this;
      
      
      // reset
      _this.status = true;
      
      
      // loop through all fields
      $(&#x27;.postbox:not(.acf-hidden) .field.required, .form-field.required&#x27;).each(function(){
        
        // vars
        var div = $(this);
        
        
        // set validation data
        div.data(&#x27;validation&#x27;, true);
        
  
        // if is hidden by conditional logic, ignore
        if( div.hasClass(&#x27;acf-conditional_logic-hide&#x27;) )
        {
          return;
        }
        
        
        // if is hidden by conditional logic on a parent tab, ignore
        if( div.hasClass(&#x27;acf-tab_group-hide&#x27;) )
        {
          if( div.prevAll(&#x27;.field_type-tab:first&#x27;).hasClass(&#x27;acf-conditional_logic-hide&#x27;) )
          {
            return;
          }
        }
        
        
        // text / textarea
        if( div.find(&#x27;input[type=&quot;text&quot;], input[type=&quot;email&quot;], input[type=&quot;number&quot;], input[type=&quot;hidden&quot;], textarea&#x27;).val() == &quot;&quot; )
        {
          div.data(&#x27;validation&#x27;, false);
        }
        
        
        // wysiwyg
        if( div.find(&#x27;.acf_wysiwyg&#x27;).exists() &amp;&amp; typeof(tinyMCE) == &quot;object&quot;)
        {
          div.data(&#x27;validation&#x27;, true);
          
          var id = div.find(&#x27;.wp-editor-area&#x27;).attr(&#x27;id&#x27;),
            editor = tinyMCE.get( id );
  
  
          if( editor &amp;&amp; !editor.getContent() )
          {
            div.data(&#x27;validation&#x27;, false);
          }
        }
        
        
        // select
        if( div.find(&#x27;select&#x27;).exists() )
        {
          div.data(&#x27;validation&#x27;, true);
  
          if( div.find(&#x27;select&#x27;).val() == &quot;null&quot; || ! div.find(&#x27;select&#x27;).val() )
          {
            div.data(&#x27;validation&#x27;, false);
          }
        }
  
        
        // radio
        if( div.find(&#x27;input[type=&quot;radio&quot;]&#x27;).exists() )
        {
          div.data(&#x27;validation&#x27;, false);
  
          if( div.find(&#x27;input[type=&quot;radio&quot;]:checked&#x27;).exists() )
          {
            div.data(&#x27;validation&#x27;, true);
          }
        }
        
        
        // checkbox
        if( div.find(&#x27;input[type=&quot;checkbox&quot;]&#x27;).exists() )
        {
          div.data(&#x27;validation&#x27;, false);
  
          if( div.find(&#x27;input[type=&quot;checkbox&quot;]:checked&#x27;).exists() )
          {
            div.data(&#x27;validation&#x27;, true);
          }
        }
  
        
        // relationship
        if( div.find(&#x27;.acf_relationship&#x27;).exists() )
        {
          div.data(&#x27;validation&#x27;, false);
          
          if( div.find(&#x27;.acf_relationship .relationship_right input&#x27;).exists() )
          {
            div.data(&#x27;validation&#x27;, true);
          }
        }
        
        
        // repeater
        if( div.find(&#x27;.repeater&#x27;).exists() )
        {
          div.data(&#x27;validation&#x27;, false);
          
          if( div.find(&#x27;.repeater tr.row&#x27;).exists() )
          {
            div.data(&#x27;validation&#x27;, true);
          }      
        }
        
        
        // flexible content
        if( div.find(&#x27;.acf_flexible_content&#x27;).exists() )
        {
          div.data(&#x27;validation&#x27;, false);
          if( div.find(&#x27;.acf_flexible_content .values table&#x27;).exists() )
          {
            div.data(&#x27;validation&#x27;, true);
          }  
        }
        
        
        // gallery
        if( div.find(&#x27;.acf-gallery&#x27;).exists() )
        {
          div.data(&#x27;validation&#x27;, false);
          
          if( div.find(&#x27;.acf-gallery .thumbnail&#x27;).exists())
          {
            div.data(&#x27;validation&#x27;, true);
          }
        }
        
        
        // hook for custom validation
        $(document).trigger(&#x27;acf/validate_field&#x27;, div );
        
        
        // set validation
        if( ! div.data(&#x27;validation&#x27;) )
        {
          _this.status = false;
          div.closest(&#x27;.field&#x27;).addClass(&#x27;error&#x27;);
        }
        
  
      });
      // end loop through all fields
    }
    
  };
  
  
  /*
  *  Events
  *
  *  Remove error class on focus
  *
  *  @type  function
  *  @date  1/03/2011
  *
  *  @param  N/A
  *  @return  N/A
  */
  
  $(document).on(&#x27;focus click&#x27;, &#x27;.field.required input, .field.required textarea, .field.required select&#x27;, function( e ){
  
    $(this).closest(&#x27;.field&#x27;).removeClass(&#x27;error&#x27;);
    
  });
  
  
  /*
  *  Save Post
  *
  *  If user is saving a draft, allow them to bypass the validation
  *
  *  @type  function
  *  @date  1/03/2011
  *
  *  @param  N/A
  *  @return  N/A
  */
  
  $(document).on(&#x27;click&#x27;, &#x27;#save-post&#x27;, function(){
    
    acf.validation.disabled = true;
    
  });
  
  
  /*
  *  Submit Post
  *
  *  Run validation and return true|false accordingly
  *
  *  @type  function
  *  @date  1/03/2011
  *
  *  @param  N/A
  *  @return  N/A
  */
  
  $(document).on(&#x27;submit&#x27;, &#x27;#post&#x27;, function(){
    
    // If disabled, bail early on the validation check
    if( acf.validation.disabled )
    {
      return true;
    }
    
    
    // do validation
    acf.validation.run();
      
      
    if( ! acf.validation.status )
    {
      // vars
      var $form = $(this);
      
      
      // show message
      $form.siblings(&#x27;#message&#x27;).remove();
      $form.before(&#x27;&lt;div id=&quot;message&quot; class=&quot;error&quot;&gt;&lt;p&gt;&#x27; + acf.l10n.validation.error + &#x27;&lt;/p&gt;&lt;/div&gt;&#x27;);
      
      
      // hide ajax stuff on submit button
      $(&#x27;#publish&#x27;).removeClass(&#x27;button-primary-disabled&#x27;);
      $(&#x27;#ajax-loading&#x27;).attr(&#x27;style&#x27;,&#x27;&#x27;);
      $(&#x27;#publishing-action .spinner&#x27;).hide();
      
      return false;
    }

    
    // remove hidden postboxes
    // + this will stop them from being posted to save
    $(&#x27;.acf_postbox.acf-hidden&#x27;).remove();
    

    // submit the form
    return true;
    
  });
  

})(jQuery);

/* **********************************************
     Begin wysiwyg.js
********************************************** */

(function($){
  
  /*
  *  WYSIWYG
  *
  *  jQuery functionality for this field type
  *
  *  @type  object
  *  @date  20/07/13
  *
  *  @param  N/A
  *  @return  N/A
  */
  
  var _wysiwyg = acf.fields.wysiwyg = {
    
    $el : null,
    $textarea : null,
    
    o : {},
    
    set : function( o ){
      
      // merge in new option
      $.extend( this, o );
      
      
      // find textarea
      this.$textarea = this.$el.find(&#x27;textarea&#x27;);
      
      
      // get options
      this.o = acf.helpers.get_atts( this.$el );
      
      
      // add ID
      this.o.id = this.$textarea.attr(&#x27;id&#x27;);
      
      
      // return this for chaining
      return this;
      
    },
    has_tinymce : function(){
    
      var r = false;
      
      if( typeof(tinyMCE) == &quot;object&quot; )
      {
        r = true;
      }
      
      return r;
      
    },
    init : function(){
      
      // is clone field?
      if( acf.helpers.is_clone_field( this.$textarea ) )
      {
        return;
      }
      
      
      // temp store tinyMCE.settings
      var tinyMCE_settings = $.extend( {}, tinyMCE.settings );
      
      
      // reset tinyMCE settings
      tinyMCE.settings.theme_advanced_buttons1 = &#x27;&#x27;;
      tinyMCE.settings.theme_advanced_buttons2 = &#x27;&#x27;;
      tinyMCE.settings.theme_advanced_buttons3 = &#x27;&#x27;;
      tinyMCE.settings.theme_advanced_buttons4 = &#x27;&#x27;;
      
      if( acf.helpers.isset( this.toolbars[ this.o.toolbar ] ) )
      {
        $.each( this.toolbars[ this.o.toolbar ], function( k, v ){
          tinyMCE.settings[ k ] = v;
        })
      }
        
        
      // add functionality back in
      tinyMCE.execCommand(&quot;mceAddControl&quot;, false, this.o.id);
      
      
      // events - load
      $(document).trigger(&#x27;acf/wysiwyg/load&#x27;, this.o.id);
        
        
      // add events (click, focus, blur) for inserting image into correct editor
      this.add_events();
        
      
      // restore tinyMCE.settings
      tinyMCE.settings = tinyMCE_settings;
      
      
      // set active editor to null
      wpActiveEditor = null;
          
    },
    add_events : function(){
    
      // vars
      var id = this.o.id,
        editor = tinyMCE.get( id );
      
      
      // validate
      if( !editor )
      {
        return;
      }
      
      
      // vars
      var  $container = $(&#x27;#wp-&#x27; + id + &#x27;-wrap&#x27;),
        $body = $( editor.getBody() );
  
      
      // events
      $container.on(&#x27;click&#x27;, function(){
      
        $(document).trigger(&#x27;acf/wysiwyg/click&#x27;, id);
        
      });
      
      $body.on(&#x27;focus&#x27;, function(){
      
        $(document).trigger(&#x27;acf/wysiwyg/focus&#x27;, id);
        
      });
      
      $body.on(&#x27;blur&#x27;, function(){
      
        $(document).trigger(&#x27;acf/wysiwyg/blur&#x27;, id);
        
      });
      
      
    },
    destroy : function(){
      
      // vars
      var id = this.o.id,
        editor = tinyMCE.get( id );
      
      
      // Remove tinymcy functionality.
      // Due to the media popup destroying and creating the field within such a short amount of time,
      // a JS error will be thrown when launching the edit window twice in a row.
      try
      {
        tinyMCE.execCommand(&quot;mceRemoveControl&quot;, false, id);
      } 
      catch(e)
      {
        console.log( e );
      }
      
      
      // set active editor to null
      wpActiveEditor = null;
      
    }
    
  };
  
  
  /*
  *  acf/setup_fields
  *
  *  run init function on all elements for this field
  *
  *  @type  event
  *  @date  20/07/13
  *
  *  @param  {object}  e    event object
  *  @param  {object}  el    DOM object which may contain new ACF elements
  *  @return  N/A
  */
  
  $(document).on(&#x27;acf/setup_fields&#x27;, function(e, el){
    
    // validate
    if( ! _wysiwyg.has_tinymce() )
    {
      return;
    }
    
    
    // Destory all WYSIWYG fields
    // This hack will fix a problem when the WP popup is created and hidden, then the ACF popup (image/file field) is opened
    $(el).find(&#x27;.acf_wysiwyg&#x27;).each(function(){
      
      _wysiwyg.set({ $el : $(this) }).destroy();
      
    });
    
    
    // Add WYSIWYG fields
    setTimeout(function(){
      
      $(el).find(&#x27;.acf_wysiwyg&#x27;).each(function(){
      
        _wysiwyg.set({ $el : $(this) }).init();
        
      });
      
    }, 0);
    
  });
  
  
  /*
  *  acf/remove_fields
  *
  *  This action is called when the $el is being removed from the DOM
  *
  *  @type  event
  *  @date  20/07/13
  *
  *  @param  {object}  e    event object
  *  @param  {object}  $el    jQuery element being removed
  *  @return  N/A
  */
  
  $(document).on(&#x27;acf/remove_fields&#x27;, function(e, $el){
    
    // validate
    if( ! _wysiwyg.has_tinymce() )
    {
      return;
    }
    
    
    $el.find(&#x27;.acf_wysiwyg&#x27;).each(function(){
      
      _wysiwyg.set({ $el : $(this) }).destroy();
      
    });
    
  });
    
  
  /*
  *  acf/wysiwyg/click
  *
  *  this event is run when a user clicks on a WYSIWYG field
  *
  *  @type  event
  *  @date  17/01/13
  *
  *  @param  {object}  e    event object
  *  @param  {int}    id    WYSIWYG ID
  *  @return  N/A
  */
  
  $(document).on(&#x27;acf/wysiwyg/click&#x27;, function(e, id){
    
    wpActiveEditor = id;
    
    container = $(&#x27;#wp-&#x27; + id + &#x27;-wrap&#x27;).closest(&#x27;.field&#x27;).removeClass(&#x27;error&#x27;);
    
  });
  
  
  /*
  *  acf/wysiwyg/focus
  *
  *  this event is run when a user focuses on a WYSIWYG field body
  *
  *  @type  event
  *  @date  17/01/13
  *
  *  @param  {object}  e    event object
  *  @param  {int}    id    WYSIWYG ID
  *  @return  N/A
  */
  
  $(document).on(&#x27;acf/wysiwyg/focus&#x27;, function(e, id){
    
    wpActiveEditor = id;
    
    container = $(&#x27;#wp-&#x27; + id + &#x27;-wrap&#x27;).closest(&#x27;.field&#x27;).removeClass(&#x27;error&#x27;);
    
  });
  
  
  /*
  *  acf/wysiwyg/blur
  *
  *  this event is run when a user loses focus on a WYSIWYG field body
  *
  *  @type  event
  *  @date  17/01/13
  *
  *  @param  {object}  e    event object
  *  @param  {int}    id    WYSIWYG ID
  *  @return  N/A
  */
  
  $(document).on(&#x27;acf/wysiwyg/blur&#x27;, function(e, id){
    
    wpActiveEditor = null;
    
    // update the hidden textarea
    // - This fixes a but when adding a taxonomy term as the form is not posted and the hidden tetarea is never populated!
    var editor = tinyMCE.get( id );
    
    
    // validate
    if( !editor )
    {
      return;
    }
    
    
    var el = editor.getElement();
    
      
    // save to textarea  
    editor.save();
    
    
    // trigger change on textarea
    $( el ).trigger(&#x27;change&#x27;);
    
  });

  
  /*
  *  acf/sortable_start
  *
  *  this event is run when a element is being drag / dropped
  *
  *  @type  event
  *  @date  10/11/12
  *
  *  @param  {object}  e    event object
  *  @param  {object}  el    DOM object which may contain new ACF elements
  *  @return  N/A
  */
  
  $(document).on(&#x27;acf/sortable_start&#x27;, function(e, el) {
    
    // validate
    if( ! _wysiwyg.has_tinymce() )
    {
      return;
    }
    
    
    $(el).find(&#x27;.acf_wysiwyg&#x27;).each(function(){
      
      _wysiwyg.set({ $el : $(this) }).destroy();
      
    });
    
  });
  
  
  /*
  *  acf/sortable_stop
  *
  *  this event is run when a element has finnished being drag / dropped
  *
  *  @type  event
  *  @date  10/11/12
  *
  *  @param  {object}  e    event object
  *  @param  {object}  el    DOM object which may contain new ACF elements
  *  @return  N/A
  */
  
  $(document).on(&#x27;acf/sortable_stop&#x27;, function(e, el) {
    
    // validate
    if( ! _wysiwyg.has_tinymce() )
    {
      return;
    }
    
    
    $(el).find(&#x27;.acf_wysiwyg&#x27;).each(function(){
      
      _wysiwyg.set({ $el : $(this) }).init();
      
    });
    
  });
  
  
  /*
  *  window load
  *
  *  @description: 
  *  @since: 3.5.5
  *  @created: 22/12/12
  */
  
  $(window).load(function(){
    
    // validate
    if( ! _wysiwyg.has_tinymce() )
    {
      return;
    }
    
    
    // vars
    var wp_content = $(&#x27;#wp-content-wrap&#x27;).exists(),
      wp_acf_settings = $(&#x27;#wp-acf_settings-wrap&#x27;).exists()
      mode = &#x27;tmce&#x27;;
    
    
    // has_editor
    if( wp_acf_settings )
    {
      // html_mode
      if( $(&#x27;#wp-acf_settings-wrap&#x27;).hasClass(&#x27;html-active&#x27;) )
      {
        mode = &#x27;html&#x27;;
      }
    }
    
    
    setTimeout(function(){
      
      // trigger click on hidden wysiwyg (to get in HTML mode)
      if( wp_acf_settings &amp;&amp; mode == &#x27;html&#x27; )
      {
        $(&#x27;#acf_settings-tmce&#x27;).trigger(&#x27;click&#x27;);
      }
      
    }, 1);
    
    
    setTimeout(function(){
      
      // trigger html mode for people who want to stay in HTML mode
      if( wp_acf_settings &amp;&amp; mode == &#x27;html&#x27; )
      {
        $(&#x27;#acf_settings-html&#x27;).trigger(&#x27;click&#x27;);
      }
      
      // Add events to content editor
      if( wp_content )
      {
        _wysiwyg.set({ $el : $(&#x27;#wp-content-wrap&#x27;) }).add_events();
      }
      
      
    }, 11);
    
  });
  
  
  /*
  *  Full screen
  *
  *  @description: this hack will hide the &#x27;image upload&#x27; button in the wysiwyg full screen mode if the field has disabled image uploads!
  *  @since: 3.6
  *  @created: 26/02/13
  */
  
  $(document).on(&#x27;click&#x27;, &#x27;.acf_wysiwyg a.mce_fullscreen&#x27;, function(){
    
    // vars
    var wysiwyg = $(this).closest(&#x27;.acf_wysiwyg&#x27;),
      upload = wysiwyg.attr(&#x27;data-upload&#x27;);
    
    if( upload == &#x27;no&#x27; )
    {
      $(&#x27;#mce_fullscreen_container td.mceToolbar .mce_add_media&#x27;).remove();
    }
    
  });
  

})(jQuery);
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
