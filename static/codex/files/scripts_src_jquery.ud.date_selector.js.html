<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>scripts/src/jquery.ud.date_selector.js - usabilitydynamics/wp-disco</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="usabilitydynamics/wp-disco"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: scripts/src/jquery.ud.date_selector.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/** =========================================================
 * jquery.ud.date_selector.js v0.1.1
 * http://usabilitydynamics.com
 * =========================================================
 *
 * Commercial use requires one-time license fee
 * http://usabilitydynamics.com/licenses
 *
 * Copyright Â© 2012 Usability Dynamics, Inc. (usabilitydynamics.com)
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL Alexandru Marasteanu BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 *
 * TO DO:
 * - Convert all data to be stored in JS object, not in DOM.
 * - Add validation and better converion for date formats to setDate();
 *
 *
 *
 * ========================================================= */

/*jslint devel: true, undef: true, browser: true, continue: true, unparam: true, debug: true, eqeq: true, vars: true, white: true, newcap: true, plusplus: true, maxerr: 50, indent: 2 */
/*global window */
/*global console */
/*global clearTimeout */
/*global setTimeout */
/*global jQuery */ 


(function (jQuery) {
  &quot;use strict&quot;;

  jQuery.prototype.date_selector = function ( default_options ) {
  
    var s = {
      element: this,
      cache: {}
    };

    /** Merge Custom Settings with Defaults */
    s.options = jQuery.extend( true, {
      flat: false,
      starts: 1,
      prev: &#x27;&amp;#9664;&#x27;,
      next: &#x27;&amp;#9654;&#x27;,
      lastSel: false,
      mode: &#x27;single&#x27;,
      view: &#x27;days&#x27;,
      calendars: 1,
      format: &#x27;Y-m-d&#x27;,
      position: &#x27;bottom&#x27;,
      eventName: &#x27;click&#x27;,
      onRender: function () {
        return {};
      },
      onChange: function () {
        return true;
      },
      onShow: function () {
        return true;
      },
      onBeforeShow: function () {
        return true;
      },
      locale: {
        days: [&quot;Sunday&quot;, &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;, &quot;Sunday&quot;],
        daysShort: [&quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;, &quot;Sun&quot;],
        daysMin: [&quot;Su&quot;, &quot;Mo&quot;, &quot;Tu&quot;, &quot;We&quot;, &quot;Th&quot;, &quot;Fr&quot;, &quot;Sa&quot;, &quot;Su&quot;],
        months: [&quot;January&quot;, &quot;February&quot;, &quot;March&quot;, &quot;April&quot;, &quot;May&quot;, &quot;June&quot;, &quot;July&quot;, &quot;August&quot;, &quot;September&quot;, &quot;October&quot;, &quot;November&quot;, &quot;December&quot;],
        monthsShort: [&quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;, &quot;May&quot;, &quot;Jun&quot;, &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;],
        weekMin: &#x27;wk&#x27;
      },
      views: {
        years: &#x27;date_selector_view_years&#x27;,
        moths: &#x27;date_selector_view_months&#x27;,
        days: &#x27;date_selector_view_days&#x27;
      },      
      template: {
        wrapper: &#x27;&lt;div class=&quot;date_selector&quot;&gt;&lt;div class=&quot;date_selector_borderT&quot; /&gt;&lt;div class=&quot;date_selector_borderB&quot; /&gt;&lt;div class=&quot;date_selector_borderL&quot; /&gt;&lt;div class=&quot;date_selector_borderR&quot; /&gt;&lt;div class=&quot;date_selector_borderTL&quot; /&gt;&lt;div class=&quot;date_selector_borderTR&quot; /&gt;&lt;div class=&quot;date_selector_borderBL&quot; /&gt;&lt;div class=&quot;date_selector_borderBR&quot; /&gt;&lt;div class=&quot;date_selector_container&quot;&gt;&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;/div&gt;&#x27;,
        head: [ 
          &#x27;&lt;td&gt;&#x27;, 
          &#x27;&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;&#x27;, 
          &#x27;&lt;thead&gt;&#x27;, 
          &#x27;&lt;tr&gt;&#x27;, 
          &#x27;&lt;th class=&quot;date_selectorGoPrev&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=prev%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/th&gt;&#x27;, 
          &#x27;&lt;th colspan=&quot;6&quot; class=&quot;date_selector_month&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/th&gt;&#x27;, 
          &#x27;&lt;th class=&quot;date_selectorGoNext&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=next%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/th&gt;&#x27;, 
          &#x27;&lt;/tr&gt;&#x27;, 
          &#x27;&lt;tr class=&quot;date_selector_dow&quot;&gt;&#x27;, 
          &#x27;&lt;th&gt;&lt;span&gt;&lt;%=week%&gt;&lt;/span&gt;&lt;/th&gt;&#x27;, 
          &#x27;&lt;th&gt;&lt;span&gt;&lt;%=day1%&gt;&lt;/span&gt;&lt;/th&gt;&#x27;, 
          &#x27;&lt;th&gt;&lt;span&gt;&lt;%=day2%&gt;&lt;/span&gt;&lt;/th&gt;&#x27;, 
          &#x27;&lt;th&gt;&lt;span&gt;&lt;%=day3%&gt;&lt;/span&gt;&lt;/th&gt;&#x27;, 
          &#x27;&lt;th&gt;&lt;span&gt;&lt;%=day4%&gt;&lt;/span&gt;&lt;/th&gt;&#x27;, 
          &#x27;&lt;th&gt;&lt;span&gt;&lt;%=day5%&gt;&lt;/span&gt;&lt;/th&gt;&#x27;, 
          &#x27;&lt;th&gt;&lt;span&gt;&lt;%=day6%&gt;&lt;/span&gt;&lt;/th&gt;&#x27;, 
          &#x27;&lt;th&gt;&lt;span&gt;&lt;%=day7%&gt;&lt;/span&gt;&lt;/th&gt;&#x27;, 
          &#x27;&lt;/tr&gt;&#x27;, 
          &#x27;&lt;/thead&gt;&#x27;, 
          &#x27;&lt;/table&gt;&lt;/td&gt;&#x27;],
        space: &#x27;&lt;td class=&quot;date_selector_space&quot;&gt;&lt;div&gt;&lt;/div&gt;&lt;/td&gt;&#x27;,
        days: [&#x27;&lt;tbody class=&quot;date_selector_days&quot;&gt;&#x27;, &#x27;&lt;tr&gt;&#x27;, &#x27;&lt;th class=&quot;date_selectorWeek&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[0].week%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/th&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[0].days[0].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[0].days[0].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[0].days[1].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[0].days[1].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[0].days[2].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[0].days[2].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[0].days[3].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[0].days[3].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[0].days[4].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[0].days[4].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[0].days[5].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[0].days[5].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[0].days[6].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[0].days[6].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;/tr&gt;&#x27;, &#x27;&lt;tr&gt;&#x27;, &#x27;&lt;th class=&quot;date_selectorWeek&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[1].week%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/th&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[1].days[0].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[1].days[0].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[1].days[1].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[1].days[1].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[1].days[2].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[1].days[2].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[1].days[3].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[1].days[3].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[1].days[4].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[1].days[4].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[1].days[5].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[1].days[5].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[1].days[6].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[1].days[6].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;/tr&gt;&#x27;, &#x27;&lt;tr&gt;&#x27;, &#x27;&lt;th class=&quot;date_selectorWeek&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[2].week%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/th&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[2].days[0].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[2].days[0].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[2].days[1].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[2].days[1].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[2].days[2].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[2].days[2].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[2].days[3].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[2].days[3].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[2].days[4].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[2].days[4].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[2].days[5].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[2].days[5].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[2].days[6].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[2].days[6].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;/tr&gt;&#x27;, &#x27;&lt;tr&gt;&#x27;, &#x27;&lt;th class=&quot;date_selectorWeek&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[3].week%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/th&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[3].days[0].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[3].days[0].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[3].days[1].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[3].days[1].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[3].days[2].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[3].days[2].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[3].days[3].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[3].days[3].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[3].days[4].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[3].days[4].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[3].days[5].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[3].days[5].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[3].days[6].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[3].days[6].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;/tr&gt;&#x27;, &#x27;&lt;tr&gt;&#x27;, &#x27;&lt;th class=&quot;date_selectorWeek&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[4].week%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/th&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[4].days[0].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[4].days[0].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[4].days[1].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[4].days[1].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[4].days[2].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[4].days[2].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[4].days[3].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[4].days[3].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[4].days[4].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[4].days[4].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[4].days[5].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[4].days[5].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[4].days[6].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[4].days[6].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;/tr&gt;&#x27;, &#x27;&lt;tr&gt;&#x27;, &#x27;&lt;th class=&quot;date_selectorWeek&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[5].week%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/th&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[5].days[0].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[5].days[0].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[5].days[1].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[5].days[1].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[5].days[2].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[5].days[2].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[5].days[3].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[5].days[3].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[5].days[4].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[5].days[4].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[5].days[5].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[5].days[5].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td class=&quot;&lt;%=weeks[5].days[6].classname%&gt;&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=weeks[5].days[6].text%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;/tr&gt;&#x27;, &#x27;&lt;/tbody&gt;&#x27;],
        months: [&#x27;&lt;tbody class=&quot;&lt;%=className%&gt;&quot;&gt;&#x27;, &#x27;&lt;tr&gt;&#x27;, &#x27;&lt;td colspan=&quot;2&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=data[0]%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td colspan=&quot;2&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=data[1]%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td colspan=&quot;2&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=data[2]%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td colspan=&quot;2&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=data[3]%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;/tr&gt;&#x27;, &#x27;&lt;tr&gt;&#x27;, &#x27;&lt;td colspan=&quot;2&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=data[4]%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td colspan=&quot;2&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=data[5]%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td colspan=&quot;2&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=data[6]%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td colspan=&quot;2&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=data[7]%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;/tr&gt;&#x27;, &#x27;&lt;tr&gt;&#x27;, &#x27;&lt;td colspan=&quot;2&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=data[8]%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td colspan=&quot;2&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=data[9]%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td colspan=&quot;2&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=data[10]%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;td colspan=&quot;2&quot;&gt;&lt;a href=&quot;#&quot;&gt;&lt;span&gt;&lt;%=data[11]%&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;&#x27;, &#x27;&lt;/tr&gt;&#x27;, &#x27;&lt;/tbody&gt;&#x27;]      
      }
    }, default_options );


    /**
     * Logging Function.
     *
     * @since 0.1
     * @author potanin@UD
     */
    s.log = typeof s.log === &#x27;function&#x27; ? s.log : function (notice, type, console_type, override_debug) {
      //console.log(&#x27;DP:: &#x27; + notice);
    };


    /**
     * Primary Initializer.
     *
     * @since 0.1
     * @author potanin@UD
     */
    s.initialize = typeof s.initialize === &#x27;function&#x27; ? s.initialize : function () {
      s.log(&#x27;s.initialize()&#x27;, &#x27;function&#x27;);
                
      s.extendDate( s.options.locale );    
      s.options.calendars = Math.max(1, parseInt(s.options.calendars, 10) || 1);
      s.options.mode = /single|multiple|range/.test(s.options.mode) ? s.options.mode : &#x27;single&#x27;;
      
      /* Cycle through each container and identify related calendar elements */
      return s.element.each( function ( index, this_wrapper ) {
        var id = &#x27;date_selector_&#x27; + parseInt(Math.random() * 1000), this_calendar, count;

        /* If this element alreay has options saved to data, we do nothing */
        if( jQuery( s.element ).data(&#x27;date_selector_initialized&#x27;) ) {
          s.log(&#x27;s.initialize() - DOM element already initialized, skipping.&#x27;, &#x27;function&#x27;);
          return;
        }
        
        if( !s.options.date ) {
          s.options.date = new Date();
        }
                
        if ( s.options.date.constructor === String ) {
          s.options.date = parseDate(s.options.date, s.options.format);
          s.options.date.setHours(0, 0, 0, 0);
        }
        
        if (s.options.mode != &#x27;single&#x27;) {
          if ( s.options.date.constructor != Array ) {
            s.options.date = [s.options.date.valueOf()];
            if (s.options.mode === &#x27;range&#x27;) {
              s.options.date.push(((new Date(s.options.date[0])).setHours(23, 59, 59, 0)).valueOf());
            }
          } else {
            for (var i = 0; i &lt; s.options.date.length; i++) {
              s.options.date[i] = (parseDate(s.options.date[i], s.options.format).setHours(0, 0, 0, 0)).valueOf();
            }
            if (s.options.mode === &#x27;range&#x27;) {
              s.options.date[1] = ((new Date(s.options.date[1])).setHours(23, 59, 59, 0)).valueOf();
            }
          }
        } else {
          s.options.date = s.options.date.valueOf();
        }
        
        if (!s.options.current) {
          s.options.current = new Date();
        } else {
          s.options.current = parseDate(s.options.current, s.options.format);
        }
        
        s.options.current.setDate(1);
        s.options.current.setHours(0, 0, 0, 0);
        
        s.options.id = id;
        
        jQuery( this_wrapper ).data(&#x27;date_selector_id&#x27;, s.options.id);
        
        /* Attach to mousedown so propagadtion can be stopped early enough when the calendar is being interacted with */
        this_calendar = jQuery( s.options.template.wrapper ).attr( &#x27;id&#x27; , id ).bind( &#x27;mousedown&#x27;, click ).data(&#x27;date_selector&#x27;, s.options);
        
        if (s.options.className) {
          this_calendar.addClass(s.options.className);
        }
        
        var html = &#x27;&#x27;;
        for (var i = 0; i &lt; s.options.calendars; i++) {
          count = s.options.starts;
          
          if (i &gt; 0) {
            html += s.options.template.space;
          }
          
          html += tmpl(s.options.template.head.join(&#x27;&#x27;), {
            week: s.options.locale.weekMin,
            prev: s.options.prev,
            next: s.options.next,
            day1: s.options.locale.daysMin[(count++) % 7],
            day2: s.options.locale.daysMin[(count++) % 7],
            day3: s.options.locale.daysMin[(count++) % 7],
            day4: s.options.locale.daysMin[(count++) % 7],
            day5: s.options.locale.daysMin[(count++) % 7],
            day6: s.options.locale.daysMin[(count++) % 7],
            day7: s.options.locale.daysMin[(count++) % 7]
          });
          
        };
        
        this_calendar.find(&#x27;tr:first&#x27;).append( html ).find( &#x27;table&#x27; ).addClass( s.options.views[s.options.view] );

        fill( this_calendar.get(0) );

        if ( s.options.flat ) {
          this_calendar.appendTo( this ).show().css(&#x27;position&#x27;, &#x27;relative&#x27;);
          layout(this_calendar.get(0));
          
        } else {
          this_calendar.appendTo(document.body);
          jQuery(this).bind(s.options.eventName, show);
          
        }
        
        jQuery( s.element ).data(&#x27;date_selector_initialized&#x27;, true );
      
      });
      
    };
    
    
    /**
     * {}.
     *
     * @since 0.1
     * @author potanin@UD
     */  
    var tmpl = function (str, data) {
      s.log(&#x27;tmpl()&#x27;, &#x27;function&#x27;);
          
      // Figure out if we&#x27;re getting a template, or if we need to load the template - and be sure to cache the result.
      var fn = !/\W/.test(str) ? s.cache[str] = s.cache[str] || tmpl(document.getElementById(str).innerHTML) :

      // Generate a reusable function that will serve as a template generator (and which will be cached).
      new Function(&quot;obj&quot;, &quot;var p=[],print=function(){p.push.apply(p,arguments);};&quot; + &quot;with(obj){p.push(&#x27;&quot; + str.replace(/[\r\t\n]/g, &quot; &quot;).split(&quot;&lt;%&quot;).join(&quot;\t&quot;).replace(/((^|%&gt;)[^\t]*)&#x27;/g, &quot;$1\r&quot;).replace(/\t=(.*?)%&gt;/g, &quot;&#x27;,$1,&#x27;&quot;).split(&quot;\t&quot;).join(&quot;&#x27;);&quot;).split(&quot;%&gt;&quot;).join(&quot;p.push(&#x27;&quot;).split(&quot;\r&quot;).join(&quot;\\&#x27;&quot;) + &quot;&#x27;);}return p.join(&#x27;&#x27;);&quot;);
  
      // Provide some basic currying to the user
      return data ? fn(data) : fn;
    };


    /**
     * {}.
     *
     * @since 0.1
     * @author potanin@UD
     */
    var fill = function ( this_calendar ) {
      s.log(&#x27;fill()&#x27;, &#x27;function&#x27;);

      this_calendar = jQuery( this_calendar );
      
      var currentCal = Math.floor( s.options.calendars / 2 ),
        date, data, dow, month, count = 0,
        week, days, indic, indic2, html, tblCal;
        
      this_calendar.find(&#x27;td&gt;table tbody&#x27;).remove();
      
      for (var i = 0; i &lt; s.options.calendars; i++) {
        date = new Date(s.options.current);
        date.addMonths(-currentCal + i);
        
        tblCal = this_calendar.find(&#x27;table&#x27;).eq( i + 1) ;

        if( typeof tblCal === &#x27;object&#x27; &amp;&amp; typeof tblCal[0] != &#x27;undefined&#x27;  ) {
        
          switch ( tblCal[0].className ) {
            case &#x27;date_selector_view_days&#x27;:
            dow = s.formatDate(date, &#x27;B, Y&#x27;);
            break;
            
            case &#x27;date_selector_view_months&#x27;:
            dow = date.getFullYear();
            break;
            
            case &#x27;date_selector_view_years&#x27;:
            dow = (date.getFullYear() - 6) + &#x27; - &#x27; + (date.getFullYear() + 5);
            break;
            
          };
        
        }
               
        tblCal.find(&#x27;thead tr:first th:eq(1) span&#x27;).text(dow);
        dow = date.getFullYear() - 6;
        data = {
          data: [],
          className: &#x27;date_selector_years&#x27;
        }
        
        for (var j = 0; j &lt; 12; j++) {
          data.data.push(dow + j);
        };
        
        html = tmpl(s.options.template.months.join(&#x27;&#x27;), data);
        date.setDate(1);
        data = {
          weeks: [],
          test: 10
        };
        
        month = date.getMonth();
        var dow = (date.getDay() - s.options.starts) % 7;
        date.addDays(-(dow + (dow &lt; 0 ? 7 : 0)));
        week = -1;
        count = 0;
        while (count &lt; 42) {
          indic = parseInt(count / 7, 10);
          indic2 = count % 7;
          if (!data.weeks[indic]) {
            week = date.getWeekNumber();
            data.weeks[indic] = {
              week: week,
              days: []
            };
          }
          data.weeks[indic].days[indic2] = {
            text: date.getDate(),
            classname: []
          };
          if (month != date.getMonth()) {
            data.weeks[indic].days[indic2].classname.push(&#x27;date_selectorNotInMonth&#x27;);
          }
          if (date.getDay() === 0) {
            data.weeks[indic].days[indic2].classname.push(&#x27;date_selectorSunday&#x27;);
          }
          if (date.getDay() === 6) {
            data.weeks[indic].days[indic2].classname.push(&#x27;date_selectorSaturday&#x27;);
          }
          var fromUser = s.options.onRender(date);
          var val = date.valueOf();
          if (fromUser.selected || s.options.date === val || jQuery.inArray(val, s.options.date) &gt; -1 || (s.options.mode === &#x27;range&#x27; &amp;&amp; val &gt;= s.options.date[0] &amp;&amp; val &lt;= s.options.date[1])) {
            data.weeks[indic].days[indic2].classname.push(&#x27;date_selector_selected&#x27;);
          }
          if (fromUser.disabled) {
            data.weeks[indic].days[indic2].classname.push(&#x27;date_selector_disabled&#x27;);
          }
          if (fromUser.className) {
            data.weeks[indic].days[indic2].classname.push(fromUser.className);
          }
          data.weeks[indic].days[indic2].classname = data.weeks[indic].days[indic2].classname.join(&#x27; &#x27;);
          count++;
          date.addDays(1);
        }
        
        html = tmpl(s.options.template.days.join(&#x27;&#x27;), data) + html;
        
        data = {
          data: s.options.locale.monthsShort,
          className: &#x27;date_selector_months&#x27;
        };
        
        html = tmpl(s.options.template.months.join(&#x27;&#x27;), data) + html;
        tblCal.append(html);
        
      }
    };
    
    
    /**
     * {}.
     *
     * @since 0.1
     * @author potanin@UD
     */    
    var parseDate = function ( date, format ) {
      s.log(&#x27;parseDate()&#x27;, &#x27;function&#x27;);
      
      if( !date ) {
        return;
      }
      
      if ( date.constructor === Date ) {
        return new Date(date);
      }
      var parts = date.split(/\W+/);
      var against = format.split(/\W+/),
        d, m, y, h, min, now = new Date();
      for (var i = 0; i &lt; parts.length; i++) {
        switch (against[i]) {
        case &#x27;d&#x27;:
        case &#x27;e&#x27;:
          d = parseInt(parts[i], 10);
          break;
        case &#x27;m&#x27;:
          m = parseInt(parts[i], 10) - 1;
          break;
        case &#x27;Y&#x27;:
        case &#x27;y&#x27;:
          y = parseInt(parts[i], 10);
          y += y &gt; 100 ? 0 : (y &lt; 29 ? 2000 : 1900);
          break;
        case &#x27;H&#x27;:
        case &#x27;I&#x27;:
        case &#x27;k&#x27;:
        case &#x27;l&#x27;:
          h = parseInt(parts[i], 10);
          break;
        case &#x27;P&#x27;:
        case &#x27;p&#x27;:
          if (/pm/i.test(parts[i]) &amp;&amp; h &lt; 12) {
            h += 12;
          } else if (/am/i.test(parts[i]) &amp;&amp; h &gt;= 12) {
            h -= 12;
          }
          break;
        case &#x27;M&#x27;:
          min = parseInt(parts[i], 10);
          break;
        }
      }
      return new Date(
      y === undefined ? now.getFullYear() : y, m === undefined ? now.getMonth() : m, d === undefined ? now.getDate() : d, h === undefined ? now.getHours() : h, min === undefined ? now.getMinutes() : min, 0);
    };
    
    
    /**
     * {}.
     *
     * @since 0.1
     * @author potanin@UD
     */    
    s.formatDate = typeof s.formatDate === &#x27;function&#x27; ? s.formatDate : function (date, format) {
      
      if( s ) {
        s.log(&#x27;s.formatDate()&#x27;, &#x27;function&#x27;);
      }

      var m = date.getMonth();
      var d = date.getDate();
      var y = date.getFullYear();
      var wn = date.getWeekNumber();
      var w = date.getDay();
      var s = {};
      var hr = date.getHours();
      var pm = (hr &gt;= 12);
      var ir = (pm) ? (hr - 12) : hr;
      var dy = date.getDayOfYear();
      if (ir === 0) {
        ir = 12;
      }
      var min = date.getMinutes();
      var sec = date.getSeconds();
      var parts = format.split(&#x27;&#x27;),
        part;
      for (var i = 0; i &lt; parts.length; i++) {
        part = parts[i];
        switch (parts[i]) {
        case &#x27;a&#x27;:
          part = date.getDayName();
          break;
        case &#x27;A&#x27;:
          part = date.getDayName(true);
          break;
        case &#x27;b&#x27;:
          part = date.getMonthName();
          break;
        case &#x27;B&#x27;:
          part = date.getMonthName(true);
          break;
        case &#x27;C&#x27;:
          part = 1 + Math.floor(y / 100);
          break;
        case &#x27;d&#x27;:
          part = (d &lt; 10) ? (&quot;0&quot; + d) : d;
          break;
        case &#x27;e&#x27;:
          part = d;
          break;
        case &#x27;H&#x27;:
          part = (hr &lt; 10) ? (&quot;0&quot; + hr) : hr;
          break;
        case &#x27;I&#x27;:
          part = (ir &lt; 10) ? (&quot;0&quot; + ir) : ir;
          break;
        case &#x27;j&#x27;:
          part = (dy &lt; 100) ? ((dy &lt; 10) ? (&quot;00&quot; + dy) : (&quot;0&quot; + dy)) : dy;
          break;
        case &#x27;k&#x27;:
          part = hr;
          break;
        case &#x27;l&#x27;:
          part = ir;
          break;
        case &#x27;m&#x27;:
          part = (m &lt; 9) ? (&quot;0&quot; + (1 + m)) : (1 + m);
          break;
        case &#x27;M&#x27;:
          part = (min &lt; 10) ? (&quot;0&quot; + min) : min;
          break;
        case &#x27;p&#x27;:
        case &#x27;P&#x27;:
          part = pm ? &quot;PM&quot; : &quot;AM&quot;;
          break;
        case &#x27;s&#x27;:
          part = Math.floor(date.getTime() / 1000);
          break;
        case &#x27;S&#x27;:
          part = (sec &lt; 10) ? (&quot;0&quot; + sec) : sec;
          break;
        case &#x27;u&#x27;:
          part = w + 1;
          break;
        case &#x27;w&#x27;:
          part = w;
          break;
        case &#x27;y&#x27;:
          part = (&#x27;&#x27; + y).substr(2, 2);
          break;
        case &#x27;Y&#x27;:
          part = y;
          break;
        }
        parts[i] = part;
      }
      return parts.join(&#x27;&#x27;);
    };
    
    
            
    /**
     * {}.
     *
     * @since 0.1
     * @author potanin@UD
     */        
    s.extendDate = typeof s.extendDate === &#x27;function&#x27; ? s.extendDate : function ( locale ) {
      
      if (Date.prototype.tempDate) {
        return;
      }
      
      Date.prototype.tempDate = null;
      Date.prototype.months = locale.months;
      Date.prototype.monthsShort = locale.monthsShort;
      Date.prototype.days = locale.days;
      Date.prototype.daysShort = locale.daysShort;
      
      Date.prototype.getMonthName = function (fullName) {
        return this[ fullName ? &#x27;months&#x27; : &#x27;monthsShort&#x27; ][ this.getMonth() ];
      };
      
      Date.prototype.getDayName = function (fullName) {
        return this[fullName ? &#x27;days&#x27; : &#x27;daysShort&#x27;][this.getDay()];
      };
      
      Date.prototype.addDays = function (n) {
        this.setDate(this.getDate() + n);
        this.tempDate = this.getDate();
      };
      
      Date.prototype.addMonths = function (n) {
        if (this.tempDate === null) {
          this.tempDate = this.getDate();
        }
        this.setDate(1);
        this.setMonth(this.getMonth() + n);
        this.setDate(Math.min(this.tempDate, this.getMaxDays()));
      };
      
      Date.prototype.addYears = function (n) {
        if (this.tempDate === null) {
          this.tempDate = this.getDate();
        }
        this.setDate(1);
        this.setFullYear(this.getFullYear() + n);
        this.setDate(Math.min(this.tempDate, this.getMaxDays()));
      };
      
      Date.prototype.getMaxDays = function () {
        var tmpDate = new Date(Date.parse(this)),
          d = 28,
          m;
        m = tmpDate.getMonth();
        d = 28;
        while (tmpDate.getMonth() === m) {
          d++;
          tmpDate.setDate(d);
        }
        return d - 1;
      };
      
      Date.prototype.getFirstDay = function () {
        var tmpDate = new Date(Date.parse(this));
        tmpDate.setDate(1);
        return tmpDate.getDay();
      };
      
      Date.prototype.getWeekNumber = function () {
        var tempDate = new Date(this);
        tempDate.setDate(tempDate.getDate() - (tempDate.getDay() + 6) % 7 + 3);
        var dms = tempDate.valueOf();
        tempDate.setMonth(0);
        tempDate.setDate(4);
        return Math.round((dms - tempDate.valueOf()) / (604800000)) + 1;
      };
      
      Date.prototype.getDayOfYear = function () {
        var now = new Date(this.getFullYear(), this.getMonth(), this.getDate(), 0, 0, 0);
        var then = new Date(this.getFullYear(), 0, 0, 0, 0, 0);
        var time = now - then;
        return Math.floor(time / 24 * 60 * 60 * 1000);
      };
      
    };
        
            
    /**
     * Displays a single calendar. The calendar object (not the wrapper) is passed to function. 
     *
     * Adds width and height to the Calendar element and to the primary container (.date_selector_container)
     *
     * @since 0.1
     * @author potanin@UD
     */    
    var layout = function ( el ) {
      s.log(&#x27;layout()&#x27;, &#x27;function&#x27;);
    
      var options = jQuery( el ).data(&#x27;date_selector&#x27;);
      var this_calendar = jQuery(&#x27;#&#x27; + options.id);

      /* Gets all the divs within the Calendar element */          
      if (!s.options.extraHeight) {
        var divs = jQuery( el ).find( &#x27;div&#x27; );
        s.options.extraHeight = divs.get(0).offsetHeight + divs.get(1).offsetHeight;
        s.options.extraWidth = divs.get(2).offsetWidth + divs.get(3).offsetWidth;
      }
      
      var first_table = this_calendar.find(&#x27;table:first&#x27;).get(0);
      var width = first_table.offsetWidth;
      var height = first_table.offsetHeight;

      this_calendar.css({
        width: width + s.options.extraWidth + &#x27;px&#x27;,
        height: height + s.options.extraHeight + &#x27;px&#x27;
      }).find(&#x27;div.date_selector_container&#x27;).css({
        width: width + &#x27;px&#x27;,
        height: height + &#x27;px&#x27;
      });
      
    };
    
    
    /**
     * Click Monitor for the entire Calendar object.
     *
     * @since 0.1
     * @author potanin@UD
     */    
    var click = function ( ev ) {
      s.log(&#x27;click()&#x27;, &#x27;function&#x27;);
    
      if (jQuery(ev.target).is(&#x27;span&#x27;)) {
        ev.target = ev.target.parentNode;
      }
      
      var clicked_element = jQuery(ev.target);
      
      /* If we didn&#x27;t click a link, there is nothing we can do here */
      if( !clicked_element.is(&#x27;a&#x27;) ) {
        return;
      }
      
      ev.stopPropagation();
      
      ev.preventDefault();
      
      ev.target.blur();
      
      if (clicked_element.hasClass(&#x27;date_selector_disabled&#x27;)) {
        return false;
      }

		  var options = s.options;
			var parentEl = clicked_element.parent();
			var tblEl = parentEl.parent().parent().parent(); /* the table element, e.g. .date_selector_view_days */
			var tblIndex = jQuery(&#x27;table&#x27;, this).index(tblEl.get(0)) - 1;
			var tmp = new Date(options.current);
			var changed = false;
			var fillIt = false;
      
      if (parentEl.is(&#x27;th&#x27;)) {
      
        if (parentEl.hasClass(&#x27;date_selectorWeek&#x27;) &amp;&amp; s.options.mode === &#x27;range&#x27; &amp;&amp; !parentEl.next().hasClass(&#x27;date_selector_disabled&#x27;)) {
          var val = parseInt(parentEl.next().text(), 10);
          tmp.addMonths(tblIndex - Math.floor(s.options.calendars / 2));
          
          if (parentEl.next().hasClass(&#x27;date_selectorNotInMonth&#x27;)) {
            tmp.addMonths(val &gt; 15 ? -1 : 1);
          }
          
          tmp.setDate(val);
          s.options.date[0] = (tmp.setHours(0, 0, 0, 0)).valueOf();
          tmp.setHours(23, 59, 59, 0);
          tmp.addDays(6);
          s.options.date[1] = tmp.valueOf();
          fillIt = true;
          changed = true;
          s.options.lastSel = false;
          
        } else if (parentEl.hasClass(&#x27;date_selector_month&#x27;)) {
          tmp.addMonths(tblIndex - Math.floor(s.options.calendars / 2));
          switch (tblEl.get(0).className) {
          case &#x27;date_selector_view_days&#x27;:
            tblEl.get(0).className = &#x27;date_selector_view_months&#x27;;
            clicked_element.find(&#x27;span&#x27;).text(tmp.getFullYear());
            break;
          case &#x27;date_selector_view_months&#x27;:
            tblEl.get(0).className = &#x27;date_selector_view_years&#x27;;
            clicked_element.find(&#x27;span&#x27;).text((tmp.getFullYear() - 6) + &#x27; - &#x27; + (tmp.getFullYear() + 5));
            break;
          case &#x27;date_selector_view_years&#x27;:
            tblEl.get(0).className = &#x27;date_selector_view_days&#x27;;
            clicked_element.find(&#x27;span&#x27;).text(s.formatDate(tmp, &#x27;B, Y&#x27;));
            break;
          }
          
        } else if (parentEl.parent().parent().is(&#x27;thead&#x27;)) {
          switch (tblEl.get(0).className) {
          case &#x27;date_selector_view_days&#x27;:
            s.options.current.addMonths(parentEl.hasClass(&#x27;date_selectorGoPrev&#x27;) ? -1 : 1);
            break;
          case &#x27;date_selector_view_months&#x27;:
            s.options.current.addYears(parentEl.hasClass(&#x27;date_selectorGoPrev&#x27;) ? -1 : 1);
            break;
          case &#x27;date_selector_view_years&#x27;:
            s.options.current.addYears(parentEl.hasClass(&#x27;date_selectorGoPrev&#x27;) ? -12 : 12);
            break;
          }
          fillIt = true;
        }
        
      } else if ( parentEl.is(&#x27;td&#x27;) &amp;&amp; !parentEl.hasClass(&#x27;date_selector_disabled&#x27;)) {
       
        switch (tblEl.get(0).className) {
        
          case &#x27;date_selector_view_months&#x27;:
            s.options.current.setMonth(tblEl.find(&#x27;tbody.date_selector_months td&#x27;).index(parentEl));
            s.options.current.setFullYear(parseInt(tblEl.find(&#x27;thead th.date_selector_month span&#x27;).text(), 10));
            s.options.current.addMonths(Math.floor(s.options.calendars / 2) - tblIndex);
            tblEl.get(0).className = &#x27;date_selector_view_days&#x27;;
          break;
        
          case &#x27;date_selector_view_years&#x27;:
            s.options.current.setFullYear(parseInt(clicked_element.text(), 10));
            tblEl.get(0).className = &#x27;date_selector_view_months&#x27;;
          break;
      
          default:
            var val = parseInt(clicked_element.text(), 10);
            tmp.addMonths(tblIndex - Math.floor(s.options.calendars / 2));
            
            if (parentEl.hasClass(&#x27;date_selectorNotInMonth&#x27;)) {
              tmp.addMonths(val &gt; 15 ? -1 : 1);
            }
            
            tmp.setDate(val);
            switch (s.options.mode) {
            
              case &#x27;multiple&#x27;:
                val = (tmp.setHours(0, 0, 0, 0)).valueOf();
                if (jQuery.inArray(val, s.options.date) &gt; -1) {
                  jQuery.each(s.options.date, function (nr, dat) {
                    if (dat === val) {
                      s.options.date.splice(nr, 1);
                      return false;
                    }
                  });
                } else {
                  s.options.date.push(val);
                }
              break;
              
              case &#x27;range&#x27;:
                if (!s.options.lastSel) {
                  s.options.date[0] = (tmp.setHours(0, 0, 0, 0)).valueOf();
                }
                val = (tmp.setHours(23, 59, 59, 0)).valueOf();
                if (val &lt; s.options.date[0]) {
                  s.options.date[1] = s.options.date[0] + 86399000;
                  s.options.date[0] = val - 86399000;
                } else {
                  s.options.date[1] = val;
                }
                s.options.lastSel = !s.options.lastSel;
              break;
              
              default:
                s.options.date = tmp.valueOf();
              break;
            
            }
            
          break;
        }
        
        fillIt = true;
        changed = true;
        
      }
      
      if (fillIt) {
        fill(this);
      }
      
      if (changed) {
        s.options.onChange.apply( this, prepareDate( options ) );
      }

    };
    
    
    /**
     * {}.
     *
     * @since 0.1
     * @author potanin@UD
     */    
    var prepareDate = function ( options ) {
      s.log(&#x27;prepareDate()&#x27;, &#x27;function&#x27;);
    
      var tmp;
      
      if (s.options.mode === &#x27;single&#x27;) {
        tmp = new Date( s.options.date );
        return [s.formatDate( tmp, s.options.format), tmp, s.options.el];
        
      } else {
      
        tmp = [ [], [], s.options.el ];
          
        jQuery.each( s.options.date , function( nr, val ) {
          var date = new Date(val);
          tmp[0].push(s.formatDate( date , s.options.format));
          tmp[1].push(date);
        });
        
        return tmp;
      }
    };
    
    
    /**
     * {}.
     *
     * @since 0.1
     * @author potanin@UD
     */    
    var getViewport = function () {
      s.log(&#x27;getViewport()&#x27;, &#x27;function&#x27;);
    
      var m = document.compatMode === &#x27;CSS1Compat&#x27;;
      return {
        l: window.pageXOffset || (m ? document.documentElement.scrollLeft : document.body.scrollLeft),
        t: window.pageYOffset || (m ? document.documentElement.scrollTop : document.body.scrollTop),
        w: window.innerWidth || (m ? document.documentElement.clientWidth : document.body.clientWidth),
        h: window.innerHeight || (m ? document.documentElement.clientHeight : document.body.clientHeight)
      };
    };
    
    
    /**
     * {}.
     *
     * @since 0.1
     * @author potanin@UD
     */    
    var isChildOf = function (parentEl, el, container) {
      s.log(&#x27;isChildOf()&#x27;, &#x27;function&#x27;);
    
      if (parentEl === el) {
        return true;
      }
      if (parentEl.contains) {
        return parentEl.contains(el);
      }
      if (parentEl.compareDocumentPosition) {
        return !!(parentEl.compareDocumentPosition(el) &amp; 16);
      }
      var prEl = s.element.parentNode;
      while (prEl &amp;&amp; prEl != container) {
        if (prEl === parentEl) return true;
        prEl = prEl.parentNode;
      }
      return false;
    }
    
    
    /**
     * {}.
     *
     * @since 0.1
     * @author potanin@UD
     */    
    var show = function ( ev ) {
      s.log(&#x27;show()&#x27;, &#x27;function&#x27;);
      
      /* Get the calendar container DOM element */
      var element = this;
    
      /* Get jQuery Object for calendar */
      var calendar_object = jQuery(&#x27;#&#x27; + jQuery( this ).data(&#x27;date_selector_id&#x27;));
      
      if (!calendar_object.is(&#x27;:visible&#x27;)) {
      
        /* Get DOM Element */
        var calendar_element = calendar_object.get(0);
        
        fill( calendar_element );
        
        /* Applying to the wrapper? */
        s.options.onBeforeShow.apply(this, [ calendar_element ]);
        
        var pos = jQuery( element ).offset();
        var viewPort = getViewport();
        var top = pos.top;
        var left = pos.left;
        var oldDisplay = jQuery.curCSS( calendar_element , &#x27;display&#x27; );
        
        calendar_object.css({
          visibility: &#x27;hidden&#x27;,
          display: &#x27;block&#x27;
        });
        
        layout( calendar_element );
        
        switch (s.options.position) {
          case &#x27;top&#x27;:
            top -= calendar_element.offsetHeight;
          break;
          case &#x27;left&#x27;:
            left -= c.offsetWidth;
          break;
          case &#x27;right&#x27;:
            left += element.offsetWidth;
          break;
          case &#x27;bottom&#x27;:
            top += element.offsetHeight;
          break;
        }
        
        if (top + calendar_element.offsetHeight &gt; viewPort.t + viewPort.h) {
          top = pos.top - calendar_element.offsetHeight;
        }
        
        if (top &lt; viewPort.t) {
          top = pos.top + this.offsetHeight + calendar_element.offsetHeight;
        }
        
        if (left + calendar_element.offsetWidth &gt; viewPort.l + viewPort.w) {
          left = pos.left - calendar_element.offsetWidth;
        }
        
        if (left &lt; viewPort.l) {
          left = pos.left + this.offsetWidth
        }
        
        calendar_object.css({
          visibility: &#x27;visible&#x27;,
          display: &#x27;block&#x27;,
          top: top + &#x27;px&#x27;,
          left: left + &#x27;px&#x27;
        });
        
        if (s.options.onShow.apply(this, [ calendar_element  ]) != false) {
          calendar_object.show();
        }
        
        jQuery( document ).bind( &#x27;mousedown&#x27; , {
          element: element,
          calendar_object: calendar_object,
          trigger: this
        }, hide );
        
      }
      return false;
    };
    
    
    /**
     * {}.
     *
     * @since 0.1
     * @author potanin@UD
     */    
    var hide = function ( ev, args ) {
      s.log(&#x27;hide()&#x27;, &#x27;function&#x27;);
    
      if ( ev.target != ev.data.trigger &amp;&amp; !isChildOf( ev.data.calendar_object, ev.target, ev.data.element )) {
        ev.data.calendar_object.hide();
        jQuery(document).unbind(&#x27;mousedown&#x27;, hide);
      }
    };



    /**
     * {}
     *
     * @author potanin@UD
     */
    this.showPicker = s.showPicker = typeof s.showPicker === &#x27;function&#x27; ? s.showPicker : function() {    
      s.log(&#x27;showPicker()&#x27;, &#x27;function&#x27;);
    
      return this.each(function () {
        if (jQuery(this).data(&#x27;date_selector_id&#x27;)) {
          show.apply(this);
        }
      });
    };
    
    
    /**
     * {}
     *
     * @author potanin@UD
     */
    this.hidePicker = s.hidePicker = typeof s.hidePicker === &#x27;function&#x27; ? s.hidePicker : function() {      
      s.log(&#x27;hidePicker()&#x27;, &#x27;function&#x27;);
    
      return this.each(function () {
        if (jQuery(this).data(&#x27;date_selector_id&#x27;)) {
          jQuery(&#x27;#&#x27; + jQuery(this).data(&#x27;date_selector_id&#x27;)).hide();
        }
      });
    };
    
    
    /**
     * {}
     *
     * 
     * @author potanin@UD
     */
    this.setDate = s.setDate = typeof s.setDate === &#x27;function&#x27; ? s.setDate : function( date, shiftTo ) {      
      s.log(&#x27;setDate()&#x27;, &#x27;function&#x27;);

      return s.element.each( function () {
      
        if( !jQuery( this ).data(&#x27;date_selector_id&#x27;)) {
          s.log(&#x27;setDate() - Element not initialized.&#x27;, &#x27;function&#x27;);    
          return;
        }
      
        var cal = jQuery(&#x27;#&#x27; + jQuery(this).data(&#x27;date_selector_id&#x27;));
        
        s.options.date = date;
                
        if( !s.options.date ) {
          s.options.date = new Date();
        }
                
        if ( s.options.date.constructor === String ) {
          s.options.date = parseDate(s.options.date, s.options.format);
          s.options.date.setHours(0, 0, 0, 0);
        }
        
        if (s.options.mode != &#x27;single&#x27;) {
          if ( s.options.date.constructor != Array ) {
            s.options.date = [s.options.date.valueOf()];
            if (s.options.mode === &#x27;range&#x27;) {
              s.options.date.push(((new Date(s.options.date[0])).setHours(23, 59, 59, 0)).valueOf());
            }
          } else {
          
            for (var i = 0; i &lt; s.options.date.length; i++) {
              if( typeof s.options.date[i] != &#x27;undefined&#x27; ) {
                s.options.date[i] = (parseDate( s.options.date[i] , s.options.format).setHours(0, 0, 0, 0)).valueOf();
              }
            }
            
            if ( s.options.mode === &#x27;range&#x27; ) {
              s.options.date[1] = ((new Date(s.options.date[1])).setHours(23, 59, 59, 0)).valueOf();
            }
          }
        } else {
          s.options.date = s.options.date.valueOf();
        }
                
        
        if (shiftTo) {
          s.options.current = new Date( s.options.mode != &#x27;single&#x27; ? s.options.date[0] : s.options.date );
        }

        fill( s.element.get(0) );
        
      });
      
    };
    
    
    /**
     * {}
     *
     * @author potanin@UD
     */
    this.getDate = s.getDate = typeof s.getDate === &#x27;function&#x27; ? s.getDate : function() {      
      s.log(&#x27;getDate()&#x27;, &#x27;function&#x27;);

      if (this.size() &gt; 0) {
        return prepareDate(jQuery(&#x27;#&#x27; + jQuery(this).data(&#x27;date_selector_id&#x27;)).data(&#x27;date_selector&#x27;))[formated ? 0 : 1];
      }
    };
    
    
    /**
     * {}
     *
     * @author potanin@UD
     */
    this.Clear = s.clear = typeof s.clear === &#x27;function&#x27; ? s.clear : function() {      
      s.log(&#x27;clear()&#x27;, &#x27;function&#x27;);
    
      return this.each(function () {
        if (jQuery(this).data(&#x27;date_selector_id&#x27;)) {
          var cal = jQuery(&#x27;#&#x27; + jQuery(this).data(&#x27;date_selector_id&#x27;));
          s.options = s.element.data(&#x27;date_selector&#x27;);
          if (s.options.mode != &#x27;single&#x27;) {
            s.options.date = [];
            fill(s.element.get(0));
          }
        }
      });
    };
    
    
    /**
     * {}
     *
     * @author potanin@UD
     */
    this.fixLayout = s.fixLayout = typeof s.fixLayout === &#x27;function&#x27; ? s.fixLayout : function() {      
      s.log(&#x27;fixLayout()&#x27;, &#x27;function&#x27;);
    
      return this.each(function () {
        if (jQuery(this).data(&#x27;date_selector_id&#x27;)) {
          var cal = jQuery(&#x27;#&#x27; + jQuery(this).data(&#x27;date_selector_id&#x27;));
          s.options = s.element.data(&#x27;date_selector&#x27;);
          if (s.options.flat) {
            layout(s.element.get(0));
          }
        }
      });
    };
    

    s.initialize();
    
    return this;

  } /* end jQuery.prototype.date_selector */

}(jQuery) /* p.s. No dog balls. */ );



    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
