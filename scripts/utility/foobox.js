/**!
 * FooBox - A jQuery plugin for responsive lightboxes with social sharing
 * @version 2.0.3
 * @link http://fooplugins.com/plugins/foobox-jquery
 * @copyright Steven Usher & Brad Vincent 2013
 * @license Released under the MIT license.
 * You are free to use FooBox jQuery in personal projects (excluding WordPress plugins and themes) as long as this copyright header is left intact.
 * Restriction 1: you may not create a WordPress plugin that bundles FooBox jQuery (rather use http://fooplugins.com/plugins/foobox).
 * Restriction 2: you may only bundle FooBox jQuery within a WordPress theme if you have a developer license.
 */

/**!
 * FooBox Captions - An addon providing captions for the FooBox plugin
 * @version 2.0.0
 * @copyright Steven Usher & Brad Vincent 2013
 */

/**!
 * FooBox Deeplinking - An addon providing deeplinking URL support for the FooBox plugin
 * @version 2.0.0
 * @copyright Steven Usher & Brad Vincent 2013
 */

/**!
 * FooBox Events - An addon providing providing backwards compatibility support for the FooBox V2 plugin by raising V1 events
 * @version 2.0.0
 * @copyright Steven Usher & Brad Vincent 2013
 */

/**!
 * FooBox Fullscreen - An addon providing fullscreen support for the FooBox plugin
 * @version 2.0.0
 * @copyright Steven Usher & Brad Vincent 2013
 */

/**!
 * FooBox Keyboard - An addon providing simple keyboard support for the FooBox plugin
 * @version 2.0.0
 * @copyright Steven Usher & Brad Vincent 2013
 */

/**!
 * FooBox Responsive (REQUIRED) - An addon providing responsive support for the FooBox plugin.
 * This addon is required for FooBox to operate correctly and should always be loaded.
 * @version 2.0.0
 * @copyright Steven Usher & Brad Vincent 2013
 */

/**!
 * FooBox Slideshow - An addon providing slideshow support for the FooBox plugin
 * @version 2.0.0
 * @copyright Steven Usher & Brad Vincent 2013
 */

/**!
 * FooBox Social - An addon providing social sharing support for the FooBox plugin
 * @version 2.0.0
 * @copyright Steven Usher & Brad Vincent 2013
 */

/**!
 * FooBox Swipe - An addon providing simple swipe support for the FooBox plugin
 * @version 2.0.0
 * @copyright Steven Usher & Brad Vincent 2013
 */

/**!
 * FooBox Wordpress - An addon providing Wordpress support for the FooBox plugin
 * @version 2.0.0
 * @copyright Steven Usher & Brad Vincent 2013
 */

/**!
 * FooBox HtmlHandler - A handler providing support for HTML items for the FooBox plugin.
 * @version 2.0.0
 * @copyright Steven Usher & Brad Vincent 2013
 */

/**!
 * FooBox IframeHandler - A handler providing support for iframe items for the FooBox plugin.
 * @version 2.0.0
 * @copyright Steven Usher & Brad Vincent 2013
 */

/**!
 * FooBox ImageHandler - A handler providing support for image items for the FooBox plugin.
 * @version 2.0.0
 * @copyright Steven Usher & Brad Vincent 2013
 */

/**!
 * FooBox VideoHandler - A handler providing support for video items for the FooBox plugin.
 * @version 2.0.0
 * @copyright Steven Usher & Brad Vincent 2013
 */

define(function(e,t,n){(function(e,t,n,r){if(!e||!t)return;t.FooBox={defaults:{affiliate:{enabled:!0,prefix:"Powered by ",url:"http://fooplugins.com/plugins/foobox/"},closeOnOverlayClick:!0,containerCssClass:"fbx-instance",countMessage:"item %index of %total",error:"Could not load the item",excludes:".fbx-link, .nofoobox",externalSelector:"a[data-foobox],input[data-foobox]",fitToScreen:!1,hideScrollbars:!0,loadDelay:0,loaderTimeout:650,modalClass:"",preload:!1,rel:"foobox",resizeSpeed:300,selector:"a",showButtons:!0,showCount:!0,style:"fbx-rounded",theme:"fbx-light",transitionInSpeed:200,transitionOutSpeed:200},version:"2.0.2",instances:[],ready:function(e){/in/.test(document.readyState)?setTimeout("FooBox.ready("+e+")",9):e()}},FooBox.format=function(e,t,n){var r=arguments[0],i,s;for(i=0;i<arguments.length-1;i++)s=new RegExp("\\{"+i+"\\}","gm"),r=r.replace(s,arguments[i+1]);return r},FooBox.browser={isIE:!1,version:0,css:null,check:function(){if(navigator.appVersion.indexOf("MSIE")===-1)return;FooBox.browser.isIE=!0,FooBox.browser.version=parseFloat(navigator.appVersion.split("MSIE")[1]),FooBox.browser.css=FooBox.format("fbx-ie fbx-ie{0}",FooBox.browser.version)},supportsTransitions:function(){var e=document.body||document.documentElement,t=e.style,n="transition",r;if(typeof t[n]=="string")return!0;r=["Moz","Webkit","Khtml","O","ms"],n=n.charAt(0).toUpperCase()+n.substr(1);for(var i=0;i<r.length;i++)if(typeof t[r[i]+n]=="string")return!0;return!1}},FooBox.browser.check(),n||(n={}),n.log=n.log||function(){},n.warn=n.warn||function(){},n.error=n.error||function(){},n.info=n.info||function(){};var i={write:function(){n.log(FooBox.format.apply(i,arguments))},error:function(){arguments.length===1&&arguments[0]instanceof Error?n.error(arguments[0]):n.error(FooBox.format.apply(i,arguments))}};jQuery.Event.prototype.fb={instance:null,modal:null,options:null,handled:!1},FooBox.raise=function(t,n,r){r=r||{};var i=e.Event(n);return i.fb={},i.fb.instance=t,i.fb.modal=t.modal.element,i.fb.options=t.options,i.fb.handled=!1,e.extend(!0,i.fb,r),t.element.one(n,function(e){e.stopPropagation()}).trigger(i),i},FooBox.options={isMultipart:function(e,t){return typeof e=="string"&&e.length>0&&e.indexOf(t)!==-1},hasProperties:function(e){if(typeof e!="object")return!1;var t;for(t in e)if(e.hasOwnProperty(t))return!0;return!1},get:function(e,t){if(FooBox.options.isMultipart(t,".")){var n=t.substring(0,t.indexOf(".")),r=t.substring(t.indexOf(".")+1);return e[n]=e[n]||{},FooBox.options.get(e[n],r)}return e[t]},set:function(e,t,n){if(FooBox.options.isMultipart(t,".")){var r=t.substring(0,t.indexOf(".")),i=t.substring(t.indexOf(".")+1);e[r]=e[r]||{},FooBox.options.set(e[r],i,n)}else e[t]=n},merge:function(e,t,n){var r=Array.prototype.slice.call(arguments),i;e=r.shift(),t=r.shift(),FooBox.options._merge(e,t);for(i=0;i<r.length;i++)n=r[i],FooBox.options._merge(e,n);return e},_merge:function(t,n){var r;for(r in n)n.hasOwnProperty(r)&&(FooBox.options.hasProperties(n[r])&&!e.isArray(n[r])?(t[r]=t[r]||{},FooBox.options._merge(t[r],n[r])):e.isArray(n[r])?(t[r]=[],e.extend(!0,t[r],n[r])):t[r]=n[r])}},FooBox.addons={registered:[],validate:function(t){return e.isFunction(t)?!0:(i.error('Expected type "function", received type "{0}".',typeof t),!1)},register:function(t,n){return FooBox.addons.validate(t)?(FooBox.addons.registered.push(t),typeof n=="object"&&e.extend(!0,FooBox.defaults,n),!0):(i.error("Failed to register the addon."),!1)},load:function(e){var t=[],n,r;for(r=0;r<FooBox.addons.registered.length;r++)try{n=FooBox.addons.registered[r],t.push(new n(e))}catch(s){i.error(s)}return t},call:function(t,n,r,s){var o=Array.prototype.slice.call(arguments),u;t=o.shift(),n=o.shift();for(var a=0;a<t.addons.length;a++)try{u=t.addons[a];if(!e.isFunction(u[n]))continue;u[n].apply(u,o)}catch(f){i.error(f)}}},FooBox.handlers={registered:[],validate:function(t){if(!e.isFunction(t))return i.error('Expected type "function", received type "{0}".',typeof t),!1;var n=new t;return e.isFunction(n.handles)?e.isFunction(n.defaults)?e.isFunction(n.parse)?e.isFunction(n.load)?e.isFunction(n.getSize)?e.isFunction(n.hasChanged)?e.isFunction(n.preload)?!0:(i.error('The required "preload" method is not implemented.'),!1):(i.error('The required "hasChanged" method is not implemented.'),!1):(i.error('The required "getSize" method is not implemented.'),!1):(i.error('The required "load" method is not implemented.'),!1):(i.error('The required "parse" method is not implemented.'),!1):(i.error('The required "defaults" method is not implemented.'),!1):(i.error('The required "handles" method is not implemented.'),!1)},register:function(t,n){return FooBox.handlers.validate(t)?(FooBox.handlers.registered.push(t),typeof n=="object"&&e.extend(!0,FooBox.defaults,n),!0):(i.error("Failed to register the handler."),!1)},load:function(e){var t=[],n;for(var r=0;r<FooBox.handlers.registered.length;r++)try{n=FooBox.handlers.registered[r],t.push(new n(e))}catch(s){i.error(s)}return t},call:function(t,n,r,s){var o=Array.prototype.slice.call(arguments),u;t=o.shift(),n=o.shift();for(var a=0;a<t.handlers.length;a++)try{u=t.handlers[a];if(!e.isFunction(u[n]))continue;u[n].apply(u,o)}catch(f){i.error(f)}},get:function(e,t){var n;for(n=0;n<e.handlers.length;n++)if(e.handlers[n].type==t)return e.handlers[n];return null}},FooBox.Item=function(t,n,r){this.type=t,this.element=n instanceof jQuery?n:e(n),this.handler=r,this.width=null,this.height=null,this.url=null,this.title=null,this.description=null,this.content=null,this.placeholder=null,this.selector=null,this.image=null,this.deeplink=null,this.video_id=null,this.video_type=null,this.video_url=null,this.video_valid=null,this.preloaded=!1,this.error=!1,this.fullscreen=!1,this.overflow=!1,this.captions=!1,this.social=!1},FooBox.Size=function(e,t){this.width=typeof e=="number"?e:parseInt(e,0),this.height=typeof t=="number"?t:parseInt(t,0)},FooBox.Timer=function(){this.id=null,this.busy=!1;var e=this;this.start=function(t,n,r){r=r||t,e.stop(),e.id=setTimeout(function(){t.call(r),e.id=null,e.busy=!1},n),e.busy=!0},this.stop=function(){if(e.id===null||e.busy===!1)return;clearTimeout(e.id),e.id=null,e.busy=!1}},e.fn.foobox=function(){var t=Array.prototype.slice.call(arguments),n=t.shift(),i,s;if(typeof n=="undefined"||typeof n=="object")return this.each(function(){var t=e(this).data("foobox_instance");t instanceof FooBox.Instance?t.reinit(n):(t=new FooBox.Instance,t.init(this,n),e(this).data("foobox_instance",t))});if(typeof n=="string"&&n.toLowerCase()!=="option")return n==="init"?this:this.each(function(){var r=e(this).data("foobox_instance");return r instanceof FooBox.Instance?(e.isFunction(r[n])&&r[n].apply(r,t),!0):!0});if(typeof n=="string"&&n.toLowerCase()==="option"){var o,u,a,f=[];return i=t.shift(),s=t.shift(),a=typeof i=="string"&&typeof s=="undefined",o=typeof i=="string"&&typeof s!="undefined",u=typeof i=="object"&&typeof s=="undefined",this.each(function(){var t=e(this).data("foobox_instance");return t instanceof FooBox.Instance?(t.options?(a&&f.push(FooBox.options.get(t.options,i)),o&&FooBox.options.set(t.options,i,s),u&&FooBox.options.merge(t.options,i),(o||u)&&t.reinit(t.options)):a&&f.push(r),!0):!0}),a?f.length<=1?f.shift():f:this}return this},FooBox.Modal=function(t){this.FooBox=t,this.element=null,this.loaderTimeout=new FooBox.Timer,this._first=!1;var n=this;this.init=function(e,t){n.setup.html(),n.setup.options(t),n.setup.bind()},this.reinit=function(e){n.setup.options(e)},this.setup={html:function(){if(n.element instanceof jQuery)return;n.element=e('<div class="fbx-modal"></div>'),n.element.append('<div class="fbx-inner-spacer"></div>');var t=e('<div class="fbx-stage"></div>');t.append('<div class="fbx-item-current"></div>'),t.append('<div class="fbx-item-next"></div>');var r=e('<div class="fbx-inner"></div>');r.append(t),r.append('<a href="#prev" class="fbx-prev fbx-btn-transition"></a>'),r.append('<div class="fbx-credit"><a target="_blank" href=""><em></em><span> FooBox</span></a></div>'),r.append('<span class="fbx-count" />'),r.append('<a href="#next" class="fbx-next fbx-btn-transition"></a>'),r.append('<a href="#close" class="fbx-close fbx-btn-transition"></a>'),n.element.append('<div class="fbx-loader"><div></div></div>'),n.element.append(r),n.FooBox.raise("foobox.setupHtml"),e("body").append(n.element)},options:function(e){var t;n.element.removeClass().addClass("fbx-modal").addClass(n.FooBox.element.data("style")||e.style).addClass(n.FooBox.element.data("theme")||e.theme).addClass(e.modalClass),FooBox.browser.isIE&&FooBox.browser.version<9&&n.element.addClass(FooBox.browser.css),t=e.affiliate.enabled?"":"none",n.element.find(".fbx-credit").css("display",t),e.affiliate.enabled&&(n.element.find(".fbx-credit > a").attr("href",e.affiliate.url),n.element.find(".fbx-credit > a > em").text(e.affiliate.prefix)),t=e.showCount&&n.FooBox.items.multiple()?"":"none",n.element.find(".fbx-count").css("display",t),t=e.showButtons&&n.FooBox.items.multiple()?"":"none",n.element.find(".fbx-prev, .fbx-next").css("display",t),n.FooBox.raise("foobox.setupOptions")},bind:function(){n.FooBox.options.closeOnOverlayClick==1&&n.element.unbind("click.foobox").bind("click.foobox",function(t){n.FooBox.options.closeOnOverlayClick==1&&e(t.target).is(".fbx-modal")&&n.close()}),n.element.find(".fbx-close").unbind("click.foobox").bind("click.foobox",function(e){return e.preventDefault(),n.close(),!1}).end().find(".fbx-prev").unbind("click.foobox").bind("click.foobox",function(e){return e.preventDefault(),n.prev(),!1}).end().find(".fbx-next").unbind("click.foobox").bind("click.foobox",function(e){return e.preventDefault(),n.next(),!1})}},this.prioritize=function(){FooBox.instances.length>1&&n.element.nextAll(".fbx-modal:last").after(n.element)},this.preload=function(){if(n.FooBox.options.preload!=1)return;var e=n.FooBox.items.prev();e.handler.preload(e);var t=n.FooBox.items.next();t.handler.preload(t)},this.show=function(t){function u(e){n.loaderTimeout.stop(),n.element.find(".fbx-loader").hide(),i.error(e);var s=n.FooBox.raise("foobox.onError",{error:e});if(s.fb.handled==1)return;var o=n.FooBox.items.error(r.index);o!=null&&n.show(t)}t=t||!1,n._first=t,e("body").addClass("fbx-active"),n.FooBox.options.hideScrollbars&&e("body").css("overflow","hidden");var r=n.FooBox.items.current();r.error==1?n.element.addClass("fbx-error"):n.element.removeClass("fbx-error"),n.element.is(":visible")||(n.prioritize(),n.FooBox.raise("foobox.beforeShow",{item:r}),n.element.find(".fbx-inner").hide().css({width:"100px",height:"100px","margin-top":"-50px","margin-left":"-50px"}).end().show(),n.FooBox.raise("foobox.afterShow",{item:r}));var s=n.element.find(".fbx-item-current"),o=n.element.find(".fbx-item-next");o.hide().css("opacity","0"),n.element.find(".fbx-count").text(n.FooBox.options.countMessage.replace("%index",""+(n.FooBox.items.indexes.current+1)).replace("%total",""+n.FooBox.items.array.length));var a=n.FooBox.raise("foobox.beforeLoad",{item:r});if(a.fb.handled==1)return;if(r.handler.hasChanged(r)){var f=r.index,l=r.element.get(0);r=r.handler.parse(r.element),l.index=r.index=f,n.FooBox.items.array[f]=r}n.preload(),n.loaderTimeout.start(function(){n.element.addClass("fbx-loading").find(".fbx-loader").show()},n.FooBox.options.loaderTimeout),setTimeout(function(){r.handler.load(r,o,function(e){n.transitionOut(s,function(){n.resize(e,function(e){r.overflow==1&&(e.width<r.width*.8||e.height<r.height*.8)?o.find(".fbx-item").css({width:r.width,height:r.height}):o.find(".fbx-item").css({width:"",height:""}),n.loaderTimeout.stop(),n.element.removeClass("fbx-loading").find(".fbx-loader").hide(),n.element.find(".fbx-inner").show(),o.show(),n.transitionIn(o,function(){o.add(s).toggleClass("fbx-item-next fbx-item-current"),r.overflow==1?o.add(s).css("overflow",""):o.add(s).css("overflow","hidden"),s.empty(),n.FooBox.raise("foobox.afterLoad",{item:r})},u)},u)},u)},u)},n.FooBox.options.loadDelay)},this.resize=function(t,r,i){try{if(!n.element.is(":visible"))return;if(t.width===0||t.height===0){e.isFunction(i)&&i(FooBox.format("Invalid size supplied. Width = {0}, Height = {1}",t.width,t.height));return}var s=n.FooBox.items.current();n.FooBox.raise("foobox.beforeResize",{modal:n.element,item:s});var o=n.element.find(".fbx-inner"),u=n.element.find(".fbx-inner-spacer"),a=n.FooBox.options.showButtons&&n.FooBox.items.multiple(),f=parseInt(u.css("padding-top"),0),l=parseInt(u.css("padding-bottom"),0),c=parseInt(u.css("padding-left"),0),h=parseInt(u.css("padding-right"),0),p=parseInt(o.css("border-top-width"),0),d=parseInt(o.css("border-bottom-width"),0),v=parseInt(o.css("border-left-width"),0),m=parseInt(o.css("border-right-width"),0),g=parseInt(o.css("padding-left"),0),y=parseInt(o.css("height"),0),b=parseInt(o.css("width"),0),w=(a?f+l:f*2)+g*2+p+d,E=c+h+g*2+v+m,S=n.element.height()-w,x=n.element.width()-E,T=x/t.width;t.height*T>S&&(T=S/t.height);var N=t.height,C=t.width;if(n.FooBox.options.fitToScreen===!0||t.height>S||t.width>x)N=Math.floor(t.height*T),C=Math.floor(t.width*T);N<100&&(N=100),C<100&&(C=100);function k(t,i){n.FooBox.raise("foobox.afterResize",{modal:n.element,item:s}),e.isFunction(r)&&r(new FooBox.Size(t,i))}if(N!==y||C!==b){var L=-(N/2+g+(p+d)/2+(a?l-f:0)),A=-(C/2+g+(v+m)/2);if(FooBox.browser.supportsTransitions()){var O=n.FooBox.options.resizeSpeed/1e3;o.css({WebkitTransition:"all "+O+"s ease-in-out",MozTransition:"all "+O+"s ease-in-out",MsTransition:"all "+O+"s ease-in-out",OTransition:"all "+O+"s ease-in-out",transition:"all "+O+"s ease-in-out"}),o.css({height:N,width:C,"margin-top":L,"margin-left":A}),setTimeout(function(){o.css({WebkitTransition:"",MozTransition:"",MsTransition:"",OTransition:"",transition:""}),k(C,N)},n.FooBox.options.resizeSpeed)}else o.animate({height:N,width:C,"margin-top":L,"margin-left":A},n.FooBox.options.resizeSpeed,function(){k(C,N)})}else k(b,y)}catch(M){e.isFunction(i)&&i(M)}},this.transitionOut=function(t,r,i){try{t.animate({opacity:0},t.is(":visible")?n.FooBox.options.transitionOutSpeed:0,function(){e.isFunction(r)&&r()})}catch(s){e.isFunction(i)&&i(s)}},this.transitionIn=function(t,r,i){try{t.animate({opacity:1},n.FooBox.options.transitionInSpeed,function(){e.isFunction(r)&&r()})}catch(s){e.isFunction(i)&&i(s)}},this.close=function(){n.element.hide(),n.FooBox.options.hideScrollbars&&e("body").css("overflow",""),e("body").removeClass("fbx-active"),n.FooBox.raise("foobox.close"),n.element.find(".fbx-item-current, .fbx-item-next").empty()},this.prev=function(e){n.FooBox.items.indexes.set(n.FooBox.items.indexes.prev);if(typeof e=="string"){var t=n.FooBox.items.current();while(t.type!=e)n.FooBox.items.indexes.set(n.FooBox.items.indexes.prev),t=n.FooBox.items.current()}n.show(!1),n.FooBox.raise("foobox.previous")},this.next=function(e){n.FooBox.items.indexes.set(n.FooBox.items.indexes.next);if(typeof e=="string"){var t=n.FooBox.items.current();while(t.type!=e)n.FooBox.items.indexes.set(n.FooBox.items.indexes.next),t=n.FooBox.items.current()}n.show(!1),n.FooBox.raise("foobox.next")}},FooBox.Instance=function(){this.id=FooBox.instances.push(this),this.element=null,this.options=e.extend(!0,{},FooBox.defaults),this.addons=FooBox.addons.load(this),this.handlers=FooBox.handlers.load(this),this.modal=new FooBox.Modal(this);var t=this;this.raise=function(e,n){return FooBox.raise(t,e,n)},this.init=function(n,r){t.element=n instanceof jQuery?n:e(n),t.options=FooBox.options.merge(t.options,r||{}),FooBox.addons.call(t,"preinit",t.element,t.options),t.setup.bind(),t.items.init(),t.modal.init(n,t.options),FooBox.handlers.call(t,"init",t.element,t.options),t.options.containerCssClass&&t.element.addClass(t.options.containerCssClass),t.raise("foobox.initialized")},this.reinit=function(e){t.options=FooBox.options.merge(t.options,e||{}),t.setup.bind(),t.items.init(!0),t.modal.reinit(t.options),FooBox.handlers.call(t,"reinit",t.options),t.raise("foobox.reinitialized")},this.setup={bind:function(){var n=e(t.element).data("foobox_instance");n instanceof FooBox.Instance||e(t.element).data("foobox_instance",t),e(t.options.externalSelector).unbind("click.fooboxExternal").bind("click.fooboxExternal",function(t){t.preventDefault();var r=e(this).data("foobox"),i=e(r);return n=i.data("foobox_instance"),i.length>0&&n instanceof FooBox.Instance&&n.modal instanceof FooBox.Modal&&n.modal.show(!0),!1})}},this.items={array:[],indexes:{prev:-1,current:0,next:1,direction:"*",set:function(e){var n=t.items.indexes.current;e=e||0,e=e>t.items.array.length-1?0:e<0?t.items.array.length-1:e;var r=e-1,i=e+1;t.items.indexes.current=e,t.items.indexes.prev=r<0?t.items.array.length-1:r,t.items.indexes.next=i>t.items.array.length-1?0:i,t.items.indexes.direction=t.items.indexes._direction(n,e,t.items.array.length-1)},_direction:function(e,t,n){return t==0&&e==n?">":t==n&&e==0?"<":t>e?">":t<e?"<":"*"}},new_array:function(n){n=n||!1;var r,i,s=0,o;if(n==1){if(t.items.array.length>0){for(var u=0;u<t.items.array.length;u++)r=t.items.array[u],r.element instanceof jQuery?r.element.parents(":first").length==0&&(t.items.array.splice(u,1),u-=1):r.option||(t.items.array.splice(u,1),u-=1);for(var a=0;a<t.items.array.length;a++)r=t.items.array[a],r.element instanceof jQuery?(o=r.element.get(0),o.index=r.index=a):r.index=a}}else t.items.array=[];if(e.isArray(t.options.items))for(var f=0;f<t.options.items.length;f++){r=t.options.items[f];if(t.items.indexOf(r)!=-1)continue;for(var l=0;l<t.handlers.length;l++)if(t.handlers[l].type==r.type){r.index=s,r.option=!0,r.handler=t.handlers[l],r.handler.defaults(r),i=t.raise("foobox.parseItem",{element:null,item:r}),t.items.array.push(i.fb.item),s++;break}}},init:function(e){e=e||!1,t.items.new_array(e),t.items.array.length>0&&!e||t.element.is(t.options.selector)&&!t.element.is(t.options.excludes)&&t.items.add(t.element)?t.element.unbind("click.item").bind("click.item",t.items.clicked):t.element.find(t.options.selector).not(t.options.excludes).unbind("click.item").filter(function(){return t.items.add(this)}).bind("click.item",t.items.clicked),t.items.rel(t.element)},rel:function(n){n=n instanceof jQuery?n:e(n);var r=n.attr("rel"),i=typeof t.options.rel=="string"?t.options.rel.length:0;r&&r.length>=i&&r.substr(0,i)==t.options.rel&&e('[rel="'+r+'"]').not(t.options.excludes).not(n).unbind("click.item").filter(function(){return t.items.add(this)}).bind("click.item",t.items.clicked)},indexOf:function(e,n){if(!e)return-1;n=n||"url";var r;for(r=0;r<t.items.array.length;r++){if(t.items.array[r][n]!=e[n])continue;return r}return-1},add:function(n){n=n instanceof jQuery?n:e(n);var r=t.items.parse(n);if(r===null)return!1;var i=n.get(0),s=t.items.indexOf(r);s!=-1?(r=t.items.array[s],i.index=r.index):i.index=r.index=t.items.array.push(r)-1;var o=n.addClass("fbx-link").data("foobox_instance");return o instanceof jQuery||n.data("foobox_instance",t),!0},get:function(n){n=n instanceof jQuery?n:e(n);var r=null,i=n.get(0).index;return i&&i>0&&i<=t.items.array.length-1&&(r=t.items.array[i]),r},parse:function(n){n=n instanceof jQuery?n:e(n);var r,i;for(var s=0;s<t.handlers.length;s++)if(t.handlers[s].handles(n,t.element)){r=t.handlers[s].parse(n),i=t.raise("foobox.parseItem",{element:n,item:r});break}return typeof i!="undefined"&&i.fb.item?i.fb.item:null},error:function(n){if(t.items.array.length>n&&t.items.array[n].error==1)return t.items.array[n];var r=FooBox.handlers.get(t,"html"),i,s,o=!1;if(r==null)return null;if(t.options.error.match(/^#/i)!==null&&e(t.options.error).length>0)i=e(t.options.error),o=!0;else{var u=FooBox.format('<div class="fbx-error-msg" data-width="240" data-height="240"><span></span><p>{0}</p></div>',t.options.error);i=e(u)}return s=new FooBox.Item(r.type,i.get(0),r),s.selector=o==1?t.options.error:null,s.index=n,s.error=!0,s.title=i.data("title")||null,s.description=i.data("description")||null,s.width=i.data("width")||null,s.height=i.data("height")||null,s.content=o==1?null:i,s.fullscreen=!0,t.items.array[n]=s,s},current:function(){return t.items.array[t.items.indexes.current]},prev:function(){return t.items.array[t.items.indexes.prev]},next:function(){return t.items.array[t.items.indexes.next]},multiple:function(){return t.items.array.length>1},clicked:function(e){return e.preventDefault(),t.items.indexes.set(this.index),t.modal.show(!0),!1}}},FooBox.open=function(t){var n=document.createElement("a");e(n).foobox(t);var r=e(n).data("foobox_instance");return r.modal.show(!0),r}})(jQuery,window,window.console),function(e,t){var n={captions:{animation:"slide",enabled:!0,descSource:"find",hoverDelay:300,maxHeight:.4,onlyShowOnHover:!1,overrideDesc:!1,overrideTitle:!1,prettify:!1,titleSource:"image_find"}};t.Captions=function(n){this.FooBox=n,this.timers={hover:new t.Timer};var r=this;this.preinit=function(e){e.unbind({"foobox.initialized foobox.reinitialized":r.handlers.initialized,"foobox.setupHtml":r.handlers.setupHtml,"foobox.setupOptions":r.handlers.setupOptions,"foobox.parseItem":r.handlers.parseItem,"foobox.onError":r.handlers.onError}).bind({"foobox.initialized foobox.reinitialized":r.handlers.initialized,"foobox.setupHtml":r.handlers.setupHtml,"foobox.setupOptions":r.handlers.setupOptions,"foobox.parseItem":r.handlers.parseItem,"foobox.onError":r.handlers.onError})},this.handlers={initialized:function(e){e.fb.instance.element.unbind({"foobox.beforeLoad":r.handlers.beforeLoad,"foobox.afterLoad":r.handlers.afterLoad,"foobox.afterResize":r.handlers.afterResize,"foobox.closeOverlays":r.handlers.closeOverlays}),e.fb.modal.undelegate("mouseenter.captions mouseleave.captions").find(".fbx-item-current, .fbx-item-next").unbind("click.captions"),e.fb.options.captions.enabled===!0&&(e.fb.instance.element.bind({"foobox.beforeLoad":r.handlers.beforeLoad,"foobox.afterLoad":r.handlers.afterLoad,"foobox.afterResize":r.handlers.afterResize,"foobox.closeOverlays":r.handlers.closeOverlays}),e.fb.modal.find(".fbx-item-current, .fbx-item-next").bind("click.captions",r.handlers.toggleCaptions),e.fb.options.captions.onlyShowOnHover===!0&&e.fb.modal.delegate(".fbx-inner:not(:has(.fbx-item-error))","mouseenter.captions",r.handlers.mouseenter).delegate(".fbx-inner:not(:has(.fbx-item-error))","mouseleave.captions",r.handlers.mouseleave))},closeOverlays:function(e){e.fb.modal.addClass("fbx-captions-hidden"),r.hide()},toggleCaptions:function(){return r.FooBox.modal.element.hasClass("fbx-error")?!0:(r.FooBox.modal.element.find(".fbx-caption").is(":visible")?(r.FooBox.modal.element.addClass("fbx-captions-hidden"),r.hide()):(r.FooBox.modal.element.removeClass("fbx-captions-hidden"),r.show()),!0)},mouseenter:function(){r.timers.hover.start(function(){r.show()},r.FooBox.options.captions.hoverDelay)},mouseleave:function(){r.timers.hover.start(function(){r.hide()},r.FooBox.options.captions.hoverDelay)},setupHtml:function(e){e.fb.modal.find(".fbx-stage").append('<div class="fbx-caption"></div>')},setupOptions:function(e){var t=e.fb.options.captions.enabled&&!e.fb.options.captions.onlyShowOnHover?"":"none";e.fb.modal.find(".fbx-caption").css("display",t)},beforeLoad:function(e){if(e.fb.options.captions.onlyShowOnHover==1)return;e.fb.modal.find(".fbx-caption").css("display","none")},afterLoad:function(e){if(e.fb.options.captions.onlyShowOnHover==1){r.update();return}r.show()},afterResize:function(){r.checkHeight()},onError:function(e){e.fb.modal.find(".fbx-caption").css("display","none")},parseItem:function(n){var i=n.fb.options.captions;if(!n.fb.item.captions||i.enabled==0)return;var s="",o,u;if(n.fb.element!=null){var a=e(n.fb.element).data("titleSource")||e(n.fb.instance.element).data("titleSource")||i.titleSource,f=e(n.fb.element).data("descSource")||e(n.fb.instance.element).data("descSource")||i.descSource;o=n.fb.element.data("title")||r.text(n.fb.element,a),u=n.fb.element.data("description")||r.text(n.fb.element,f)}else o=n.fb.item.title,u=n.fb.item.description;o&&o==u&&(u=null),s=typeof o=="string"&&o.length>0?t.format('<div class="fbx-caption-title">{0}</div>',o):s,s=typeof u=="string"&&u.length>0?s+t.format('<div class="fbx-caption-desc">{0}</div>',u):s,n.fb.item.title=o,n.fb.item.description=u,n.fb.item.caption=s,n.fb.instance.raise("foobox.createCaption",{element:n.fb.element,item:n.fb.item})}},this.text=function(t,n){var i;switch(n){case"find":i=e.trim(t.attr("title"))||e.trim(t.find("img:first").attr("title"))||e.trim(t.find("img:first").attr("alt"));break;case"image_find":i=e.trim(t.find("img:first").attr("title")||t.find("img:first").attr("alt"));break;case"image":i=e.trim(t.find("img:first").attr("title"));break;case"image_alt":i=e.trim(t.find("img:first").attr("alt"));break;case"anchor":i=e.trim(t.attr("title"));break;default:i=null}return r.FooBox.options.captions.prettify&&(i=r.prettifier(i)),i},this.hide=function(){var e=r.FooBox.items.current(),t=r.FooBox.modal.element.find(".fbx-caption");if(!r.FooBox.options.captions.enabled||!e.captions||typeof e.caption!="string"||e.caption.length==0){t.css("display","none");return}switch(r.FooBox.options.captions.animation){case"fade":t.stop(!0,!0).fadeOut(400);break;case"slide":t.stop(!0,!0).slideUp(400);break;default:t.css("display","none")}},this.show=function(){var e=r.FooBox.items.current(),t=r.FooBox.modal.element.find(".fbx-caption");if(!r.FooBox.options.captions.enabled||!e.captions||typeof e.caption!="string"||e.caption.length==0||r.FooBox.modal.element.hasClass("fbx-captions-hidden")){t.css("display","none");return}r.update(),r.checkHeight();switch(r.FooBox.options.captions.animation){case"fade":t.stop(!0,!0).fadeIn(500);break;case"slide":t.stop(!0,!0).slideDown(500);break;default:t.css("display","")}},this.update=function(){var n=r.FooBox.items.current(),i=r.FooBox.modal.element.find(".fbx-caption");i.html(n.caption).find('a[href^="#"]').filter(function(){var n=e(this).attr("href"),r=e(n),i=r.data("foobox_instance");return r.length>0&&i instanceof t.Instance?(e(this).data("hrefTarget",r.get(0)),!0):!1}).unbind("click.captions").bind("click.captions",function(n){n.preventDefault();var i=e(this).data("hrefTarget"),s=e(i).data("foobox_instance");return s instanceof t.Instance&&(r.FooBox.modal.close(),s.items.indexes.set(i.index),s.modal.show()),!1}),e('<a href="#close_overlays" class="fbx-close-overlays">&times;</a>').bind("click.captions",function(e){return e.preventDefault(),r.FooBox.raise("foobox.closeOverlays"),!1}).prependTo(i)},this.checkHeight=function(){var e=r.FooBox.modal.element,t=r.FooBox.items.current();if(!r.FooBox.options.captions.enabled||!t.captions)return;var n=e.find(".fbx-caption"),i=n.find(".fbx-caption-desc");i.length>0&&n.outerHeight(!0)>e.find(".fbx-inner").height()*r.FooBox.options.captions.maxHeight?i.hide():i.show()},this.prettifier=function(e){return typeof e!="string"?null:(e=e.replace(/\s*-\d+/g,"").replace(/\s*_\d+/g,"").replace(/-/g," ").replace(/_/g," "),e=e.replace(/\w\S*/g,function(e){return e.indexOf("#")!=-1?e:e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}),e)}},t.addons.register(t.Captions,n)}(jQuery,window.FooBox),function(e,t){var n={deeplinking:{enabled:!0,prefix:"foobox"}};t.DeepLinking=function(n){this.FooBox=n,this.timers={display:new t.Timer};var r=this;this.preinit=function(e){e.unbind("foobox.initialized foobox.reinitialized",r.handlers.initialized).bind("foobox.initialized foobox.reinitialized",r.handlers.initialized)},this.handlers={initialized:function(e){e.fb.instance.element.unbind({"foobox.afterLoad":r.handlers.afterLoad,"foobox.close":r.handlers.close});if(e.fb.options.deeplinking.enabled===!0){e.fb.instance.element.bind({"foobox.afterLoad":r.handlers.afterLoad,"foobox.close":r.handlers.close});var t=r.hash.get();if(t&&r.FooBox.id==t.id){var n=r.FooBox.items.array[t.index];r.FooBox.raise("foobox.hasHash",{item:n}),r.timers.display.start(function(){r.FooBox.items.indexes.set(n.index),r.FooBox.modal.show(!0)},100)}}},afterLoad:function(){r.hash.set()},close:function(){r.hash.clear()}},this.hash={get:function(){if(location.hash.indexOf("#"+r.FooBox.options.deeplinking.prefix)===-1)return null;var t=location.hash;t.substr(-1)=="/"&&(t=t.substr(0,t.length-1));var n=t.match(/\/([^\/]+)\/?([^\/]+)?$/),i=n[1],s=n[2],o=-1;typeof s=="string"&&e.each(r.FooBox.items.array,function(e,t){return t.deeplink&&t.deeplink===s?(o=e,!1):!0}),o==-1&&(o=i);var u=t.substring(0,t.indexOf("/"));return u=u.replace("#"+r.FooBox.options.deeplinking.prefix+"-",""),{id:u,index:o}},set:function(){var e=r.FooBox.items.current(),t=r.FooBox.options.deeplinking.prefix+"-"+r.FooBox.id+"/"+e.index,n=e.deeplink;n&&(t+="/"+n),window.location.replace((""+window.location).split("#")[0]+"#"+t)},clear:function(){window.location.replace((""+window.location).split("#")[0]+"#/")}}},t.addons.register(t.DeepLinking,n)}(jQuery,window.FooBox),function(e,t){t.Events=function(n){this.FooBox=n;var r=this;this.preinit=function(e){e.unbind({"foobox.afterLoad":r.handlers.foobox_image_onload,"foobox.beforeLoad":r.handlers.foobox_image_custom_caption}).bind({"foobox.afterLoad":r.handlers.foobox_image_onload,"foobox.beforeLoad":r.handlers.foobox_image_custom_caption})},this.raise=function(t,n){n=n||{};var i=e.Event(t);return e.extend(!0,i,n),r.FooBox.element.trigger(i),i},this.handlers={foobox_image_onload:function(e){e.fb.item.type=="image"&&r.raise("foobox_image_onload",{thumb:{jq:e.fb.item.element,target:e.fb.item.url}})},foobox_image_custom_caption:function(e){var n=r.raise("foobox_image_custom_caption",{thumb:e.fb.item.element,title:e.fb.item.title,desc:e.fb.item.description,handled:!1});if(n.handled==1){e.fb.item.title=n.title,e.fb.item.description=n.desc;var i=typeof e.fb.item.title=="string"&&e.fb.item.title.length>0?t.format('<div class="fbx-caption-title">{0}</div>',e.fb.item.title):"";i=typeof e.fb.item.description=="string"&&e.fb.item.description.length>0?i+t.format('<div class="fbx-caption-desc">{0}</div>',e.fb.item.description):i,e.fb.item.caption=i}}}},t.addons.register(t.Events)}(jQuery,window.FooBox),function(e,t){var n={fullscreen:{enabled:!1,force:!1,useAPI:!0}};t.Fullscreen=function(t){this.FooBox=t;var n=this,r=!1;this.preinit=function(e,t){e.unbind({"foobox.initialized foobox.reinitialized":n.handlers.initialized,"foobox.setupHtml":n.handlers.setupHtml,"foobox.setupOptions":n.handlers.setupOptions,"foobox.close":n.handlers.onClose,"foobox.keydown":n.handlers.onKeydown}).bind({"foobox.initialized foobox.reinitialized":n.handlers.initialized,"foobox.setupHtml":n.handlers.setupHtml,"foobox.setupOptions":n.handlers.setupOptions,"foobox.close":n.handlers.onClose,"foobox.keydown":n.handlers.onKeydown})},this.handlers={initialized:function(t){t.fb.instance.element.unbind({"foobox.afterShow":n.handlers.afterShow,"foobox.beforeLoad":n.handlers.beforeLoad}),t.fb.modal.find(".fbx-fullscreen-toggle").unbind("click.fullscreen",n.handlers.onClick),e(document).unbind("webkitfullscreenchange mozfullscreenchange fullscreenchange",n.handlers.onFullscreenChange).bind("webkitfullscreenchange mozfullscreenchange fullscreenchange",n.handlers.onFullscreenChange),t.fb.options.fullscreen.enabled===!0&&(t.fb.instance.element.bind({"foobox.beforeLoad":n.handlers.beforeLoad}),t.fb.modal.find(".fbx-fullscreen-toggle").bind("click.fullscreen",n.handlers.onClick)),t.fb.instance.element.bind({"foobox.afterShow":n.handlers.afterShow})},setupHtml:function(e){e.fb.modal.find(".fbx-inner").append('<a href="#fullscreen" class="fbx-fullscreen-toggle fbx-btn-transition"></a>')},setupOptions:function(e){e.fb.options.fullscreen.enabled==1?e.fb.modal.addClass("fbx-fullscreen"):e.fb.modal.removeClass("fbx-fullscreen"),e.fb.options.fullscreen.force==1&&e.fb.modal.find(".fbx-fullscreen-toggle").hide()},afterShow:function(e){e.fb.options.fullscreen.force===!0&&(n.FooBox.modal.element.addClass("fbx-fullscreen"),n.fullscreen.launch())},beforeLoad:function(e){if(e.fb.modal.hasClass("fbx-fullscreen-mode")&&e.fb.item.fullscreen!=1){e.fb.handled=!0;switch(e.fb.instance.items.indexes.direction){case"<":e.fb.instance.modal.prev();break;default:e.fb.instance.modal.next()}}else e.fb.item.fullscreen!=1?e.fb.modal.removeClass("fbx-fullscreen").find(".fbx-fullscreen-toggle").hide():e.fb.modal.addClass("fbx-fullscreen").find(".fbx-fullscreen-toggle").show()},onClick:function(e){return e.preventDefault(),n.FooBox.modal.element.hasClass("fbx-fullscreen-mode")?n.fullscreen.cancel():n.fullscreen.launch(),!1},onClose:function(){n.fullscreen.cancel()},onKeydown:function(e){e.fb.modal.hasClass("fbx-fullscreen-mode")&&e.fb.keyCode==27&&(n.fullscreen.cancel(),e.fb.options.fullscreen.force==1&&e.fb.instance.modal.close())},onFullscreenChange:function(){document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen?n.fullscreen.apply():n.fullscreen.remove()}},this.fullscreen={launch:function(){if(n.FooBox.options.fullscreen.useAPI===!0&&n.FooBox.options.fullscreen.force===!1){var e=n.FooBox.modal.element.get(0);e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():n.fullscreen.apply()}else n.fullscreen.apply()},cancel:function(){if(!n.FooBox.modal.element.hasClass("fbx-fullscreen-mode"))return;n.FooBox.options.fullscreen.useAPI===!0&&n.FooBox.options.fullscreen.force===!1?document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():n.fullscreen.remove():n.fullscreen.remove()},apply:function(){var e=n.FooBox.items.current();e&&(r=n.FooBox.options.closeOnOverlayClick,n.FooBox.options.closeOnOverlayClick=!1,n.FooBox.modal.element.addClass("fbx-fullscreen-mode"),n.FooBox.modal.resize(e.handler.getSize(e))),n.FooBox.raise("foobox.fullscreenEnabled")},remove:function(){var e=n.FooBox.items.current();e&&(n.FooBox.options.closeOnOverlayClick=r,n.FooBox.modal.element.removeClass("fbx-fullscreen-mode"),n.FooBox.modal.resize(e.handler.getSize(e))),n.FooBox.raise("foobox.fullscreenDisabled")}}},t.addons.register(t.Fullscreen,n)}(jQuery,window.FooBox),function(e,t){t.Keyboard=function(t){this.FooBox=t;var n=this;this.preinit=function(e){e.unbind("foobox.initialized foobox.reinitialized",n.handlers.initialized).bind("foobox.initialized foobox.reinitialized",n.handlers.initialized)},this.handlers={initialized:function(){e(document).unbind("keydown.foobox",n.handlers.onKeydown).bind("keydown.foobox",n.handlers.onKeydown)},onKeydown:function(e){var t=n.FooBox.modal;if(!t.element.is(":visible"))return!0;var r=e.which;return!t.element.hasClass("fbx-fullscreen-mode")&&r===27?t.close():n.FooBox.items.multiple()&&r===37?t.prev():n.FooBox.items.multiple()&&r===39&&t.next(),n.FooBox.raise("foobox.keydown",{keyCode:r}),!0}}},t.addons.register(t.Keyboard)}(jQuery,window.FooBox),function(e,t){var n={hideNavOnMobile:!1,resizeTimeout:300,breakpoints:{phone:480,tablet:1024}};t.BPInfo=function(t){this.width=window.innerWidth||(document.body?document.body.offsetWidth:0),this.height=window.innerHeight||(document.body?document.body.offsetHeight:0),this.orientation=this.width>this.height?"fbx-landscape":"fbx-portrait";var n=null,r;if(e.isArray(t))for(var i=0;i<t.length;i++){r=t[i];if(r&&r.width&&this.width<=r.width){n=r;break}}this.breakpoint=n==null?"fbx-desktop":n.name},t.Responsive=function(n){this.FooBox=n,this.breakpoint={values:[],names:""},this.timers={resize:new t.Timer};var r=this;this.preinit=function(e){e.unbind("foobox.initialized foobox.reinitialized",r.handlers.initialized).bind("foobox.initialized foobox.reinitialized",r.handlers.initialized)},this.handlers={initialized:function(){r.setup.breakpoints(),r.style(),e(window).unbind("resize.foobox",r.handlers.resize).bind("resize.foobox",r.handlers.resize)},resize:function(){r.timers.resize.start(function(){r.style();if(!r.FooBox.modal.element.is(":visible"))return;var e=r.FooBox.items.current(),t=e.handler.getSize(e);r.FooBox.modal.resize(t)},r.FooBox.options.resizeTimeout)}},this.setup={breakpoints:function(){r.breakpoint.values=[],r.breakpoint.names="";for(var e in r.FooBox.options.breakpoints)r.breakpoint.values.push({name:r.fixName(e),width:r.FooBox.options.breakpoints[e]}),r.breakpoint.names+=r.fixName(e)+" ";r.breakpoint.values.sort(function(e,t){return e.width-t.width})}},this.fixName=function(e){return/^fbx-[a-zA-Z0-9]/.test(e)?e:"fbx-"+e},this.style=function(){var e=new t.BPInfo(r.breakpoint.values),n=r.FooBox.modal.element;n.removeClass(r.breakpoint.names).removeClass("fbx-desktop fbx-landscape fbx-portrait").addClass(e.breakpoint).addClass(e.orientation),r.FooBox.options.hideNavOnMobile===!0?n.addClass("fbx-no-nav"):n.removeClass("fbx-no-nav")}},t.addons.register(t.Responsive,n)}(jQuery,window.FooBox),function(e,t){var n={slideshow:{autostart:!1,enabled:!0,imagesOnly:!1,mousestopTimeout:300,timeout:6e3,sensitivity:130,skipErrors:!1}};t.Slideshow=function(e){this.FooBox=e,this.autostart=!1,this.running=!1,this.paused=0,this.remaining=0,this.timers={mousestop:new t.Timer};var n=this,r=null;this.preinit=function(e,t){n.autostart=t.slideshow.autostart,e.unbind({"foobox.initialized foobox.reinitialized":n.handlers.initialized,"foobox.setupHtml":n.handlers.setupHtml,"foobox.setupOptions":n.handlers.setupOptions,"foobox.onError":n.handlers.onError}).bind({"foobox.initialized foobox.reinitialized":n.handlers.initialized,"foobox.setupHtml":n.handlers.setupHtml,"foobox.setupOptions":n.handlers.setupOptions,"foobox.onError":n.handlers.onError})},this.handlers={initialized:function(e){e.fb.instance.element.unbind({"foobox.beforeLoad":n.handlers.beforeLoad,"foobox.afterLoad":n.handlers.afterLoad,"foobox.close":n.handlers.onClose,"foobox.previous foobox.next":n.handlers.onChange,"foobox.keydown":n.handlers.onKeydown,"foobox.fullscreenEnabled":n.handlers.fullscreenEnabled,"foobox.fullscreenDisabled":n.handlers.fullscreenDisabled}),e.fb.modal.undelegate("click.slideshow").unbind("mousemove.foobox").find(".fbx-play, .fbx-pause").unbind("mouseenter.foobox mouseleave.foobox"),e.fb.options.slideshow.enabled===!0&&e.fb.instance.items.multiple()&&(e.fb.instance.element.bind({"foobox.beforeLoad":n.handlers.beforeLoad,"foobox.afterLoad":n.handlers.afterLoad,"foobox.close":n.handlers.onClose,"foobox.previous foobox.next":n.handlers.onChange,"foobox.keydown":n.handlers.onKeydown,"foobox.fullscreenEnabled":n.handlers.fullscreenEnabled,"foobox.fullscreenDisabled":n.handlers.fullscreenDisabled}),e.fb.modal.delegate(".fbx-play","click.slideshow",n.handlers.playClicked).delegate(".fbx-pause","click.slideshow",n.handlers.pauseClicked),e.fb.modal.hasClass("fbx-playpause-center")&&e.fb.modal.bind("mousemove.foobox",n.handlers.mousemove).find(".fbx-play, .fbx-pause").bind("mouseenter.foobox",n.handlers.mouseenter).bind("mouseleave.foobox",n.handlers.mouseleave))},setupHtml:function(e){if(e.fb.options.slideshow.enabled!==!0)return;e.fb.modal.find(".fbx-inner").append('<div class="fbx-progress"></div>').append('<a href="#playpause" class="fbx-play fbx-btn-transition"></a>')},setupOptions:function(e){if(e.fb.options.slideshow.enabled!==!0)return;var t=e.fb.options.showButtons!=1||!e.fb.instance.items.multiple()?"none":"";e.fb.modal.addClass("fbx-slideshow").find(".fbx-progress, .fbx-play, .fbx-pause").css("display",t)},beforeLoad:function(e){if(e.fb.modal.hasClass("fbx-fullscreen-mode")&&e.fb.modal.hasClass("fbx-playpause-center"))r=null,n.timers.mousestop.stop();else{var t=e.fb.options.showButtons!=1||!e.fb.instance.items.multiple()?"none":"";e.fb.modal.find(".fbx-play, .fbx-pause").css("display",t)}},afterLoad:function(){if(n.autostart!=1)return;n.start()},onError:function(e){if(e.fb.options.slideshow.skipErrors===!0&&e.fb.instance.modal._first===!1){e.fb.handled=!0;switch(e.fb.instance.items.indexes.direction){case"<":e.fb.instance.modal.prev(e.fb.options.slideshow.imagesOnly===!0?"image":null);break;default:e.fb.instance.modal.next(e.fb.options.slideshow.imagesOnly===!0?"image":null)}}else n.autostart==1&&n.start()},onClose:function(){n.stop(!1)},onChange:function(){n.stop(n.autostart==1||n.running==1)},onKeydown:function(e){return e.fb.keyCode!=32?!0:(e.preventDefault(),n.running==1?n.pause():n.start(),!1)},fullscreenEnabled:function(e){e.fb.modal.hasClass("fbx-fullscreen-mode")&&e.fb.modal.hasClass("fbx-playpause-center")&&n.timers.mousestop.start(function(){r=null,e.fb.modal.find(".fbx-play, .fbx-pause").fadeOut("fast")},n.FooBox.options.slideshow.mousestopTimeout)},fullscreenDisabled:function(e){var t=e.fb.options.showButtons!=1||!e.fb.instance.items.multiple()?"none":"";!e.fb.modal.hasClass("fbx-fullscreen-mode")&&e.fb.modal.hasClass("fbx-playpause-center")&&(e.fb.modal.find(".fbx-play, .fbx-pause").removeClass("fbx-active").css("display",t),r=null,n.timers.mousestop.stop())},playClicked:function(e){return e.preventDefault(),n.start(),!1},pauseClicked:function(e){return e.preventDefault(),n.pause(),!1},mousemove:function(e){var t=n.FooBox.options.slideshow.sensitivity,i=n.FooBox.modal.element;if(i.hasClass("fbx-fullscreen-mode")&&!i.hasClass("fbx-loading")&&!i.hasClass("fbx-error")&&!i.hasClass("fbx-playpause-active")&&i.hasClass("fbx-playpause-center"))if(r==null)r={},r.X=e.pageX,r.Y=e.pageY;else if(r.X-e.pageX>=t||r.Y-e.pageY>=t||r.X-e.pageX<=-t||r.Y-e.pageY<=-t){var s=i.find(".fbx-play, .fbx-pause");s.is(":visible")||s.fadeIn("fast"),n.timers.mousestop.start(function(){r=null,s.fadeOut("fast")},n.FooBox.options.slideshow.mousestopTimeout)}},mouseenter:function(){var e=n.FooBox.modal.element;e.hasClass("fbx-fullscreen-mode")&&!e.hasClass("fbx-error")&&e.hasClass("fbx-playpause-center")&&(e.addClass("fbx-playpause-active"),r=null,n.timers.mousestop.stop())},mouseleave:function(){var e=n.FooBox.modal.element;e.hasClass("fbx-fullscreen-mode")&&!e.hasClass("fbx-error")&&e.hasClass("fbx-playpause-center")&&(e.removeClass("fbx-playpause-active"),n.timers.mousestop.start(function(){r=null,e.find(".fbx-play, .fbx-pause").fadeOut("fast")},n.FooBox.options.slideshow.mousestopTimeout))}},this.start=function(){n.remaining=n.remaining<1?n.FooBox.options.slideshow.timeout:n.remaining,n.autostart=!1,n.running=!0,n.FooBox.modal.element.find(".fbx-progress").css("width",n.paused+"%").show().animate({width:"100%"},n.remaining,"linear",function(){n.paused=0,n.remaining=n.FooBox.options.slideshow.timeout,n.autostart=!0,n.FooBox.modal.next(n.FooBox.options.slideshow.imagesOnly===!0?"image":null)}),n.FooBox.modal.element.find(".fbx-play").toggleClass("fbx-play fbx-pause"),n.FooBox.raise("foobox.slideshowStart")},this.stop=function(e){n.paused=0,n.FooBox.modal.element.find(".fbx-progress").stop().hide().css("width","0%"),n.running=!1,n.autostart=e,n.remaining=n.FooBox.options.slideshow.timeout,e||n.FooBox.modal.element.find(".fbx-pause").toggleClass("fbx-play fbx-pause"),n.FooBox.raise("foobox.slideshowStop")},this.pause=function(){var e=n.FooBox.modal.element.find(".fbx-progress"),t=e.stop().css("width"),r=e.css("position"),i=r=="fixed"?n.FooBox.modal.element.css("width"):n.FooBox.modal.element.find(".fbx-inner").css("width");n.running=!1,n.paused=parseInt(t,0)/parseInt(i,0)*100,n.remaining=n.FooBox.options.slideshow.timeout-n.FooBox.options.slideshow.timeout*(n.paused/100),n.FooBox.modal.element.find(".fbx-pause").toggleClass("fbx-play fbx-pause"),n.FooBox.raise("foobox.slideshowPause")}},t.addons.register(t.Slideshow,n)}(jQuery,window.FooBox),function(e,t){var n={social:{animation:"fade",enabled:!1,position:"fbx-top",onlyShowOnHover:!1,hoverDelay:300,links:[{css:"fbx-facebook",supports:["image","video"],title:"Facebook",url:"http://www.facebook.com/sharer.php?s=100&p[url]={url}&p[images][0]={img}&p[title]={title}&p[summary]={desc}"},{css:"fbx-google-plus",supports:["image","video"],title:"Google+",url:"https://plus.google.com/share?url={url-ne}"},{css:"fbx-twitter",supports:["image","video"],title:"Twitter",url:"https://twitter.com/share?url={url}&text={title}",titleSource:"pageTitle",titleCustom:"Custom Tweet Text!"},{css:"fbx-pinterest",supports:["image"],title:"Pinterest",url:"https://pinterest.com/pin/create/bookmarklet/?media={img}&url={url}&title={title}&is_video=false&description={desc}"},{css:"fbx-linkedin",supports:["image","video"],title:"LinkedIn",url:"http://www.linkedin.com/shareArticle?url={url}&title={title}"},{css:"fbx-buffer",supports:["image","video"],title:"Buffer",url:"#"},{css:"fbx-download",supports:["image"],title:"Download",url:"#"},{css:"fbx-email",supports:["image","video"],title:"Email",url:"mailto:"}]}};t.Social=function(n){this.FooBox=n,this.timers={hover:new t.Timer};var r=this;this.preinit=function(e){e.unbind({"foobox.initialized foobox.reinitialized":r.handlers.initialized,"foobox.setupHtml":r.handlers.setupHtml,"foobox.setupOptions":r.handlers.setupOptions,"foobox.onError":r.handlers.onError}).bind({"foobox.initialized foobox.reinitialized":r.handlers.initialized,"foobox.setupHtml":r.handlers.setupHtml,"foobox.setupOptions":r.handlers.setupOptions,"foobox.onError":r.handlers.onError})},this.handlers={initialized:function(e){e.fb.instance.element.unbind({"foobox.beforeLoad":r.handlers.beforeLoad,"foobox.afterLoad":r.handlers.afterLoad,"foobox.closeOverlays":r.handlers.closeOverlays}),e.fb.modal.undelegate("mouseenter.social mouseleave.social").find(".fbx-item-current, .fbx-item-next").unbind("click.social"),e.fb.options.social.enabled===!0&&(e.fb.instance.element.bind({"foobox.beforeLoad":r.handlers.beforeLoad,"foobox.afterLoad":r.handlers.afterLoad,"foobox.closeOverlays":r.handlers.closeOverlays}),e.fb.modal.find(".fbx-item-current, .fbx-item-next").bind("click.social",r.handlers.toggleSocial),e.fb.options.social.onlyShowOnHover===!0&&e.fb.modal.delegate(".fbx-inner:not(:has(.fbx-item-error))","mouseenter.social",r.handlers.mouseenter).delegate(".fbx-inner:not(:has(.fbx-item-error))","mouseleave.social",r.handlers.mouseleave))},closeOverlays:function(e){e.fb.modal.addClass("fbx-social-hidden"),r.hide()},toggleSocial:function(){return r.FooBox.modal.element.hasClass("fbx-error")?!0:(r.FooBox.modal.element.find(".fbx-social").is(":visible")?(r.FooBox.modal.element.addClass("fbx-social-hidden"),r.hide()):(r.FooBox.modal.element.removeClass("fbx-social-hidden"),r.show()),!0)},mouseenter:function(){r.timers.hover.start(function(){r.show()},r.FooBox.options.social.hoverDelay)},mouseleave:function(){r.timers.hover.start(function(){r.hide()},r.FooBox.options.social.hoverDelay)},setupHtml:function(t){var n=e('<div class="fbx-social"></div>');for(var r=0;r<t.fb.options.social.links.length;r++){var i=t.fb.options.social.links[r];n.append('<a href="'+i.url+'" rel="nofollow" target="_blank" class="'+i.css+'" title="'+i.title+'"></a>')}t.fb.modal.find(".fbx-inner").append(n)},setupOptions:function(e){var t=e.fb.options.social.enabled&&!e.fb.options.social.onlyShowOnHover?"":"none";e.fb.modal.find(".fbx-social").addClass(e.fb.options.social.position).css("display",t)},beforeLoad:function(e){if(e.fb.options.social.onlyShowOnHover==1)return;r.FooBox.modal.element.find(".fbx-social").css("display","none")},afterLoad:function(t){if(t.fb.modal.find(".fbx-item-error").length==0&&!e(t.fb.item.element).hasClass("no-social"))for(var n=0;n<t.fb.options.social.links.length;n++){var i=t.fb.options.social.links[n],s=t.fb.modal.find("."+i.css);if(s.length>0){e.inArray(t.fb.item.type,i.supports)!==-1?s.show():s.hide();var o=i.url;o.indexOf("{url-ne}")!=-1&&(o=o.replace(/{url-ne}/g,location.href)),o.indexOf("{url}")!=-1&&(o=o.replace(/{url}/g,encodeURIComponent(location.href))),o.indexOf("{img-ne}")!=-1&&(o=o.replace(/{img-ne}/g,t.fb.item.url));if(o.indexOf("{img}")!=-1){var u=decodeURIComponent(t.fb.item.url);o=o.replace(/{img}/g,encodeURIComponent(u))}if(o.indexOf("{title}")!=-1){var a=t.fb.item.title||"";i.titleSource=="caption"?a=t.fb.item.title+(t.fb.item.description?" - "+t.fb.item.description:""):i.titleSource=="h1"?a=e("h1:first").text():i.titleSource=="custom"?a=i.titleCustom:a=document.title+(t.fb.item.title?" - "+t.fb.item.title:""),a=a.replace(/(<([^>]+)>)/ig,""),o=o.replace(/{title}/g,encodeURIComponent(a))}if(o.indexOf("{desc}")!=-1){var f=t.fb.item.description||"";f=f.replace(/(<([^>]+)>)/ig,""),o=o.replace(/{desc}/g,encodeURIComponent(f))}s.attr("href",o)}}if(t.fb.options.social.onlyShowOnHover==1)return;r.show()},onError:function(e){e.fb.modal.find(".fbx-social").css("display","none")}},this.hide=function(){var e=r.FooBox.items.current(),t=r.FooBox.modal.element.find(".fbx-social");if(!r.FooBox.options.social.enabled||!e.social){t.css("display","none");return}switch(r.FooBox.options.social.animation){case"fade":t.stop(!0,!0).fadeOut(500);break;case"slide":t.stop(!0,!0).slideUp(500);break;default:t.css("display","none")}},this.show=function(){var e=r.FooBox.items.current(),t=r.FooBox.modal.element.find(".fbx-social");if(!r.FooBox.options.social.enabled||!e.social||r.FooBox.modal.element.hasClass("fbx-social-hidden")){t.css("display","none");return}switch(r.FooBox.options.social.animation){case"fade":t.stop(!0,!0).fadeIn(600);break;case"slide":t.stop(!0,!0).slideDown(400);break;default:t.css("display","")}}},t.addons.register(t.Social,n)}(jQuery,window.FooBox),function(e,t){var n={swipe:{enabled:!0,min:80}};t.Swipe=function(e){this.FooBox=e,this.isMoving=!1;var t=this,n;this.preinit=function(e){e.unbind("foobox.initialized foobox.reinitialized",t.handlers.initialized).bind("foobox.initialized foobox.reinitialized",t.handlers.initialized)},this.handlers={initialized:function(e){e.fb.modal.unbind({touchstart:t.handlers.onTouchStart,touchmove:t.handlers.onTouchMove}),e.fb.options.swipe.enabled===!0&&e.fb.modal.bind("touchstart",t.handlers.onTouchStart)},onTouchStart:function(e){var r=e.originalEvent.touches||e.touches;if(r.length!=1)return;n=r[0].pageX,t.isMoving=!0,t.FooBox.modal.element.bind("touchmove",t.handlers.onTouchMove)},onTouchMove:function(e){e.preventDefault();if(!t.isMoving)return!1;var r=e.originalEvent.touches||e.touches,i=r[0].pageX,s=n-i;return Math.abs(s)>=t.FooBox.options.swipe.min&&(t.cancelTouch(),s>0?(t.FooBox.raise("foobox.swipeRight"),t.FooBox.modal.next()):(t.FooBox.raise("foobox.swipeLeft"),t.FooBox.modal.prev())),!1}},this.cancelTouch=function(){t.FooBox.modal.element.unbind("touchmove",t.handlers.onTouchMove),n=null,t.isMoving=!1}},t.addons.register(t.Swipe,n)}(jQuery,window.FooBox),function(e,t){var n={wordpress:{enabled:!1}};t.Wordpress=function(e){this.FooBox=e;var n=this;this.preinit=function(e){e.unbind("foobox.initialized foobox.reinitialized",n.handlers.initialized).bind("foobox.initialized foobox.reinitialized",n.handlers.initialized)},this.handlers={initialized:function(e){e.fb.instance.element.unbind("foobox.createCaption",n.handlers.onCreateCaption),e.fb.options.wordpress.enabled===!0&&e.fb.instance.element.bind("foobox.createCaption",n.handlers.onCreateCaption)},onCreateCaption:function(e){var n=e.fb.options;if(n.wordpress.enabled!=1)return;e.fb.element.hasClass("gallery")?(n.captions.overrideTitle===!1&&(e.fb.item.title=e.fb.element.attr("title")),n.captions.overrideDesc===!1&&(e.fb.item.description=e.fb.element.closest(".gallery-item").find(".wp-caption-text:first").html()||"")):e.fb.element.hasClass("wp-caption")?(n.captions.overrideTitle===!1&&(e.fb.item.title=e.fb.element.find("img").attr("title")),n.captions.overrideDesc===!1&&(e.fb.item.description=e.fb.element.find(".wp-caption-text:first").html()||"")):e.fb.element.hasClass("tiled-gallery")&&(n.captions.overrideTitle===!1&&(e.fb.item.title=e.fb.element.parents(".tiled-gallery-item:first").find(".tiled-gallery-caption").html()||e.fb.element.find("img").data("image-title")||e.fb.element.find("img").attr("title")||""),n.captions.overrideDesc===!1&&(e.fb.item.description=e.fb.element.find("img").data("image-description")||"")),e.fb.item.caption=typeof e.fb.item.title=="string"&&e.fb.item.title.length>0?t.format('<div class="fbx-caption-title">{0}</div>',e.fb.item.title):"",e.fb.item.caption=typeof e.fb.item.description=="string"&&e.fb.item.description.length>0?e.fb.item.caption+t.format('<div class="fbx-caption-desc">{0}</div>',e.fb.item.description):e.fb.item.caption}}},t.addons.register(t.Wordpress,n)}(jQuery,window.FooBox),function(e,t){var n={html:{attr:"href",overflow:!0,findSelector:function(e,t){if(!t)return"";var n=t.attr(e.options.html.attr);return typeof n=="string"?t.attr(e.options.html.attr):""}}};t.HtmlHandler=function(n){this.FooBox=n,this.type="html",this.regex=/^#/i;var r=this;this.init=function(e,t){e.unbind("foobox.close",r.handlers.onClose).bind("foobox.close",r.handlers.onClose)},this.handlers={onClose:function(){var t,n;for(t=0;t<r.FooBox.items.array.length;t++)n=r.FooBox.items.array[t],n.type==r.type&&n.content instanceof jQuery&&n.error==0&&e(n.selector).length>0&&(e(n.selector).append(n.content.children()),n.content=null)}},this.handles=function(t,n){var i=r.FooBox.options.html.findSelector(r.FooBox,t),s=e(t).attr("target")==="foobox"&&typeof i=="string"&&i.match(r.regex)!=null&&(e(i).length>0||e(t).data("ajax")==1),o=r.FooBox.raise("foobox.handlesHtml",{element:t,handle:s});return o.fb.handle},this.defaults=function(e){e.fullscreen=e.fullscreen||!1,e.overflow=e.overflow||r.FooBox.options.html.overflow},this.parse=function(n){var i=new t.Item(r.type,n,this);r.defaults(i),i.url=i.selector=r.FooBox.options.html.findSelector(r.FooBox,n)||null,r.getSize(i);var s=i.selector!=null?e(i.selector):null;return s!=null&&s.length>0?(i.width=s.data("width")||n.data("width")||i.width||null,i.height=s.data("height")||n.data("height")||i.height||null,i.title=s.data("title")||n.data("title")||i.title||null,i.description=s.data("description")||n.data("description")||i.description||null):(i.width=n.data("width")||i.width||null,i.height=n.data("height")||i.height||null,i.title=n.data("title")||i.title||null,i.description=n.data("description")||i.description||null),i.deeplink=i.selector.replace("#",""),i.overflow=n.data("overflow")||i.overflow,i},this.load=function(t,n,i,s){try{var o=e("<div/>").addClass("fbx-item");t.error==1?o.addClass("fbx-item-error"):o.addClass("fbx-item-html");if(t.content==null&&typeof t.selector=="string"){if(e(t.selector).length==0){var u=r.FooBox.raise("foobox.loadHtml",{container:o,selector:t.selector,success:function(){t.content=u.fb.container,n.empty().append(t.content),e.isFunction(i)&&i(r.getSize(t))},error:function(t){t=t||"Unable to load HTML.",e.isFunction(s)&&s(t)}});return}var a=e(t.selector);a.length>0&&(t.content=o.append(a.children()))}t.content instanceof jQuery?(n.empty().append(t.content),e.isFunction(i)&&i(r.getSize(t))):e.isFunction(s)&&s("No valid HTML found to display.")}catch(f){e.isFunction(s)&&s(f)}},this.preload=function(e){},this.getSize=function(n){if((n.width==null||n.height==null||n.width==0||n.height==0)&&typeof n.selector=="string"){var r;typeof n.selector=="string"&&e(n.selector).length>0?r=e(n.selector).clone():n.content instanceof jQuery&&(r=n.content.clone()),r instanceof jQuery&&(r.css({position:"absolute",visibility:"hidden",display:"block",top:-1e4,left:-1e4}).appendTo("body"),typeof n.width=="number"&&n.width>0?r.width(n.width):n.width=r.outerWidth(!0),n.height=typeof n.height=="number"&&n.height>0?n.height:r.outerHeight(!0),r.remove())}return n.width!=null&&n.height!=null?new t.Size(n.width,n.height):new t.Size(0,0)},this.hasChanged=function(e){return!1}},t.handlers.register(t.HtmlHandler,n)}(jQuery,window.FooBox),function(e,t){var n={iframe:{attr:"href",findUrl:function(e,t){if(!t)return"";var n=t.attr(e.options.iframe.attr);return typeof n=="string"?t.attr(e.options.iframe.attr):""}}};t.IframeHandler=function(n){this.FooBox=n,this.type="iframe",this.regex=/^https?/i;var r=this;this.handles=function(t,n){var i=r.FooBox.options.iframe.findUrl(r.FooBox,t),s=e(t).attr("target")==="foobox"&&typeof i=="string"&&i.match(r.regex)!=null,o=r.FooBox.raise("foobox.handlesIframe",{element:t,handle:s});return o.fb.handle},this.defaults=function(e){e.fullscreen=e.fullscreen||!0},this.parse=function(e){var n=new t.Item(r.type,e,this);return r.defaults(n),n.url=r.FooBox.options.iframe.findUrl(r.FooBox,e)||null,n.width=e.data("width")||n.width||null,n.height=e.data("height")||n.height||null,n.title=e.data("title")||n.title||null,n.description=e.data("description")||n.description||null,n},this.load=function(t,n,i,s){try{var o=e("<iframe />").addClass("fbx-item fbx-item-iframe").attr("src",t.url);n.empty().append(o),e.isFunction(i)&&i(r.getSize(t))}catch(u){e.isFunction(s)&&s(u)}},this.preload=function(e){},this.getSize=function(e){if(e.width==null||e.height==null)e.width=(window.innerWidth||(document.body?document.body.offsetWidth:0))/.8,e.height=(window.innerHeight||(document.body?document.body.offsetHeight:0))/.8;return e.width!=null&&e.height!=null?new t.Size(e.width,e.height):new t.Size(0,0)},this.hasChanged=function(e){return!1}},t.handlers.register(t.IframeHandler,n)}(jQuery,window.FooBox),function(e,t){var n={images:{noRightClick:!1,attr:"href",overflow:!1,findUrl:function(e,t){if(!t)return"";var n=t.attr(e.options.images.attr);return typeof n=="string"?t.attr(e.options.images.attr):""}}};t.ImageHandler=function(n){this.FooBox=n,this.type="image",this.regex=/\.(jpg|jpeg|png|gif|bmp)/i;var r=this;this.handles=function(e,t){var n=r.FooBox.options.images.findUrl(r.FooBox,e),i=typeof n=="string"&&n.match(r.regex)!=null,s=r.FooBox.raise("foobox.handlesImage",{element:e,handle:i});return s.fb.handle},this.defaults=function(e){e.fullscreen=e.fullscreen||!0,e.captions=e.captions||!0,e.social=e.social||!0,e.overflow=e.overflow||r.FooBox.options.images.overflow},this.parse=function(e){var n=new t.Item(r.type,e,this);return r.defaults(n),n.url=r.FooBox.options.images.findUrl(r.FooBox,e)||null,n.width=e.data("width")||n.width||null,n.height=e.data("height")||n.height||null,n.title=e.data("title")||n.title||null,n.description=e.data("description")||n.description||null,n.overflow=e.data("overflow")||n.overflow||!1,n.image=null,n.url.match(/.*\/(.*)$/)&&(n.deeplink=n.url.match(/.*\/(.*)$/)[1]),n},this.load=function(t,n,i,s){try{var o=function(){var s=e(t.image).addClass("fbx-item fbx-item-image");r.FooBox.options.images.noRightClick&&s.bind("contextmenu",function(e){return e.preventDefault(),!1}),n.empty().append(s),e.isFunction(i)&&i(r.getSize(t))};!t.image||t.image===null?(t.image=new Image,t.image.onload=function(){t.image.onload=t.image.onerror=null,t.height=t.image.height,t.width=t.image.width,o()},t.image.onerror=function(){t.image.onload=t.image.onerror=null,t.image=null,e.isFunction(s)&&s("An error occurred attempting to load the image.")},t.image.src=t.url):o()}catch(u){e.isFunction(s)&&s(u)}},this.preload=function(e){if(e.preloaded!=1){var t=new Image;t.src=e.url,e.preloaded=!0}},this.getSize=function(e){return e.width!=null&&e.height!=null?new t.Size(e.width,e.height):new t.Size(0,0)},this.hasChanged=function(e){if(e.element instanceof jQuery){var t=r.FooBox.options.images.findUrl(r.FooBox,e.element);return e.url!=t}return!1}},t.handlers.register(t.ImageHandler,n)}(jQuery,window.FooBox),function(e,t){var n={videos:{attr:"href",findUrl:function(e,t){if(!t)return"";var n=t.attr(e.options.videos.attr);return typeof n=="string"?t.attr(e.options.videos.attr):""},autoPlay:!1,defaultWidth:640,defaultHeight:385,showCaptions:!1}};t.VideoHandler=function(n){this.FooBox=n,this.type="video",this.regex=/(youtube\.com\/watch|youtu\.be|vimeo\.com)/i;var r=this;this.handles=function(e,t){var n=r.FooBox.options.videos.findUrl(r.FooBox,e),i=typeof n=="string"&&n.match(r.regex)!=null,s=r.FooBox.raise("foobox.handlesVideo",{element:e,handle:i});return s.fb.handle},this.defaults=function(e){e.width=e.width||r.FooBox.options.videos.defaultWidth,e.height=e.height||r.FooBox.options.videos.defaultHeight,e.fullscreen=e.fullscreen||!0,e.social=e.social||!0,e.captions=e.captions||r.FooBox.options.videos.showCaptions},this.parse=function(e){var n=new t.Item(r.type,e,this);return r.defaults(n),n.url=r.FooBox.options.videos.findUrl(r.FooBox,e)||null,n.width=e.data("width")||n.width||null,n.height=e.data("height")||n.height||null,n.title=e.data("title")||n.title||null,n.description=e.data("description")||n.description||null,n},this.load=function(t,n,i,s){try{var o=t.url;o.match("http://(www.)?youtube|youtu.be")?(o.match("embed")?t.video_id=o.split(/embed\//)[1].split('"')[0]:t.video_id=o.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0],t.deeplink=t.video_id,t.video_type="youtube",t.video_url="http://www.youtube.com/embed/"+t.video_id,t.video_url+=r.getUrlVar("rel",o)?"?rel="+r.getUrlVar("rel",o):"?rel=0",t.video_valid=!0):o.match("http://(player.)?vimeo.com")&&(t.video_type="vimeo",t.video_id=o.split(/video\/|http:\/\/vimeo\.com\//)[1].split(/[?&]/)[0],t.deeplink=t.video_id,t.video_url="http://player.vimeo.com/video/"+t.video_id,t.video_valid=!0);if(t.video_valid===!0){if(r.FooBox.options.videos.autoPlay||r.getUrlVar("autoplay",o)==="1")t.video_url=r.appendUrlVar("autoplay=1",t.video_url);var u=e('<iframe webkitAllowFullScreen mozallowfullscreen allowFullScreen style="width:100%; height:100%" frameborder="no" />').attr("src",t.video_url).addClass("fbx-item fbx-item-video");n.empty().append(u),e.isFunction(i)&&i(r.getSize(t))}else e.isFunction(s)&&s("The video ["+t.url+"] is not supported")}catch(a){e.isFunction(s)&&s(a)}},this.preload=function(e){},this.getSize=function(e){if(e.width==null||e.height==null)e.width=r.FooBox.options.videos.defaultWidth,e.height=r.FooBox.options.videos.defaultHeight;return e.width!=null&&e.height!=null?new t.Size(e.width,e.height):new t.Size(0,0)},this.hasChanged=function(e){return!1},this.getUrlVar=function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=n.exec(t);return r==null?"":decodeURIComponent(r[1].replace(/\+/g," "))},this.appendUrlVar=function(e,t){return separator=t.indexOf("?")!==-1?"&":"?",t+separator+e}},t.handlers.register(t.VideoHandler,n)}(jQuery,window.FooBox)});